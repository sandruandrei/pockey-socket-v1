{"version":3,"sources":["src/GameFiles/Modules/SignalsModule/pockey-signal-types.ts","src/Framework/Signals/SignalBinding.ts","src/Framework/Signals/Signal.ts","src/Framework/Signals/signals-manager.ts","src/Framework/Signals/signal-types.ts","src/Framework/Abstracts/abstract-module.ts","src/Framework/Settings.ts","src/GameFiles/Modules/StateMachine/typestate.ts","src/GameFiles/Modules/StateMachine/pockey-state-machine.ts","src/Framework/Utils/Vector2.ts","src/Framework/Utils/pixi-dashed-line.ts","src/Framework/Utils/button-state.ts","src/Framework/Utils/mouse-handler.ts","src/PockeyEntryPoint/pockey-settings.ts","src/GameFiles/Modules/GameModule/p2-world-manager.ts","src/Framework/Utils/Line.ts","src/Framework/Loaders/assets-loader.ts","src/Framework/AbstractModules/Background/abstract-background-module.ts","src/Framework/AbstractModules/UserInterface/abstract-user-interface-module.ts","src/Framework/Utils/touch-handler.ts","src/Framework/AbstractModules/Connection/connection-channels-and-messages.ts","src/Framework/AbstractModules/Connection/socket-client.ts","src/Framework/AbstractModules/Connection/abstract-connection-module.ts","src/Framework/Abstracts/layers.ts","src/Framework/AbstractModules/Connection/database-connector.ts","src/Framework/abstract-entry-point.ts","src/GameFiles/Modules/GameModule/Pocket.ts","src/GameFiles/Modules/GameModule/balls/abstract-ball.ts","src/Framework/Utils/Rect.ts","src/GameFiles/Modules/GameModule/decal.ts","src/GameFiles/Modules/ConnectionModule/pocket-connection-channels-and-messages.ts","src/GameFiles/Modules/GameModule/stick.ts","src/GameFiles/Modules/GameModule/stick-mobile.ts","src/GameFiles/Modules/GameModule/balls/puck.ts","src/GameFiles/Modules/GameModule/balls/white-ball.ts","src/GameFiles/Modules/GameModule/puck-goal.ts","src/GameFiles/Modules/GameModule/pool-table.ts","src/GameFiles/Modules/StateMachine/pockey-state-texts.ts","src/GameFiles/Modules/GameModule/pool-table-manager.ts","src/GameFiles/Modules/GameModule/pool-table-manager-mobile.ts","src/GameFiles/Modules/GameModule/mobile-stick-power.ts","src/GameFiles/Modules/GameModule/pockey-game-module.ts","src/GameFiles/Modules/GameModule/player.ts","src/GameFiles/Modules/GameModule/game-manager.ts","src/GameFiles/Modules/BackgroundModule/pockey-background-module.ts","src/GameFiles/Modules/ConnectionModule/pocket-socket-client.ts","src/GameFiles/Modules/ConnectionModule/pockey-connection-module.ts","src/GameFiles/Modules/UserInterface/Screens/pockey-ui-searching-screen.ts","src/Framework/Utils/text-field.ts","src/Framework/Utils/pixi-button.ts","src/Framework/Utils/cookie.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/player-color-customizer.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/player-avatar-customizer.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/login-handler.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/tutorial-menu.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/play-game-menu.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/inventory-button.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/inventory-box.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/inventory-items-holder-buttons.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/inventory-menu.ts","src/GameFiles/Modules/UserInterface/Screens/MainScreen/pockey-ui-main-screen.ts","src/GameFiles/Modules/UserInterface/DesignElements/pockey-ui-in-game-avatar.ts","src/GameFiles/Modules/UserInterface/DesignElements/pockey-life-bar.ts","src/GameFiles/Modules/UserInterface/DesignElements/pockey-user-game-graphics.ts","src/GameFiles/Modules/UserInterface/DesignElements/pockey-ui-match-circle.ts","src/GameFiles/Modules/UserInterface/DesignElements/pockey-ui-versus-graphics.ts","src/Framework/Utils/pixi-multistyle-text.ts","src/GameFiles/Modules/UserInterface/Screens/pockey-ui-game-screen.ts","src/GameFiles/Modules/UserInterface/Screens/pockey-ui-winning-screen.ts","src/GameFiles/Modules/UserInterface/pockey-user-interface-module.ts","src/PockeyEntryPoint/pockey-entry-point.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/23/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module SignalsModule {\r\n        export class PockeySignalTypes {\r\n\r\n            public static PLAYER_SIGNED_OUT: string = \"PockeySignalTypes.\" + \"PLAYER_SIGNED_OUT\";\r\n            public static PLAYER_SIGNED_IN: string = \"PockeySignalTypes.\" + \"PLAYER_SIGNED_IN\";\r\n\r\n            public static SHOOT_BALL: string = \"PockeySignalTypes.\" + \"SHOOT_BALL\";\r\n            public static NEXT_TURN: string = \"PockeySignalTypes.\" + \"NEXT_TURN\";\r\n            public static BALL_IN_POCKET: string = \"PockeySignalTypes.\" + \"BALL_IN_POCKET\";\r\n            public static WHITE_BALL_IN_POCKET: string = \"PockeySignalTypes.\" + \"WHITE_BALL_IN_POCKET\";\r\n            public static REACTIVATE_STICK: string = \"PockeySignalTypes.\" + \"REACTIVATE_STICK\";\r\n            public static REPOSITION_STICK: string = \"PockeySignalTypes.\" + \"REPOSITION_STICK\";\r\n            public static STICK_PIVOT_MOBILE_UPDATE: string = \"PockeySignalTypes.\" + \"STICK_PIVOT_MOBILE_UPDATE\";\r\n            public static STICK_MOBILE_RELEASE: string = \"PockeySignalTypes.\" + \"STICK_MOBILE_RELEASE\";\r\n            public static HIDE_STICK_POWER_MOBILE: string = \"PockeySignalTypes.\" + \"HIDE_STICK_POWER_MOBILE\";\r\n            public static SHOW_STICK_POWER_MOBILE: string = \"PockeySignalTypes.\" + \"SHOW_STICK_POWER_MOBILE\";\r\n            public static REPOSITION_WHITE_BALL: string = \"PockeySignalTypes.\" + \"REPOSITION_WHITE_BALL\";\r\n            public static WHITE_BALL_REPOSITIONED: string = \"PockeySignalTypes.\" + \"WHITE_BALL_REPOSITIONED\";\r\n            public static FIRST_BALL_FAULT: string = \"PockeySignalTypes.\" + \"FIRST_BALL_FAULT\";\r\n            public static HIDE_BALL_RAY_GRAPHICS: string = \"PockeySignalTypes.\" + \"HIDE_GRAPHICS\";\r\n            public static POOLSTICK_ACTIVATED: string = \"PockeySignalTypes.\" + \"POOLSTICK_ACTIVATED\";\r\n            public static POCKEY_POOL_TABLE_RESIZED: string = \"PockeySignalTypes.\" + \"RESIZE_BACKGROUND\";\r\n            public static START_GAME: string = \"PockeySignalTypes.\" + \"START_GAME\";\r\n            public static SHOW_MAIN_MENU: string = \"PockeySignalTypes.\" + \"SHOW_MAIN_MENU\";\r\n            public static HIDE_MAIN_MENU: string = \"PockeySignalTypes.\" + \"HIDE_MAIN_MENU\";\r\n\r\n            public static SHOW_POOLTABLE: string = \"PockeySignalTypes.\" + \"SHOW_POOLTABLE\";\r\n            public static HIDE_POOLTABLE: string = \"PockeySignalTypes.\" + \"HIDE_POOLTABLE\";\r\n\r\n            public static SHOW_GAME_UI: string = \"PockeySignalTypes.\" + \"SHOW_GAME_UI\";\r\n            public static HIDE_GAME_UI: string = \"PockeySignalTypes.\" + \"HIDE_GAME_UI\";\r\n\r\n            public static SHOW_SEARCHING_SCREEN: string = \"PockeySignalTypes.\" + \"SHOW_SEARCHING_SCREEN\";\r\n            public static HIDE_SEARCHING_SCREEN: string = \"PockeySignalTypes.\" + \"HIDE_SEARCHING_SCREEN\";\r\n\r\n            public static SHOW_WINNING_SCREEN: string = \"PockeySignalTypes.\" + \"SHOW_WINNING_SCREEN\";\r\n            public static HIDE_WINNING_SCREEN: string = \"PockeySignalTypes.\" + \"HIDE_WINNING_SCREEN\";\r\n\r\n            public static UPDATE_PLAYER_NAME: string = \"PockeySignalTypes.\" + \"UPDATE_PLAYER_NAME\";\r\n            public static UPDATE_PLAYER_SCORE: string = \"PockeySignalTypes.\" + \"UPDATE_PLAYER_SCORE\";\r\n            public static CHANGE_PLAYER_COLOR: string = \"PockeySignalTypes.\" + \"CHANGE_PLAYER_COLOR\";\r\n\r\n\r\n            public static UPDATE_OPPONENT_NAME: string = \"PockeySignalTypes.\" + \"UPDATE_OPPONENT_NAME\";\r\n            public static UPDATE_OPPONENT_SCORE: string = \"PockeySignalTypes.\" + \"UPDATE_OPPONENT_SCORE\";\r\n            public static CHANGE_OPPONENT_COLOR: string = \"PockeySignalTypes.\" + \"CHANGE_OPPONENT_COLOR\";\r\n\r\n            public static SET_SIDES_TYPE: string = \"PockeySignalTypes.\" + \"SET_SIDES_TYPE\";\r\n\r\n            public static SEND_ELEMENTS_DATA_TO_MANAGER: string = \"PockeySignalTypes.\" + \"SEND_ELEMENTS_DATA_TO_MANAGER\";\r\n            public static UPDATE_WINNING_MESSAGE: string = \"PockeySignalTypes.\" + \"UPDATE_WINNING_MESSAGE\";\r\n            public static RESTART_GAME: string = \"PockeySignalTypes.\" + \"RESTART_GAME\";\r\n            public static RESET_POOLTABLE: string = \"PockeySignalTypes.\" + \"RESET_POOLTABLE\";\r\n            public static RESET_STICK_POWER: string = \"PockeySignalTypes.\" + \"RESET_STICK_POWER\";\r\n            public static RESET_GAME_SCREEN: string = \"PockeySignalTypes.\" + \"RESET_GAME_SCREEN\";\r\n            public static MOBILE_WHITE_BALL_REPOSITION_CONFIRMED: string = \"PockeySignalTypes.\" + \"MOBILE_WHITE_BALL_REPOSITION_CONFIRMED\";\r\n            public static SHOW_WHITE_BALL_POSITION_CONFIRMER: string = \"PockeySignalTypes.\" + \"SHOW_WHITE_BALL_POSITION_CONFIRMER\";\r\n            public static HIDE_WHITE_BALL_POSITION_CONFIRMER: string = \"PockeySignalTypes.\" + \"HIDE_WHITE_BALL_POSITION_CONFIRMER\";\r\n            public static UPDATE_STATE_TEXT: string = \"PockeySignalTypes.\" + \"UPDATE_GAME_TEXT\";\r\n            public static UPDATE_CURRENT_PLAYER_TIMER: string = \"PockeySignalTypes.\" + \"UPDATE_CURRENT_PLAYER_TIMER\";\r\n            public static UPDATE_UI_TEXT: string = \"PockeySignalTypes.\" + \"UPDATE_UI_TEXT\";\r\n            public static UPDATE_UI_TEXT_ON_WATCH: string = \"PockeySignalTypes.\" + \"UPDATE_UI_TEXT_ON_WATCH\";\r\n            public static ANIMATE_PUCK_GOAL: string = \"PockeySignalTypes.\" + \"ANIMATE_PUCK_GOAL\";\r\n            public static ANIMATE_PUCK_GOAL_STOP: string = \"PockeySignalTypes.\" + \"ANIMATE_PUCK_GOAL_STOP\";\r\n            public static UPDATE_MATCH_CIRCLES: string = \"PockeySignalTypes.\" + \"UPDATE_MATCH_CIRCLES\";\r\n            // public static UPDATE_PLAYERS_NAMES: string = \"PockeySignalTypes.\" + \"UPDATE_PLAYERS_NAMES\";\r\n\r\n            // static UPDATE_PLAYERS_NAMES: string;\r\n            // public static CHANGE_BACKGRO: string = \"PockeySignalTypes.\" + \"start_game\";\r\n            // public static SHOOTING_ENDED: string = \"shooting_ended\";\r\n        }\r\n\r\n        export class PockeyConnectionSignals {\r\n            public static WATCH: string = \"PockeyConnectionSignals.\" + \"WATCH\";\r\n            public static SCORE_UPDATE: string = \"PockeyConnectionSignals.\" + \"SCORE_UPDATE\";\r\n            public static YOUR_TURN: string = \"PockeyConnectionSignals.\" + \"YOUR_TURN\";\r\n            public static OPPONENT_SETTINGS: string = \"PockeyConnectionSignals.\" + \"OPPONENT_SETTINGS\";\r\n            public static OPPONENT_RESTART_GAME: string = \"PockeyConnectionSignals.\" + \"OPPONENT_RESTART_GAME\";\r\n        }\r\n    }\r\n}\r\n","/// <reference path=\"Signal.ts\" />\n\n/*\n*\t@desc   \tAn object that represents a binding between a Signal and a listener function.\n*               Released under the MIT license\n*\t\t\t\thttp://millermedeiros.github.com/js-signals/\n*\n*\t@version\t1.0 - 7th March 2013\n*\n*\t@author \tRichard Davey, TypeScript conversion\n*\t@author\t\tMiller Medeiros, JS Signals\n*\t@author\t\tRobert Penner, AS Signals\n*\n*\t@url\t\thttp://www.kiwijs.org\n*\n*/\n\nnamespace Framework {\n    export class SignalBinding {\n\n        /**\n         * Object that represents a binding between a Signal and a listener function.\n         * <br />- <strong>This is an internal constructor and shouldn't be called by regular users.</strong>\n         * <br />- inspired by Joa Ebert AS3 SignalBinding and Robert Penner's Slot classes.\n         * @author Miller Medeiros\n         * @constructor\n         * @internal\n         * @name SignalBinding\n         * @param {Signal} signal Reference to Signal object that listener is currently bound to.\n         * @param {Function} listener Handler function bound to the signal.\n         * @param {boolean} isOnce If binding should be executed just once.\n         * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @param {Number} [priority] The priority level of the event listener. (default = 0).\n         */\n        constructor(signal: Signal, listener, isOnce: boolean, listenerContext, priority: number = 0) {\n\n            this._listener = listener;\n            this._isOnce = isOnce;\n            this.context = listenerContext;\n            this._signal = signal;\n            this.priority = priority || 0;\n\n        }\n\n        /**\n         * Handler function bound to the signal.\n         * @type Function\n         * @private\n         */\n        private _listener;\n\n        /**\n         * If binding should be executed just once.\n         * @type boolean\n         * @private\n         */\n        private _isOnce: boolean;\n\n        /**\n         * Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @memberOf SignalBinding.prototype\n         * @name context\n         * @type Object|undefined|null\n         */\n        public context;\n\n        /**\n         * Reference to Signal object that listener is currently bound to.\n         * @type Signal\n         * @private\n         */\n        private _signal: Signal;\n\n        /**\n         * Listener priority\n         * @type Number\n         */\n        public priority: number;\n\n        /**\n         * If binding is active and should be executed.\n         * @type boolean\n         */\n        public active: boolean = true;\n\n        /**\n         * Default parameters passed to listener during `Signal.dispatch` and `SignalBinding.execute`. (curried parameters)\n         * @type Array|null\n         */\n        public params = null;\n\n        /**\n         * Call listener passing arbitrary parameters.\n         * <p>If binding was added using `Signal.addOnce()` it will be automatically removed from signal dispatch queue, this method is used internally for the signal dispatch.</p>\n         * @param {Array} [paramsArr] Array of parameters that should be passed to the listener\n         * @return {*} Value returned by the listener.\n         */\n        public execute(paramsArr?: any[]) {\n\n            let handlerReturn;\n            let params;\n\n            if (this.active && !!this._listener) {\n                params = this.params ? this.params.concat(paramsArr) : paramsArr;\n\n                handlerReturn = this._listener.apply(this.context, params);\n\n                if (this._isOnce) {\n                    this.detach();\n                }\n            }\n\n            return handlerReturn;\n\n        }\n\n        /**\n         * Detach binding from signal.\n         * - alias to: mySignal.remove(myBinding.getListener());\n         * @return {Function|null} Handler function bound to the signal or `null` if binding was previously detached.\n         */\n        public detach() {\n\n            return this.isBound() ? this._signal.remove(this._listener, this.context) : null;\n\n        }\n\n        /**\n         * @return {Boolean} `true` if binding is still bound to the signal and have a listener.\n         */\n        public isBound(): boolean {\n\n            return (!!this._signal && !!this._listener);\n\n        }\n\n        /**\n         * @return {boolean} If SignalBinding will only be executed once.\n         */\n        public isOnce(): boolean {\n\n            return this._isOnce;\n\n        }\n\n        /**\n         * @return {Function} Handler function bound to the signal.\n         */\n        public getListener() {\n\n            return this._listener;\n\n        }\n\n        /**\n         * @return {Signal} Signal that listener is currently bound to.\n         */\n        public getSignal() {\n\n            return this._signal;\n\n        }\n\n        /**\n         * Delete instance properties\n         * @private\n         */\n        public _destroy() {\n\n            delete this._signal;\n            delete this._listener;\n            delete this.context;\n\n        }\n\n        /**\n         * @return {string} String representation of the object.\n         */\n        public toString(): string {\n\n            return '[SignalBinding isOnce:' + this._isOnce + ', isBound:' + this.isBound() + ', active:' + this.active + ']';\n\n        }\n\n    }\n}","/// <reference path=\"SignalBinding.ts\" />\n\n/**\n *    @desc       A TypeScript conversion of JS Signals by Miller Medeiros\n *               Released under the MIT license\n *                http://millermedeiros.github.com/js-signals/\n *\n *    @version    1.0 - 7th March 2013\n *\n *    @author    Richard Davey, TypeScript conversion\n *    @author        Miller Medeiros, JS Signals\n *    @author        Robert Penner, AS Signals\n *\n *    @url        http://www.photonstorm.com\n */\n\n/**\n * Custom event broadcaster\n * <br />- inspired by Robert Penner's AS3 Signals.\n * @name Signal\n * @author Miller Medeiros\n * @constructor\n */\nnamespace Framework {\n    export class Signal {\n\n        /**\n         * @property _bindings\n         * @type Array\n         * @private\n         */\n        private _bindings: SignalBinding[] = [];\n\n        /**\n         * @property _prevParams\n         * @type Any\n         * @private\n         */\n        private _prevParams = null;\n\n        /**\n         * Signals Version Number\n         * @property VERSION\n         * @type String\n         * @const\n         */\n        public static VERSION: string = '1.0.0';\n\n        /**\n         * If Signal should keep record of previously dispatched parameters and\n         * automatically execute listener during `add()`/`addOnce()` if Signal was\n         * already dispatched before.\n         * @type boolean\n         */\n        public memorize: boolean = false;\n\n        /**\n         * @type boolean\n         * @private\n         */\n        private _shouldPropagate: boolean = true;\n\n        /**\n         * If Signal is active and should broadcast events.\n         * <p><strong>IMPORTANT:</strong> Setting this property during a dispatch will only affect the next dispatch, if you want to stop the propagation of a signal use `halt()` instead.</p>\n         * @type boolean\n         */\n        public active: boolean = true;\n\n        /**\n         * @method validateListener\n         * @param {Any} listener\n         * @param {Any} fnName\n         */\n        public validateListener(listener, fnName) {\n\n            if (typeof listener !== 'function') {\n                throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}', fnName));\n            }\n\n        }\n\n        /**\n         * @param {Function} listener\n         * @param {boolean} isOnce\n         * @param {Object} [listenerContext]\n         * @param {Number} [priority]\n         * @return {SignalBinding}\n         * @private\n         */\n        private _registerListener(listener, isOnce: boolean, listenerContext, priority: number): SignalBinding {\n\n            let prevIndex: number = this._indexOfListener(listener, listenerContext);\n            let binding: SignalBinding;\n\n            if (prevIndex !== -1) {\n                binding = this._bindings[prevIndex];\n\n                if (binding.isOnce() !== isOnce) {\n                    throw new Error('You cannot add' + (isOnce ? '' : 'Once') + '() then add' + (!isOnce ? '' : 'Once') + '() the same listener without removing the relationship first.');\n                }\n            }\n            else {\n                binding = new SignalBinding(this, listener, isOnce, listenerContext, priority);\n\n                this._addBinding(binding);\n            }\n\n            if (this.memorize && this._prevParams) {\n                binding.execute(this._prevParams);\n            }\n\n            return binding;\n\n        }\n\n        /**\n         * @method _addBinding\n         * @param {SignalBinding} binding\n         * @private\n         */\n        private _addBinding(binding: SignalBinding) {\n\n            //simplified insertion sort\n\n            let n: number = this._bindings.length;\n\n            do {\n                --n;\n            } while (this._bindings[n] && binding.priority <= this._bindings[n].priority);\n\n            this._bindings.splice(n + 1, 0, binding);\n\n        }\n\n        /**\n         * @method _indexOfListener\n         * @param {Function} listener\n         * @return {number}\n         * @private\n         */\n        private _indexOfListener(listener, context): number {\n\n            let n: number = this._bindings.length;\n            let cur: SignalBinding;\n\n            while (n--) {\n                cur = this._bindings[n];\n\n                if (cur.getListener() === listener && cur.context === context) {\n                    return n;\n                }\n            }\n\n            return -1;\n\n        }\n\n        /**\n         * Check if listener was attached to Signal.\n         * @param {Function} listener\n         * @param {Object} [context]\n         * @return {boolean} if Signal has the specified listener.\n         */\n        public has(listener, context: any = null): boolean {\n\n            return this._indexOfListener(listener, context) !== -1;\n\n        }\n\n        /**\n         * Add a listener to the signal.\n         * @param {Function} listener Signal handler function.\n         * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\n         * @return {SignalBinding} An Object representing the binding between the Signal and listener.\n         */\n        public add(listener, listenerContext: any = null, priority: number = 0): SignalBinding {\n\n            this.validateListener(listener, 'add');\n\n            return this._registerListener(listener, false, listenerContext, priority);\n\n        }\n\n        /**\n         * Add listener to the signal that should be removed after first execution (will be executed only once).\n         * @param {Function} listener Signal handler function.\n         * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\n         * @return {SignalBinding} An Object representing the binding between the Signal and listener.\n         */\n        public addOnce(listener, listenerContext: any = null, priority: number = 0): SignalBinding {\n\n            this.validateListener(listener, 'addOnce');\n\n            return this._registerListener(listener, true, listenerContext, priority);\n\n        }\n\n        /**\n         * Remove a single listener from the dispatch queue.\n         * @param {Function} listener Handler function that should be removed.\n         * @param {Object} [context] Execution context (since you can add the same handler multiple times if executing in a different context).\n         * @return {Function} Listener handler function.\n         */\n        public remove(listener, context: any = null) {\n\n            this.validateListener(listener, 'remove');\n\n            let i: number = this._indexOfListener(listener, context);\n\n            if (i !== -1) {\n                this._bindings[i]._destroy(); //no reason to a SignalBinding exist if it isn't attached to a signal\n                this._bindings.splice(i, 1);\n            }\n\n            return listener;\n\n        }\n\n        /**\n         * Remove all listeners from the Signal.\n         */\n        public removeAll() {\n\n            let n: number = this._bindings.length;\n\n            while (n--) {\n                this._bindings[n]._destroy();\n            }\n\n            this._bindings.length = 0;\n\n        }\n\n        /**\n         * @return {number} Number of listeners attached to the Signal.\n         */\n        public getNumListeners(): number {\n\n            return this._bindings.length;\n\n        }\n\n        /**\n         * Stop propagation of the event, blocking the dispatch to next listeners on the queue.\n         * <p><strong>IMPORTANT:</strong> should be called only during signal dispatch, calling it before/after dispatch won't affect signal broadcast.</p>\n         * @see Signal.prototype.disable\n         */\n        public halt() {\n\n            this._shouldPropagate = false;\n\n        }\n\n        /**\n         * Dispatch/Broadcast Signal to all listeners added to the queue.\n         * @param {...*} [params] Parameters that should be passed to each handler.\n         */\n        public dispatch(...paramsArr: any[]) {\n\n            if (!this.active) {\n                return;\n            }\n\n            let n: number = this._bindings.length;\n            let bindings: SignalBinding[];\n\n            if (this.memorize) {\n                this._prevParams = paramsArr;\n            }\n\n            if (!n) {\n                //should come after memorize\n                return;\n            }\n\n            bindings = this._bindings.slice(0); //clone array in case add/remove items during dispatch\n\n            this._shouldPropagate = true; //in case `halt` was called before dispatch or during the previous dispatch.\n\n            //execute all callbacks until end of the list or until a callback returns `false` or stops propagation\n            //reverse loop since listeners with higher priority will be added at the end of the list\n            do {\n                n--;\n            } while (bindings[n] && this._shouldPropagate && bindings[n].execute(paramsArr) !== false);\n\n        }\n\n        /**\n         * Forget memorized arguments.\n         * @see Signal.memorize\n         */\n        public forget() {\n\n            this._prevParams = null;\n\n        }\n\n        /**\n         * Remove all bindings from signal and destroy any reference to external objects (destroy Signal object).\n         * <p><strong>IMPORTANT:</strong> calling any method on the signal instance after calling dispose will throw errors.</p>\n         */\n        public dispose() {\n\n            this.removeAll();\n\n            delete this._bindings;\n            delete this._prevParams;\n\n        }\n\n        /**\n         * @return {string} String representation of the object.\n         */\n        public toString(): string {\n\n            return '[Signal active:' + this.active + ' numListeners:' + this.getNumListeners() + ']';\n\n        }\n\n    }\n}","///<reference path=\"Signal.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/18/2018\r\n */\r\n\r\nnamespace Framework {\r\n    export module Signals {\r\n\r\n        //CONSOLE COLORS FOR SIGNALS MANAGER: ORANGE\r\n        import sign = PIXI.utils.sign;\r\n\r\n        export class SignalsManager {\r\n            private static instance: SignalsManager;\r\n            private initialized: boolean = false;\r\n            // private signals: SignalObject[];\r\n            private signals: { [id: string]: Signal; };\r\n\r\n            // public StartGame: Signal;\r\n\r\n            static Instance() {\r\n                if (!SignalsManager.instance) {\r\n                    SignalsManager.instance = new SignalsManager();\r\n\r\n                    if (!SignalsManager.Instance().initialized) {\r\n                        SignalsManager.InitializeSignals();\r\n                        SignalsManager.Instance().initialized = true;\r\n                    }\r\n                }\r\n                return SignalsManager.instance;\r\n            }\r\n\r\n            private static InitializeSignals() {\r\n                SignalsManager.Instance().signals = {};\r\n\r\n            }\r\n\r\n            // public addSignal()\r\n            public static CreateNewSignal(id: string) {\r\n                SignalsManager.Instance().signals[id] = new Signal();\r\n                console.log(\"%c\" + \"Signals Manager -> new signal created: \" + id, \"color: orange\");\r\n                // console.log(\"%c\" + this.Name + \" assets loaded!\", \"color: green\");\r\n            }\r\n\r\n            public static GetSignal(id: string): Signal {\r\n                let signal: Signal = SignalsManager.Instance().signals[id];\r\n                if (!signal) {\r\n                    console.warn(\"SignalsManager.GetSignal: signal \" + id + \" is not registered!\");\r\n                }\r\n\r\n                return signal;\r\n            }\r\n\r\n            public static AddSignalCallback(signalID: string, callbackFunction: Function): void {\r\n                let signal: Signal = SignalsManager.Instance().signals[signalID];\r\n                if (!signal) {\r\n                    console.warn(\"SignalsManager.RegisterCallbackToSignal: signal \" + signalID + \" is not registered!\");\r\n                }\r\n\r\n                signal.add(callbackFunction);\r\n            }\r\n\r\n            public static DispatchSignal(id: string, params: any[] = null): void {\r\n\r\n                if (SignalsManager.Instance().signals[id]) {\r\n                    if (Settings.showSignalsDispatchSignalLog) {\r\n                        console.log(\"%c\" + \"SignalsManager -> Dispatched Signal: \" + id, \"color: #f68a06\");\r\n                    }\r\n\r\n                    SignalsManager.Instance().signals[id].dispatch(params);\r\n                }\r\n                else {\r\n                    console.warn(\"SignalsManager.DispatchSignal: signal \" + id + \" is net registered!\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/19/2018\r\n */\r\n\r\nnamespace Framework {\r\n    export module Signals {\r\n        export class SignalsType {\r\n            public static WINDOW_RESIZE: string = \"SignalsType.\" + \"WINDOW_RESIZE\";\r\n            public static ASSETS_LOADED: string = \"SignalsType.\" + \"ASSETS_LOADED\";\r\n            public static ALL_MODULES_ELEMENTS_CREATED: string = \"SignalsType.\" + \"ALL_MODULES_ELEMENTS_CREATED\";\r\n            public static MODULE_ELEMENTS_CREATED: string = \"SignalsType.\" + \"MODULE_ELEMENTS_CREATED\";\r\n            static CHANGE_BACKGROUND: string = \"SignalsType.\" + \"CHANGE_BACKGROUND\";\r\n\r\n        }\r\n\r\n        export class ConnectionSignalsType {\r\n            public static CREATE_SOCKET_IO_CONNECTION: string = \"ConnectionSignalsType.\" + 'CREATE_SOCKET_IO_CONNECTION';\r\n            public static SOCKET_IO_CONNECTION_CREATED: string = \"ConnectionSignalsType.\" + 'SOCKET_IO_CONNECTION_CREATED';\r\n            public static SOCKET_IO_DISCONNECTED: string = \"ConnectionSignalsType.\" + \"SOCKET_IO_DISCONNECTED\";\r\n            public static PRIVATE_MESSAGE: string = \"ConnectionSignalsType.\" + \"PRIVATE_MESSAGE\";\r\n            public static UPDATE_SOCKET_ID: string = \"ConnectionSignalsType.\" + \"UPDATE_SOCKET_ID\";\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../Signals/signals-manager.ts\"/>\r\n///<reference path=\"../Signals/signal-types.ts\"/>\r\n// Created by: Sandru Andrei for Edgeflow on 7/11/2018\r\nnamespace Framework {\r\n    export module Abstracts {\r\n        import Container = PIXI.Container;\r\n        import DisplayObject = PIXI.DisplayObject;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import SignalsType = Framework.Signals.SignalsType;\r\n\r\n        export class AbstractModule {\r\n\r\n            //files that the loader module should load\r\n            public AssetsToLoad: string[];\r\n            public Name: string = \"AbstractModule\";\r\n            public Layer: Container;\r\n            public ElementsCreated: boolean = false;\r\n\r\n            constructor() {\r\n                this.registerSignalsHandlers();\r\n                this.AssetsToLoad = [];\r\n            }\r\n\r\n            public addAssetToLoad(path: string): void {\r\n                this.AssetsToLoad.push(path);\r\n            }\r\n\r\n            public createElements() {\r\n                console.log(\"%c\" + this.Name + \" Elements Created!\", \"color: green\");\r\n                this.ElementsCreated = true;\r\n                SignalsManager.DispatchSignal(SignalsType.MODULE_ELEMENTS_CREATED);\r\n\r\n                // if (_.isNull(this.Display) || _.isUndefined(this.Display)) {\r\n                //     this.Display = new Container();\r\n                // }\r\n            }\r\n\r\n\r\n            protected addChild(child: DisplayObject) {\r\n                if (_.isNull(this.Layer) || _.isUndefined(this.Layer)) {\r\n                    console.log(\"%c\" + this.Name + \" LAYER not set!\", \"color: red\");\r\n                }\r\n                this.Layer.addChild(child);\r\n            }\r\n\r\n            protected removeChild(child: DisplayObject) {\r\n                if (_.isNull(this.Layer) || _.isUndefined(this.Layer)) {\r\n                    console.log(\"%c\" + this.Name + \" LAYER not set!\", \"color: red\");\r\n                }\r\n                this.Layer.removeChild(child);\r\n            }\r\n\r\n\r\n            protected registerSignalsHandlers() {\r\n                SignalsManager.AddSignalCallback(SignalsType.WINDOW_RESIZE, this.onResize.bind(this));\r\n            }\r\n\r\n            protected onResize(params: any[]): void {\r\n\r\n                if (Settings.stageWidth >= Settings.stageHeight) {\r\n                    if (Settings.isMobile) {\r\n                        this.handleMobileLandscape();\r\n                    }\r\n                    else {\r\n                        this.handleDesktopLandscape();\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    if (Settings.isMobile) {\r\n                        this.handleMobilePortrait();\r\n                    }\r\n                    else {\r\n                        this.handleDesktopPortrait();\r\n\r\n                    }\r\n                }\r\n                // console.log(\"%c\" + this.Name + \" onResize\", \"color: red\");\r\n\r\n            }\r\n\r\n            protected handleMobileLandscape(): void {\r\n\r\n            }\r\n\r\n            protected handleMobilePortrait(): void {\r\n\r\n            }\r\n\r\n            protected handleDesktopLandscape(): void {\r\n            }\r\n\r\n            protected handleDesktopPortrait(): void {\r\n                this.handleDesktopLandscape();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2017 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/11/2018\r\n */\r\n\r\nnamespace Framework {\r\n    export class Settings {\r\n\r\n        public static stageWidth: number;\r\n        public static stageHeight: number;\r\n        public static desktopAssetsPath: string = \"Assets/Desktop/\";\r\n        public static mobileAssetsPath: string = \"Assets/Mobile/\";\r\n        public static isMobile: boolean = false;\r\n        public static socketID: any;\r\n        public static backgroundsPath: string = \"Images/Backgrounds/\";\r\n        public static mainBackgroundName: string = \"MainBackground\";\r\n        public static singlePlayer: boolean = false;\r\n        public static showSignalsDispatchSignalLog: boolean = false;\r\n        public static playerSignedIn: boolean = false;\r\n\r\n        // constructor() {\r\n        //\r\n        // }\r\n    }\r\n}\r\n","namespace typestate {\n   /**\n    * Transition grouping to faciliate fluent api\n    */\n   export class Transitions<T> {\n      constructor(public fsm: FiniteStateMachine<T>) { }\n\n      public fromStates: T[];\n      public toStates: T[];\n\n\n      /**\n       * Specify the end state(s) of a transition function\n       */\n      public to(...states: T[]) {\n         this.toStates = states;\n         this.fsm.addTransitions(this);\n      }\n      /**\n       * Specify that any state in the state enum is value\n       * Takes the state enum as an argument\n       */\n      public toAny(states: any) {\n         var toStates: T[] = [];\n         for (var s in states) {\n            if (states.hasOwnProperty(s)) {\n               toStates.push((<T>states[s]));\n            }\n         }\n\n         this.toStates = toStates;\n         this.fsm.addTransitions(this);\n      }\n   }\n\n   /**\n    * Internal representation of a transition function\n    */\n   export class TransitionFunction<T> {\n      constructor(public fsm: FiniteStateMachine<T>, public from: T, public to: T) { }\n   }\n   \n   /**\n    * A simple finite state machine implemented in TypeScript, the templated argument is meant to be used\n    * with an enumeration.\n    */\n   export class FiniteStateMachine<T> {\n      public currentState: T;\n      private _startState: T;\n      private _allowImplicitSelfTransition: boolean;\n      private _transitionFunctions: TransitionFunction<T>[] = [];\n      private _onCallbacks: { [key: string]: { (from: T, event?: any): void; }[] } = {};\n      private _exitCallbacks: { [key: string]: { (to: T): boolean; }[] } = {};\n      private _enterCallbacks: { [key: string]: { (from: T, event?: any): boolean; }[] } = {};\n      private _invalidTransitionCallback: (to?: T, from?: T) => boolean = null;\n\n      constructor(startState: T, allowImplicitSelfTransition: boolean = false) {\n         this.currentState = startState;\n         this._startState = startState;\n         this._allowImplicitSelfTransition = allowImplicitSelfTransition;\n      }\n\n      public addTransitions(fcn: Transitions<T>) {\n         fcn.fromStates.forEach(from => {\n            fcn.toStates.forEach(to => {\n                // Only add the transition if the state machine is not currently able to transition.\n                if (!this._canGo(from, to)) {\n                  this._transitionFunctions.push(new TransitionFunction<T>(this, from, to));\n               }\n            });\n         });\n      }\n\n      /**\n       * Listen for the transition to this state and fire the associated callback\n       */\n      public on(state: T, callback: (from?: T, event?: any) => any): FiniteStateMachine<T> {\n         var key = state.toString();\n         if (!this._onCallbacks[key]) {\n            this._onCallbacks[key] = [];\n         }\n         this._onCallbacks[key].push(callback);\n         return this;\n      }\n\n      /**\n       * Listen for the transition to this state and fire the associated callback, returning\n       * false in the callback will block the transition to this state.\n       */\n      public onEnter(state: T, callback: (from?: T, event?: any) => boolean): FiniteStateMachine<T> {\n         var key = state.toString();\n         if (!this._enterCallbacks[key]) {\n            this._enterCallbacks[key] = [];\n         }\n         this._enterCallbacks[key].push(callback);\n         return this;\n      }\n\n      /**\n       * Listen for the transition to this state and fire the associated callback, returning\n       * false in the callback will block the transition from this state.\n       */\n      public onExit(state: T, callback: (to?: T) => boolean): FiniteStateMachine<T> {\n         var key = state.toString();\n         if (!this._exitCallbacks[key]) {\n            this._exitCallbacks[key] = [];\n         }\n         this._exitCallbacks[key].push(callback);\n         return this;\n      }\n      \n      /**\n       * List for an invalid transition and handle the error, returning a falsy value will throw an\n       * exception, a truthy one will swallow the exception\n       */\n      public onInvalidTransition(callback: (from?: T, to?: T) => boolean): FiniteStateMachine<T> {\n         if(!this._invalidTransitionCallback){\n            this._invalidTransitionCallback = callback\n         }\n         return this;\n      }\n\n      /**\n       * Declares the start state(s) of a transition function, must be followed with a '.to(...endStates)'\n       */\n      public from(...states: T[]): Transitions<T> {\n         var _transition = new Transitions<T>(this);\n         _transition.fromStates = states;\n         return _transition;\n      }\n\n      public fromAny(states: any): Transitions<T> {\n         var fromStates: T[] = [];\n         for (var s in states) {\n            if (states.hasOwnProperty(s)) {\n               fromStates.push((<T>states[s]));\n            }\n         }\n\n         var _transition = new Transitions<T>(this);\n         _transition.fromStates = fromStates;\n         return _transition;\n      }\n\n      private _validTransition(from: T, to: T): boolean {\n         return this._transitionFunctions.some(tf => {\n            return (tf.from === from && tf.to === to);\n         });\n      }\n\n      /**\n       * Check whether a transition between any two states is valid.\n       *    If allowImplicitSelfTransition is true, always allow transitions from a state back to itself.\n       *     Otherwise, check if it's a valid transition.\n       */\n      private _canGo(fromState: T, toState: T): boolean {\n          return (this._allowImplicitSelfTransition && fromState === toState) || this._validTransition(fromState, toState);\n      } \n\n      /**\n       * Check whether a transition to a new state is valid\n       */\n      public canGo(state: T): boolean {\n          return this._canGo(this.currentState, state);\n      }\n\n      /**\n       * Transition to another valid state\n       */\n      public go(state: T, event?: any): void {\n         if (!this.canGo(state)) {\n            if(!this._invalidTransitionCallback || !this._invalidTransitionCallback(this.currentState, state)){\n               throw new Error('Error no transition function exists from state ' + this.currentState.toString() + ' to ' + state.toString());\n            }\n         } else {\n            this._transitionTo(state, event);\n         }\n      }\n\n      /**\n       * This method is availble for overridding for the sake of extensibility. \n       * It is called in the event of a successful transition.\n       */\n      public onTransition(from: T, to: T) {\n         // pass, does nothing until overidden\n      }\n\n      /**\n      * Reset the finite state machine back to the start state, DO NOT USE THIS AS A SHORTCUT for a transition. \n      * This is for starting the fsm from the beginning.\n      */\n      public reset(): void {\n         this.currentState = this._startState;\n      }\n      \n      /**\n       * Whether or not the current state equals the given state\n       */\n      public is(state: T): boolean {\n          return this.currentState === state;\n      }\n\n      private _transitionTo(state: T, event?: any) {\n         if (!this._exitCallbacks[this.currentState.toString()]) {\n            this._exitCallbacks[this.currentState.toString()] = [];\n         }\n\n         if (!this._enterCallbacks[state.toString()]) {\n            this._enterCallbacks[state.toString()] = [];\n         }\n\n         if (!this._onCallbacks[state.toString()]) {\n            this._onCallbacks[state.toString()] = [];\n         }\n\n\n         var canExit = this._exitCallbacks[this.currentState.toString()].reduce<boolean>((accum: boolean, next: (to: T) => boolean) => {\n            return accum && (<boolean>next.call(this, state));\n         }, true);\n\n         var canEnter = this._enterCallbacks[state.toString()].reduce<boolean>((accum: boolean, next: (from: T) => boolean) => {\n            return accum && (<boolean>next.call(this, this.currentState, event));\n         }, true);\n\n         if (canExit && canEnter) {\n            var old = this.currentState;\n            this.currentState = state;\n            this._onCallbacks[this.currentState.toString()].forEach(fcn => {\n               fcn.call(this, old, event);\n            });\n            this.onTransition(old, state);\n         }\n      }\n   }\n}\n\n// maintain backwards compatibility for people using the pascal cased version\nvar TypeState = typestate;\n","///<reference path=\"typestate.ts\"/>\r\nnamespace Pockey {\r\n    export module StateMachineModule {\r\n        import FiniteStateMachine = typestate.FiniteStateMachine;\r\n\r\n        export enum PockeyStates {\r\n            /*0*/onLoad,\r\n            /*1*/onMainMenu,\r\n            /*2*/onStart,\r\n            /*3*/onGameEnd,\r\n            /*4*/onDefineClient,\r\n            /*5*/onSearchForPartner,\r\n            /*6*/onWatch,\r\n            /*7*/onRearrangeStick,\r\n            /*8*/onRepositionWhiteBall,\r\n            /*9*/onShoot,\r\n            /*10*/onEndTurn\r\n        }\r\n\r\n        // export enum PockeyStates {\r\n        //     StartGame,\r\n        //     PlayerTurn,\r\n        //     PlayerTurnFirstBall,\r\n        //     OpponentTurn,\r\n        //     OpponentTurnFirstBall,\r\n        //\r\n        // }\r\n\r\n\r\n        export class PockeyStateMachine {\r\n\r\n            // Construct the FSM with the inital state, in this case the elevator starts with its doors opened\r\n            public fsm: FiniteStateMachine<PockeyStates>;\r\n\r\n            private static instance: PockeyStateMachine;\r\n            private initialized: boolean = false;\r\n\r\n            static Instance(): PockeyStateMachine {\r\n                if (!PockeyStateMachine.instance) {\r\n                    PockeyStateMachine.instance = new PockeyStateMachine();\r\n\r\n                    if (!PockeyStateMachine.Instance().initialized) {\r\n                        PockeyStateMachine.Instance().fsm = new FiniteStateMachine<PockeyStates>(PockeyStates.onLoad);\r\n                        PockeyStateMachine.Instance().InitializeStates();\r\n                        PockeyStateMachine.Instance().initialized = true;\r\n\r\n                        let s: string = PockeyStates[PockeyStates.onLoad];\r\n                        console.log(\"%c StateMachine -> FSM currentState: \" + s, \"background: yellow; color: #f6546a; font-weight:bold; \");\r\n                        // setTimeout(() => {\r\n                        //     PockeyStateMachine.Instance().printFsmCurrentState();\r\n\r\n                        // }, 100);\r\n\r\n                    }\r\n                }\r\n                return PockeyStateMachine.instance;\r\n            }\r\n\r\n            private InitializeStates() {\r\n                this.fsm.from(PockeyStates.onLoad).to(PockeyStates.onMainMenu);\r\n\r\n                this.fsm.from(PockeyStates.onMainMenu).to(PockeyStates.onRearrangeStick);\r\n                this.fsm.from(PockeyStates.onMainMenu).to(PockeyStates.onSearchForPartner);\r\n\r\n                this.fsm.from(PockeyStates.onSearchForPartner).to(PockeyStates.onRearrangeStick);\r\n                this.fsm.from(PockeyStates.onSearchForPartner).to(PockeyStates.onWatch);\r\n\r\n                this.fsm.from(PockeyStates.onRepositionWhiteBall).to(PockeyStates.onRearrangeStick);\r\n                this.fsm.from(PockeyStates.onRepositionWhiteBall).to(PockeyStates.onWatch);\r\n                this.fsm.from(PockeyStates.onRepositionWhiteBall).to(PockeyStates.onEndTurn);\r\n\r\n                this.fsm.from(PockeyStates.onEndTurn).to(PockeyStates.onRearrangeStick);\r\n\r\n                this.fsm.from(PockeyStates.onWatch).to(PockeyStates.onRearrangeStick);\r\n\r\n                this.fsm.from(PockeyStates.onRearrangeStick).to(PockeyStates.onShoot);\r\n                this.fsm.from(PockeyStates.onRearrangeStick).to(PockeyStates.onWatch);\r\n                this.fsm.from(PockeyStates.onRearrangeStick).to(PockeyStates.onEndTurn);\r\n\r\n                this.fsm.from(PockeyStates.onShoot).to(PockeyStates.onEndTurn);\r\n                this.fsm.from(PockeyStates.onShoot).to(PockeyStates.onGameEnd);\r\n\r\n                this.fsm.from(PockeyStates.onEndTurn).to(PockeyStates.onRepositionWhiteBall);\r\n                this.fsm.from(PockeyStates.onEndTurn).to(PockeyStates.onWatch);\r\n                this.fsm.from(PockeyStates.onEndTurn).to(PockeyStates.onGameEnd);\r\n\r\n                this.fsm.from(PockeyStates.onWatch).to(PockeyStates.onGameEnd);\r\n                this.fsm.from(PockeyStates.onWatch).to(PockeyStates.onRepositionWhiteBall);\r\n\r\n                this.fsm.from(PockeyStates.onGameEnd).to(PockeyStates.onRearrangeStick);\r\n                this.fsm.from(PockeyStates.onGameEnd).to(PockeyStates.onWatch);\r\n\r\n            }\r\n\r\n            public changeState(state): void {\r\n                if (!PockeyStates[state]) {\r\n                    console.log(\"%c StateMachine -> state does not exist: \" + state, \"color: #000000; bacground:#ff9900\");\r\n\r\n                }\r\n                if(state == PockeyStates.onShoot)\r\n                {\r\n                    console.log(\"current state=======\");\r\n                    this.printFsmCurrentState();\r\n                    console.log(\"current state=======\");\r\n                    console.log(\"stop\");\r\n                }\r\n                PockeyStateMachine.Instance().fsm.go(state);\r\n                this.printFsmCurrentState();\r\n            }\r\n\r\n            public getCurrentStateName(): string {\r\n                let s: string = \"\";\r\n\r\n                if (this.fsm) {\r\n                    _.forEach(this.fsm, (state) => {\r\n                        if (state == this.fsm.currentState) {\r\n                            // s = state.toString();\r\n                            s = PockeyStates[state];\r\n                            return;\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n                return s;\r\n            }\r\n\r\n            private printFsmCurrentState(): void {\r\n                // if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onShoot) {\r\n                //     console.log(\"%c GameManager -> FSM currentState: \" + PockeyStateMachine.Instance().getCurrentStateName(), \"background: black; color: yellow; font-weight:bold; \");\r\n                //\r\n                // }\r\n                // else {\r\n                console.log(\"%c GameManager -> FSM currentState: \" + PockeyStateMachine.Instance().getCurrentStateName(), \"background: yellow; color: #f6546a; font-weight:bold; \");\r\n\r\n                // }\r\n                // console.log(\"%c GameManager -> FSM currentState: \" + PockeyStateMachine.Instance().getCurrentStateName(), \"background: yellow; color: #f6546a; font-weight:bold; \");\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/24/2018\r\n */\r\n\r\n\r\nnamespace Framework {\r\n    export module Utils {\r\n        import Point = PIXI.Point;\r\n        import PointLike = PIXI.PointLike;\r\n\r\n        export class Vector2 {\r\n\r\n            public x: number;\r\n            public y: number;\r\n\r\n            constructor(x: number = 0, y: number = 0) {\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n\r\n            public add(vector: Vector2 | Point | PointLike): Vector2 {\r\n                return new Vector2(this.x + vector.x, this.y + vector.y);\r\n            }\r\n\r\n            public addTo(vector: Vector2): void {\r\n                this.x += vector.x;\r\n                this.y += vector.y;\r\n            }\r\n\r\n            public substract(vector: Vector2 | Point | PointLike): Vector2 {\r\n                return new Vector2(this.x - vector.x, this.y - vector.y);\r\n            }\r\n\r\n            public distanceTo(vector: Vector2 | Point | PointLike): number {\r\n                var dx = this.x - vector.x;\r\n                var dy = this.y - vector.y;\r\n                return Math.sqrt(dx * dx + dy * dy);\r\n            }\r\n\r\n            public multiply(multiplicationFactor: number): Vector2 {\r\n                let cx:number = this.x;\r\n                let cy:number = this.y;\r\n                cx *= multiplicationFactor;\r\n                cy *= multiplicationFactor;\r\n                return new Vector2(cx, cy);\r\n            }\r\n\r\n            public dot(vector: Vector2): number {\r\n                return this.x * vector.x + this.y * vector.y;\r\n            }\r\n\r\n            public length(): number {\r\n                return (Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2)));\r\n            }\r\n\r\n\r\n            /**\r\n             * Method to obtain the projection of current vector on a given axis\r\n             * @param axis An axis where vector is projected on\r\n             * @return The projection length of current vector on given axis\r\n             */\r\n            public projectionOn(axis: Vector2): number {\r\n                return this.dotProduct(axis.normalise())\r\n            }\r\n\r\n            /**\r\n             * Method to perform dot product with another vector\r\n             * @param vector2 A vector to perform dot product with current vector\r\n             * @return A scalar number of dot product\r\n             */\r\n            public dotProduct(vector2: Vector2): number {\r\n                var componentX: number = this.x * vector2.x;\r\n                var componentY: number = this.y * vector2.y;\r\n                return componentX + componentY;\r\n            }\r\n\r\n            /**\r\n             * Method to obtain vector unit of current vector\r\n             * @return A copy of normalised vector\r\n             */\r\n            public normalise(): Vector2 {\r\n                return new Vector2(this.x/(Math.sqrt(this.x * this.x + this.y * this.y)), this.y/(Math.sqrt(this.x * this.x + this.y * this.y)));\r\n                // return new Vector2(this.x / this.getMagnitude(), this.y / this.getMagnitude());\r\n            }\r\n\r\n            /**\r\n             * Method to obtain current magnitude of vector\r\n             * @return Magnitude of type number\r\n             */\r\n            public getMagnitude(): number {\r\n                return Math.sqrt(this.x * this.x + this.y * this.y);\r\n            }\r\n\r\n            public setMagnitude(magnitude: number): void {\r\n                var ang_current: number = this.getAngle();\r\n                this.polar(magnitude, ang_current);\r\n            }\r\n\r\n            public getAngle(): number {\r\n                return Math.atan2(this.y, this.x);\r\n            }\r\n\r\n            public polar(mag: number, ang_rad: number): void {\r\n                this.x = mag * Math.cos(ang_rad);\r\n                this.y = mag * Math.sin(ang_rad);\r\n            }\r\n\r\n            /**\r\n             * Method to rotate current vector\r\n             * @param    angle_rad Angle in radian to rotate current vector\r\n             * @param    offset A vector to offset current circular into an eliptical course\r\n             * @return A copy of the rotated vector\r\n             */\r\n            public rotate(angle_rad: number): Vector2 {\r\n                let newX: number = this.x * Math.cos(angle_rad) - this.y * Math.sin(angle_rad);\r\n                let newY: number = this.x * Math.sin(angle_rad) + this.y * Math.cos(angle_rad);\r\n\r\n                return new Vector2(newX, newY);\r\n            }\r\n\r\n            public clone(): Vector2 {\r\n                let clone1: Vector2 = new Vector2(this.x, this.y);\r\n                return clone1;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/22/2018\r\n */\r\n\r\n\r\nnamespace Framework {\r\n    export module Utils {\r\n        import Graphics = PIXI.Graphics;\r\n\r\n        export class PixiDashedLine {\r\n\r\n            // constructor( ) {\r\n            //     super();\r\n            //     this.drawDashedLine(startX, startY, endX, endY, strokeLength, gap);\r\n            // }\r\n\r\n            /**\r\n             * @description  returns a sprite with a dashed line\r\n             * @langversion 3.0\r\n             * @usage drawDashedLine( 30, 30, 100, 100, 5, 3 );\r\n             *\r\n             * @param graphicsObject The object where to draw the line\r\n             * @param startX Start X of dashed line\r\n             * @param startY Start Y of dashed line\r\n             * @param endX End X of dashed line\r\n             * @param endY End Y of dashed line\r\n             * @param strokeLength Stroke length of dash\r\n             * @param gap Length of gap between dashes\r\n             * @param color\r\n             * @param stroke\r\n             *\r\n             * @return adds dashed line to the Graphics element\r\n             */\r\n            // import flash.display.Graphics;\r\n            // import flash.display.Sprite;\r\n\r\n            public static drawDashedLine(graphics: Graphics, startX: number = 0, startY: number = 0, endX: number = 0, endY: number = 0, strokeLength: number = 0, gap: number = 0, color: number = 0xffffff, stroke: number = 1, alpha: number = 1): Vector2 {\r\n                let arrowPoint:Vector2 = new Vector2();\r\n\r\n                // let graphics:Graphics = new Graphics();\r\n                // let line:Sprite = new Sprite();\r\n                // let lineGraphics:Graphics = line.graphics;\r\n                graphics.lineStyle(stroke, color, alpha);\r\n\r\n//lineGraphics.lineTo( startX, startY );\r\n\r\n// calculate the length of the segment\r\n                let segmentLength: number = strokeLength + gap;\r\n\r\n// calculate the length of the dashed line\r\n                let deltaX: number = endX - startX;\r\n                let deltaY: number = endY - startY;\r\n\r\n//By Pythagorous theorem\r\n                let _delta: number = Math.sqrt((deltaX * deltaX) + (deltaY * deltaY));\r\n\r\n// calculate the number of segments needed\r\n                let segmentsCount: number = Math.floor(Math.abs(_delta / segmentLength));\r\n\r\n// get the angle of the line in radians\r\n                let radians: number = Math.atan2(deltaY, deltaX);\r\n\r\n// start the line here\r\n                let aX: number = startX;\r\n                let aY: number = startY;\r\n\r\n// add these to cx, cy to get next seg start\r\n                deltaX = Math.cos(radians) * segmentLength;\r\n                deltaY = Math.sin(radians) * segmentLength;\r\n\r\n// loop through each segment\r\n                for (let i: number = 0; i < segmentsCount; i++) {\r\n                    graphics.moveTo(aX, aY);\r\n                    graphics.lineTo(aX + Math.cos(radians) * strokeLength, aY + Math.sin(radians) * strokeLength);\r\n                    aX += deltaX;\r\n                    aY += deltaY;\r\n                }\r\n\r\n// handling the last segment\r\n                graphics.moveTo(aX, aY);\r\n                _delta = Math.sqrt((endX - aX) * (endX - aX) + (endY - aY) * (endY - aY));\r\n                if (_delta > segmentLength) {\r\n// segment ends in the gap; drawing a full dash\r\n                    graphics.lineTo(aX + Math.cos(radians) * strokeLength, aY + Math.sin(radians) * strokeLength);\r\n                } else if (_delta > 0) {\r\n// segment shorter than dash; draw the remaining only\r\n                    graphics.lineTo(aX + Math.cos(radians) * _delta, aY + Math.sin(radians) * _delta);\r\n                }\r\n// move to the end position\r\n                graphics.lineTo(endX, endY);\r\n\r\n                arrowPoint.x = aX + Math.cos(radians) * (gap);// + Math.cos(radians) * (radius + gap);\r\n                arrowPoint.y = aY + Math.sin(radians) * (gap);// + Math.sin(radians) * (radius + gap);\r\n\r\n                return arrowPoint;\r\n                // return graphics;\r\n            }\r\n\r\n            public static drawDottedLine(graphics: Graphics, startX: number = 0, startY: number = 0, endX: number = 0, endY: number = 0, radius: number = 0, gap: number = 0, color: number = 0xffffff, alpha: number = 1): Vector2 {\r\n                // startX += gap;\r\n                // startY += gap;\r\n                let arrowPoint:Vector2 = new Vector2();\r\n\r\n                // let graphics:Graphics = new Graphics();\r\n                // let line:Sprite = new Sprite();\r\n                // let lineGraphics:Graphics = line.graphics;\r\n                // graphics.lineStyle( stroke, color, alpha );\r\n\r\n//lineGraphics.lineTo( startX, startY );\r\n\r\n// calculate the length of the segment\r\n                let segmentLength: number = radius * 2 + gap;\r\n\r\n// calculate the length of the dashed line\r\n                let deltaX: number = endX - startX;\r\n                let deltaY: number = endY - startY;\r\n\r\n//By Pythagorous theorem\r\n                let _delta: number = Math.sqrt((deltaX * deltaX) + (deltaY * deltaY));\r\n\r\n// calculate the number of segments needed\r\n                let segmentsCount: number = Math.floor(Math.abs(_delta / segmentLength));\r\n\r\n// get the angle of the line in radians\r\n                let radians: number = Math.atan2(deltaY, deltaX);\r\n\r\n// start the line here\r\n                let aX: number = startX;\r\n                let aY: number = startY;\r\n\r\n// add these to cx, cy to get next seg start\r\n                deltaX = Math.cos(radians) * segmentLength;\r\n                deltaY = Math.sin(radians) * segmentLength;\r\n\r\n                graphics.beginFill(color, alpha);\r\n// loop through each segment\r\n                for (let i: number = 0; i < segmentsCount; i++) {\r\n                    // graphics.moveTo( aX, aY );\r\n                    graphics.drawCircle(aX + Math.cos(radians) * (radius + gap), aY + Math.sin(radians) * (radius + gap), radius);\r\n\r\n                    aX += deltaX;\r\n                    aY += deltaY;\r\n                }\r\n\r\n\r\n// handling the last segment\r\n//                 graphics.moveTo( aX, aY );\r\n                _delta = Math.sqrt((endX - aX) * (endX - aX) + (endY - aY) * (endY - aY));\r\n                if (_delta > segmentLength) {\r\n// segment ends in the gap; drawing a full dash\r\n                    graphics.drawCircle(aX + Math.cos(radians) * radius, aY + Math.sin(radians) * radius, radius);\r\n                    // arrowPoint.x = aX + Math.cos(radians) * (radius + gap);\r\n                    // arrowPoint.y = aY + Math.sin(radians) * (radius + gap);\r\n//                 } else if( _delta > 0 ) {\r\n// // segment shorter than dash; draw the remaining only\r\n//                     graphics.drawCircle( aX + Math.cos( radians ) * _delta, aY + Math.sin( radians ) * _delta, radius );\r\n//                 }\r\n// move to the end position\r\n                graphics.drawCircle( endX, endY,radius );\r\n                    // arrowPoint.x = endX;// + Math.cos(radians) * (radius + gap);\r\n                    // arrowPoint.y = endY;// + Math.cos(radians) * (radius + gap);\r\n                    // return graphics;\r\n                }\r\n                graphics.endFill();\r\n                arrowPoint.x = aX + Math.cos(radians) * (gap);// + Math.cos(radians) * (radius + gap);\r\n                arrowPoint.y = aY + Math.sin(radians) * (gap);// + Math.sin(radians) * (radius + gap);\r\n\r\n                return arrowPoint;\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/17/2018\r\n */\r\n\r\nnamespace Framework {\r\n    export module Utils {\r\n        export class ButtonState {\r\n            public down: boolean = false;\r\n            public pressed: boolean = false;\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"Vector2.ts\"/>\r\n///<reference path=\"button-state.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/17/2018\r\n */\r\n\r\n\r\nnamespace Framework {\r\n    export module Utils {\r\n\r\n        import Point = PIXI.Point;\r\n        import Vector2 = Framework.Utils.Vector2;\r\n\r\n        export class MouseHandler {\r\n            private static instance: MouseHandler;\r\n            private initialized: boolean = false;\r\n\r\n            public left: ButtonState;\r\n            public middle: ButtonState;\r\n            public right: ButtonState;\r\n\r\n            public position: Point;\r\n\r\n            static Instance(): MouseHandler {\r\n                if (!MouseHandler.instance) {\r\n                    MouseHandler.instance = new MouseHandler();\r\n\r\n                    if (!MouseHandler.Instance().initialized) {\r\n                        MouseHandler.Instance().initialized = true;\r\n\r\n                        MouseHandler.Instance().position = new Point();\r\n                        MouseHandler.Instance().left = new ButtonState();\r\n                        MouseHandler.Instance().middle = new ButtonState();\r\n                        MouseHandler.Instance().right = new ButtonState();\r\n\r\n                        document.onmousemove = MouseHandler.Instance().handleMouseMove.bind(this);\r\n                        document.onmousedown = MouseHandler.Instance().handleMouseDown.bind(this);\r\n                        document.onmouseup = MouseHandler.Instance().handleMouseUp.bind(this);\r\n\r\n                        MouseHandler.Instance().reset();\r\n\r\n                    }\r\n                }\r\n                return MouseHandler.instance;\r\n            }\r\n\r\n            private handleMouseMove(e: MouseEvent): void {\r\n                let x: number = e.pageX;\r\n                let y: number = e.pageY;\r\n\r\n                MouseHandler.Instance().position = new Point(x, y);\r\n            }\r\n\r\n            private handleMouseDown(e: MouseEvent): void {\r\n                // this.handleMouseMove(e);\r\n\r\n                if (e.button == 0) {\r\n\r\n                    if (!MouseHandler.Instance().left.down) {\r\n                        MouseHandler.Instance().left.pressed = true;\r\n                    }\r\n                    MouseHandler.Instance().left.down = true;\r\n\r\n                } else if (e.button == 1) {\r\n\r\n                    if (!MouseHandler.Instance().middle.down) {\r\n                        MouseHandler.Instance().middle.pressed = true;\r\n                    }\r\n                    MouseHandler.Instance().middle.down = true;\r\n\r\n                } else if (e.button == 2) {\r\n\r\n                    if (!MouseHandler.Instance().right.down) {\r\n                        MouseHandler.Instance().right.pressed = true;\r\n                    }\r\n                    MouseHandler.Instance().right.down = true;\r\n                }\r\n            }\r\n\r\n            private handleMouseUp(e): void {\r\n                // this.handleMouseMove(e);\r\n                if (e.button == 0) {\r\n                    MouseHandler.Instance().left.down = false;\r\n                } else if (e.button == 1) {\r\n                    MouseHandler.Instance().middle.down = false;\r\n                } else if (e.button == 2) {\r\n                    MouseHandler.Instance().right.down = false;\r\n                }\r\n            }\r\n\r\n            private reset(): void {\r\n                // this.position.x = e.pageX;\r\n                this.left.pressed = false;\r\n                this.middle.pressed = false;\r\n                this.right.pressed = false;\r\n\r\n                requestAnimationFrame(this.reset.bind(this));\r\n            }\r\n\r\n            public GetAngle(vector: Vector2): number {\r\n                // let angle:number = 0;\r\n                var angle = Math.atan2(this.position.x - vector.x, -(this.position.y - vector.y)) * (180 / Math.PI);\r\n\r\n                return angle;\r\n            }\r\n        }\r\n\r\n    }\r\n}","///<reference path=\"../Framework/Utils/Vector2.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/24/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n\r\n    import Vector2 = Framework.Utils.Vector2;\r\n    import Settings = Framework.Settings;\r\n\r\n    export interface InventoryVO {\r\n        id: string,\r\n        icon: string,\r\n        model?: string,\r\n        category: string,\r\n        level: number\r\n    }\r\n\r\n    export class PockeySettings {\r\n\r\n        public static PLAYER_COLOR: number;\r\n        public static PLAYER_COLOR_ID: number;\r\n        public static PLAYER_AVATAR_ID: string;\r\n        public static PLAYER_CUE_ID: string;\r\n        public static PLAYER_DECAL_ID: string;\r\n        public static PLAYER_SOCKET_ID: string = \"\";\r\n        public static PLAYER_NAME: string = \"\";\r\n        public static PLAYER_LEVEL: number = 1;\r\n\r\n        public static OPPONENT_COLOR: number = 0x15D3E9;\r\n        public static OPPONENT_SOCKET_ID: string = \"\";\r\n        public static OPPONENT_NAME: string = \"SandruOpponent\";\r\n\r\n        public static DELTA: number = 0.98;\r\n        public static BALL_RADIUS: number = 17;\r\n        public static P2_WORLD_STEP: number = 1 / 60;\r\n\r\n        public static POCKEY_CUSTOM_BACKGROUND_NAME: string = \"pockey_custom_background_name\";\r\n        public static PUCK_COLOR: number = 0xe4b31c;\r\n        public static MIDDLE_TABLE_POS: Vector2;\r\n        public static MIDDLE_TABLE_LEFT_POS: Vector2;\r\n        public static MIDDLE_TABLE_RIGHT_POS: Vector2;\r\n        public static BALLS_NUMBER_FOR_EACH_PLAYER: number = 7;\r\n        public static STICK_MAX_POWER: number = 108;\r\n\r\n\r\n        public static LARGE_GOALIES_ARRAY: number[] = [];\r\n        public static SMALL_GOALIES_ARRAY: number[] = [];\r\n\r\n        public static LARGE_MISC_ARRAY: number[] = [];\r\n        public static SMALL_MISC_ARRAY: number[] = [];\r\n\r\n        public static LARGE_COLORS_ARRAY: number[] = [0xe92c5a, 0x16e0f8, 0xd6d72a, 0xc32ce9, 0x1584f4, 0x15efaf, 0x24a247, 0x86b009, 0xff8023, 0xe82bc3,];\r\n        public static SMALL_COLORS_ARRAY: number[] = [0xe92c5a, 0x16e0f8];\r\n\r\n        public static SMALL_DECALS_ARRAY: InventoryVO[] = [\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_default\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_default.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_default.png\",\r\n                level: 1\r\n            }\r\n        ];\r\n\r\n        public static LARGE_DECALS_ARRAY: InventoryVO[] = [\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_default\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_default.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_default.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_welcome\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/dccal_welcome.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/dccal_welcome.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_astrojunkie\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_astrojunkie.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_astrojunkie.png\",\r\n                level: 2\r\n            }, {\r\n                category: \"DECALS\",\r\n                id: \"decal_blastoff\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_blastoff.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_blastoff.png\",\r\n                level: 2\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_cthulu\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_cthulu.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_cthulu.png\",\r\n                level: 3\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_dice\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_dice.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_dice.png\",\r\n                level: 3\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_insertcoin\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_insertcoin.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_insertcoin.png\",\r\n                level: 4\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_knucklesandwhich\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_knucklesandwhich.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_knucklesandwhich.png\",\r\n                level: 4\r\n            }, {\r\n                category: \"DECALS\",\r\n                id: \"decal_looselips\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_looselips.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_looselips.png\",\r\n                level: 5\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_oneup\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_oneup.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_oneup.png\",\r\n                level: 6\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_playerone\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_playerone.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_playerone.png\",\r\n                level: 7\r\n            }, {\r\n                category: \"DECALS\",\r\n                id: \"decal_pockey\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_pockey.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_pockey.png\",\r\n                level: 7\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_ragequit\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_ragequit.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_ragequit.png\",\r\n                level: 8\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_statTrickshot\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_statTrickshot.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_statTrickshot.png\",\r\n                level: 9\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_towerking\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_towerking.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_towerking.png\",\r\n                level: 10\r\n            },\r\n            {\r\n                category: \"DECALS\",\r\n                id: \"decal_wingedsword\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_wingedsword.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/Decals/decal_wingedsword.png\",\r\n                level: 11\r\n            },\r\n        ];\r\n\r\n        public static LARGE_AVATARS_ARRAY: InventoryVO[] = [\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_guest\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_guest.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_boi\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_boi.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_grrl\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_grrl.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"nerdist\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_nerdist.png\",\r\n                level: 2\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_micky\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_micky.png\",\r\n                level: 2\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_glenn\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_glenn.png\",\r\n                level: 3\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_sc-izzi\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_sc-izzi.png\",\r\n                level: 4\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_atlas\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_atlas.png\",\r\n                level: 5\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_bear-blue\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_bear-blue.png\",\r\n                level: 6\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_cate\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_cate.png\",\r\n                level: 7\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_kooky\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_kooky.png\",\r\n                level: 8\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_r66-z\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_r66-z.png\",\r\n                level: 8\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_sc-comet.png\",\r\n                id: \"avatar_sc-comet\",\r\n                level: 8\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_spooky\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_spooky.png\",\r\n                level: 9\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avatar_xmas-atlas\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_xmas-atlas.png\",\r\n                level: 9\r\n            },\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"avater_snuggles\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avater_snuggles.png\",\r\n                level: 10\r\n            }\r\n        ];\r\n\r\n\r\n        public static SMALL_AVATARS_ARRAY: InventoryVO[] = [\r\n            {\r\n                category: \"AVATARS\",\r\n                id: \"guest\",\r\n                icon: Settings.desktopAssetsPath + \"Images/avatar_guest.png\",\r\n                level: 1\r\n            }\r\n        ];\r\n\r\n        public static SMALL_CUES_ARRAY: InventoryVO[] = [\r\n            {\r\n                category: \"CUES\",\r\n                id: \"icon_stick-default\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-default.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_default.png\",\r\n                level: 1\r\n            }\r\n        ];\r\n\r\n        public static LARGE_CUES_ARRAY: InventoryVO[] = [\r\n            {\r\n                category: \"CUES\",\r\n                id: \"icon_stick-default\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-default.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_default.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_basic\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-basic.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_basic.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_asiimowned\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-asiimowned.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_asiimowned.png\",\r\n                level: 1\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_bluesteel\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-bluesteel.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_bluesteel.png\",\r\n                level: 2\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_candycane\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-candycane.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_candycane.png\",\r\n                level: 2\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_dotty\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-dotty.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_dotty.png\",\r\n                level: 2\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_faceybook\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-faceybook.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_faceybook.png\",\r\n                level: 3\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_faceyou\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-faceyou.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_faceyou.png\",\r\n                level: 3\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_ivory\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-ivory.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_ivory.png\",\r\n                level: 4\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_ninja\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-ninja.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_ninja.png\",\r\n                level: 4\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_pinky\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-pinky.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_pinky.png\",\r\n                level: 4\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_purplestripe\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-purplestripe.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_purplestripe.png\",\r\n                level: 5\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_ragequit\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-ragequit.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_ragequit.png\",\r\n                level: 6\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_rawkstar\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-rawkstar.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_rawkstar.png\",\r\n                level: 7\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_rocket\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-rocket.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_rocket.png\",\r\n                level: 7\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_snakeeyes\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-snakeeyes.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_snakeeyes.png\",\r\n                level: 8\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_tiger\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-tiger.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_tiger.png\",\r\n                level: 8\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_tweetybird\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-tweetybird.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_tweetybird.png\",\r\n                level: 9\r\n            },\r\n            {\r\n                category: \"CUES\",\r\n                id: \"stick_whiteknight\",\r\n                icon: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/icon_stick-whiteknight.png\",\r\n                model: Settings.desktopAssetsPath + \"Images/InventoryScreen/poolsticks/stick_whiteknight.png\",\r\n                level: 10\r\n            },\r\n\r\n        ];\r\n\r\n        public static ROUND_DURATION_IN_SECONDS: number = 25;\r\n\r\n        public static MAIN_COLLISION_POLYGON: number[][] = [\r\n            [-559, -98],\r\n            [-487, -98],\r\n            [-482, -106],\r\n            [-482, -196],\r\n            [-485, -201],\r\n            [-520, -242],\r\n            [-520, -268],\r\n            [-494, -282],\r\n            [-468, -264],\r\n            [-439, -245],\r\n            [-431, -242],\r\n            [-47, -242],\r\n            [-41, -245],\r\n            [-25, -264],\r\n            [-10, -288],\r\n            [14, -288],\r\n            [30, -264],\r\n            [46, -245],\r\n            [53, -242],\r\n            [439, -242],\r\n            [447, -245],\r\n            [488, -280],\r\n            [515, -278],\r\n            [527, -249],\r\n            [490, -202],\r\n            [484, -195],\r\n            [484, -104],\r\n            [492, -96],\r\n            [555, -96],\r\n            [565, -96],\r\n            [565, -317],\r\n            [-559, -317]\r\n        ];\r\n        public static MAIN_COLLISION_SHADOW: number[][] = [\r\n            [429 - 978, 277 - 12 - 549],\r\n            [429 - 978, 561 - 12 - 549],\r\n            [513 - 978, 561 - 12 - 549],\r\n            [513 - 978, 357 - 12 - 549],\r\n\r\n            [478 - 978, 314 - 12 - 549],\r\n\r\n            [476 - 978, 300 - 12 - 549],\r\n            [490 - 978, 303 - 12 - 549],\r\n\r\n\r\n            [535 - 978, 336 - 12 - 549],\r\n            [940 - 978, 336 - 12 - 549],\r\n            [981 - 978, 287 - 12 - 549],\r\n            [1018 - 978, 335 - 12 - 549],\r\n            [1426 - 978, 335 - 12 - 549],\r\n\r\n            [1469 - 978, 303 - 12 - 549],\r\n\r\n            [1485 - 978, 300 - 12 - 549],\r\n\r\n            [1483 - 978, 314 - 12 - 549],\r\n\r\n            [1448 - 978, 358 - 12 - 549],\r\n            [1448 - 978, 561 - 12 - 549],\r\n            [1533 - 978, 561 - 12 - 549],\r\n            [1533 - 978, 277 - 12 - 549]];\r\n\r\n\r\n    }\r\n}\r\n","///<reference path=\"../../../../lib/types/p2/p2.d.ts\"/>\r\n///<reference path=\"../../../PockeyEntryPoint/pockey-settings.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/9/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        export enum MaterialType {\r\n            BALL_MATERIAL = 1,\r\n            SHADOW_MATERIAL = 2,\r\n            LINE_MATERIAL = 3,\r\n            BALL_ONLY_MATERIAL = 4,\r\n            PUCK_ONLY_MATERIAL = 5,\r\n            PUCK_MATERIAL = 6\r\n        }\r\n\r\n        export class P2WorldManager {\r\n            private static instance: P2WorldManager;\r\n            private initialized: boolean = false;\r\n            private name: string;\r\n            private materials: { [id: string]: p2.Material; };\r\n            // public ballMaterial: p2.Material;\r\n            // aici se calluie salamu!\r\n\r\n            public world: p2.World;\r\n            public frameStep: number = 1 / 60;\r\n\r\n            private ballToBallCollisionMaterial: p2.ContactMaterial;\r\n            private ballToPuckOnlyLineCollisionMaterial: p2.ContactMaterial;\r\n            private puckToBallOnlyLineCollisionMaterial: p2.ContactMaterial;\r\n\r\n\r\n            constructor() {\r\n                this.name = \"P2WorldManager\";\r\n                this.materials = {};\r\n            }\r\n\r\n            static Instance() {\r\n                if (!P2WorldManager.instance) {\r\n                    P2WorldManager.instance = new P2WorldManager();\r\n\r\n                    if (!P2WorldManager.Instance().initialized) {\r\n                        P2WorldManager.Instance().world = new p2.World({\r\n                            gravity: [0, 0],\r\n\r\n                        });\r\n\r\n                        // let solver:p2.GSSolver = new p2.GSSolver();\r\n                        // solver.tolerance = 0.00001;\r\n                        // solver.iterations = 20;//\r\n                        // solver.solve(40, P2WorldManager.Instance().world);\r\n\r\n                        // P2WorldManager.Instance().world.solver = solver;//\r\n                        // P2WorldManager.Instance().world.solver.sti = solver;//\r\n\r\n                        TweenMax.delayedCall(PockeySettings.P2_WORLD_STEP, P2WorldManager.Instance().createElements.bind(this));\r\n                        P2WorldManager.Instance().initialized = true;\r\n                        console.log(\"%c\" + \"P2WorldManager initialized\", \"color: blue\");\r\n\r\n                    }\r\n                }\r\n                return P2WorldManager.instance;\r\n            }\r\n\r\n            public getMaterialByID(materialID: number): p2.Material {\r\n                if (!_.isNull(P2WorldManager.Instance().materials[materialID]) && !_.isUndefined(P2WorldManager.Instance().materials[materialID]))\r\n                    return P2WorldManager.Instance().materials[materialID];\r\n\r\n                else {\r\n                    console.log(\"c%\" + \" \" + P2WorldManager.name + \" -> ERROR: material not registered\");\r\n                    return null;\r\n                }\r\n\r\n            }\r\n\r\n            private createElements() {\r\n\r\n                P2WorldManager.Instance().world.sleepMode = p2.World.BODY_SLEEPING;\r\n\r\n\r\n                P2WorldManager.Instance().materials = {};\r\n                P2WorldManager.createMaterials();\r\n\r\n                P2WorldManager.defineContactMaterials();\r\n            }\r\n\r\n            private static createMaterials(): void {\r\n                P2WorldManager.createNewMaterial(MaterialType.SHADOW_MATERIAL);\r\n                P2WorldManager.createNewMaterial(MaterialType.BALL_MATERIAL);\r\n                P2WorldManager.createNewMaterial(MaterialType.PUCK_MATERIAL);\r\n                P2WorldManager.createNewMaterial(MaterialType.BALL_ONLY_MATERIAL);\r\n                P2WorldManager.createNewMaterial(MaterialType.PUCK_ONLY_MATERIAL);\r\n                P2WorldManager.createNewMaterial(MaterialType.LINE_MATERIAL);\r\n            }\r\n\r\n            private static defineContactMaterials() {\r\n\r\n                // // ball to normal line contact material\r\n                let ballToNormalLineContactMaterial: p2.ContactMaterial = new p2.ContactMaterial(P2WorldManager.Instance().getMaterialByID(MaterialType.BALL_MATERIAL), P2WorldManager.Instance().getMaterialByID(MaterialType.LINE_MATERIAL), {\r\n                    // stiffness: 10000,\r\n                    // frictionStiffness: 500000,\r\n                    friction: 0.68,\r\n                    restitution: 0.6821,\r\n                    relaxation: 10\r\n                });\r\n\r\n                //ball to ball contact material\r\n                let ballToBallContactMaterial = new p2.ContactMaterial(P2WorldManager.Instance().getMaterialByID(MaterialType.BALL_MATERIAL), P2WorldManager.Instance().getMaterialByID(MaterialType.BALL_MATERIAL), {\r\n                    friction: 0.2,\r\n                    restitution: 0.9\r\n                });\r\n                P2WorldManager.Instance().world.addContactMaterial(ballToBallContactMaterial);\r\n                //end ball to ball contact material\r\n\r\n                // ball to ball contact material\r\n                let ballToPuckContactMaterial = new p2.ContactMaterial(P2WorldManager.Instance().getMaterialByID(MaterialType.BALL_MATERIAL), P2WorldManager.Instance().getMaterialByID(MaterialType.PUCK_MATERIAL), {\r\n                    friction: 0.2,\r\n                    restitution: 0.9\r\n                });\r\n                P2WorldManager.Instance().world.addContactMaterial(ballToPuckContactMaterial);\r\n                //end ball to ball contact material\r\n\r\n\r\n                P2WorldManager.Instance().world.addContactMaterial(ballToNormalLineContactMaterial);\r\n                // // end ball to normal line contact material\r\n\r\n                //ball to puck only line contact material\r\n                let ballToPuckOnlyLineContactMaterial: p2.ContactMaterial = new p2.ContactMaterial(P2WorldManager.Instance().getMaterialByID(MaterialType.BALL_MATERIAL), P2WorldManager.Instance().getMaterialByID(MaterialType.PUCK_ONLY_MATERIAL), {\r\n                    // stiffness: 500000,\r\n                    friction: 0.4,\r\n                    restitution: 0.6\r\n                });\r\n                P2WorldManager.Instance().world.addContactMaterial(ballToPuckOnlyLineContactMaterial);\r\n                //end ball to puck only line contact material\r\n\r\n\r\n                //ball to normal line contact material\r\n                let puckToNormalLineContactMaterial: p2.ContactMaterial = new p2.ContactMaterial(P2WorldManager.Instance().getMaterialByID(MaterialType.LINE_MATERIAL), P2WorldManager.Instance().getMaterialByID(MaterialType.PUCK_MATERIAL), {\r\n                    surfaceVelocity: 88,\r\n                    // friction: 20,\r\n                    // stiffness: 1e10000,\r\n                    // restitution: 0.4\r\n                    friction: 0.6,\r\n                    restitution: 0.6,\r\n                    relaxation: 10\r\n                });\r\n                P2WorldManager.Instance().world.addContactMaterial(puckToNormalLineContactMaterial);\r\n                //end ball to normal line contact material\r\n\r\n                // //puck to ball only line contact material\r\n                let puckToBallOnlyLineContactMaterial: p2.ContactMaterial = new p2.ContactMaterial(P2WorldManager.Instance().getMaterialByID(MaterialType.BALL_ONLY_MATERIAL), P2WorldManager.Instance().getMaterialByID(MaterialType.PUCK_MATERIAL), {\r\n                    stiffness: 888,\r\n                    friction: 20,\r\n                    // surfaceVelocity: 20,\r\n                    restitution: 0.4\r\n                });\r\n                P2WorldManager.Instance().world.addContactMaterial(puckToBallOnlyLineContactMaterial);\r\n                //end puck to ball only line contact material\r\n\r\n\r\n                P2WorldManager.Instance().world.on(\"preSolve\", (evt) => {\r\n\r\n                    _.forEach(evt.contactEquations, (ce: p2.ContactEquation) => {\r\n                        // console.log(\"mat id1: \" + ce.shapeA.material.id, \"mat id2: \" + ce.shapeB.material.id);\r\n                        if (\r\n                            (ce.shapeA.material.id == MaterialType.PUCK_MATERIAL && ce.shapeB.material.id == MaterialType.PUCK_ONLY_MATERIAL)\r\n                            || (ce.shapeA.material.id == MaterialType.BALL_MATERIAL && ce.shapeB.material.id == MaterialType.BALL_ONLY_MATERIAL)\r\n                            || (ce.shapeA.material.id == MaterialType.BALL_MATERIAL && ce.shapeB.material.id == MaterialType.SHADOW_MATERIAL)\r\n                            || (ce.shapeA.material.id == MaterialType.SHADOW_MATERIAL && ce.shapeB.material.id == MaterialType.BALL_MATERIAL)\r\n                            || (ce.shapeA.material.id == MaterialType.PUCK_MATERIAL && ce.shapeB.material.id == MaterialType.SHADOW_MATERIAL)\r\n                            || (ce.shapeA.material.id == MaterialType.SHADOW_MATERIAL && ce.shapeB.material.id == MaterialType.PUCK_MATERIAL)\r\n                        ) {\r\n                            ce.enabled = false;\r\n                        }\r\n                    });\r\n                }, this);\r\n            }\r\n\r\n            protected checkCollisions(): void {\r\n\r\n            }\r\n\r\n            private static createNewMaterial(ballMaterialType: MaterialType) {\r\n                P2WorldManager.Instance().materials[ballMaterialType] = new p2.Material(ballMaterialType);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","///<reference path=\"../../PockeyEntryPoint/pockey-entry-point.ts\"/>\r\n///<reference path=\"../../GameFiles/Modules/GameModule/balls/abstract-ball.ts\"/>\r\n///<reference path=\"../../GameFiles/Modules/GameModule/p2-world-manager.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/1/2018\r\n */\r\n\r\n\r\nnamespace Framework {\r\n    export module Utils {\r\n        import Vector2 = Framework.Utils.Vector2;\r\n        import MaterialType = Pockey.GameModule.MaterialType;\r\n        import P2WorldManager = Pockey.GameModule.P2WorldManager;\r\n        import Graphics = PIXI.Graphics;\r\n\r\n        export enum LineType {\r\n            BallsOnly = \"BallOnly\",\r\n            PuckOnly = \"PuckOnly\",\r\n            Normal = \"Normal\"\r\n        }\r\n\r\n        export class Line {\r\n\r\n            public firstPoint: Vector2;\r\n            public secondPoint: Vector2;\r\n            private angle: number;\r\n            public cosAlpha;\r\n            public sinAlpha;\r\n            public lineType: LineType;\r\n            public p2Body: p2.Body;\r\n\r\n            constructor(firstPoint: Vector2, secondPoint: Vector2, materialType: MaterialType) {\r\n                this.firstPoint = firstPoint;\r\n                this.secondPoint = secondPoint;\r\n                this.angle = this.getAngle();\r\n                this.cosAlpha = Math.cos(this.angle);\r\n                this.sinAlpha = Math.sin(this.angle);\r\n                // this.lineType = type;\r\n\r\n                this.p2Body = new p2.Body({\r\n                    mass: 0,\r\n                    // position: [496, 560],\r\n                    // fixedRotation: true,\r\n                    position: [(firstPoint.x + secondPoint.x) / 2, (firstPoint.y + secondPoint.y) / 2],\r\n                    angle: this.getAngle()\r\n                });\r\n\r\n                // this.p2Body.collisionResponse = true;\r\n                // this.p2Body.damping = 20;\r\n                // this.p2Body.angularDamping = 20;\r\n                // this.p2Body.angularVelocity = 20;\r\n\r\n                // let c:Graphics =\r\n                // this.p2Body.angle\r\n\r\n                // this.p2Body.damping = 0.3;\r\n\r\n\r\n                // var lineShape = new p2.Line({length: 500});\r\n                var lineShape = new p2.Line({length: firstPoint.distanceTo(secondPoint), collisionGroup: 5});\r\n                lineShape.material = new p2.Material(materialType);\r\n                // circleShape.material.\r\n\r\n                // let m = new p2.ContactMaterial(new AbstractBall(null).circleShape.material, lineShape.material, {\r\n                // friction: 0,\r\n                // relaxation: 10,\r\n                // frictionRelaxation: 0.5\r\n                // restitution: 0,\r\n                // frictionRelaxation: 0,\r\n                // relaxation: 0,\r\n                // friction: 0,\r\n                // frictionStiffness: 0,\r\n                // stiffness: 10000,\r\n                // surfaceVelocity: 100,\r\n                // restitution: 0.9,\r\n                //\r\n                // });\r\n                // P2WorldManager.Instance().world.addContactMaterial(m);\r\n\r\n                this.p2Body.addShape(lineShape);\r\n\r\n                P2WorldManager.Instance().world.addBody(this.p2Body);\r\n            }\r\n\r\n            private getAngle(): number {\r\n                let x1: number = this.firstPoint.x;//, y1, x2, y2\r\n                let y1: number = this.firstPoint.y;\r\n\r\n                let x2: number = this.secondPoint.x;//, y1, x2, y2\r\n                let y2: number = this.secondPoint.y;\r\n\r\n                let dy = y2 - y1;\r\n                let dx = x2 - x1;\r\n                let theta: number = Math.atan2(dy, dx); // range (-PI, PI]\r\n                // theta *= 180 / Math.PI; // rads to degs, range (-180, 180]\r\n                //if (theta < 0) theta = 360 + theta; // range [0, 360)\r\n                return theta;\r\n            }\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../Signals/signals-manager.ts\"/>\r\n///<reference path=\"../Signals/signal-types.ts\"/>\r\n// Created by: Sandru Andrei for Edgeflow on 7/11/2018\r\n\r\nnamespace Framework {\r\n    export module Loaders {\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import SignalsType = Framework.Signals.SignalsType;\r\n\r\n        export class AssetsLoader {\r\n\r\n            // private static _instance: AssetsLoader = new AssetsLoader();\r\n            private loader = PIXI.loader;\r\n            private assetsNames: string[];\r\n            protected fontsToLoad: string[];\r\n\r\n            constructor(onLoadCompleteCallback: Function) {\r\n                this.assetsNames = [];\r\n\r\n                this.loader.onComplete.add(() => {\r\n                    SignalsManager.DispatchSignal(SignalsType.ASSETS_LOADED);\r\n                });\r\n                this.loader.onProgress.add(() => {\r\n                    // console.log(\"progresu: \" + this.loader.progress);\r\n                })\r\n            }\r\n\r\n            public addAssetToLoad(assetName: string): void {\r\n                if (!_.includes(this.assetsNames, assetName))\r\n                {\r\n                    this.assetsNames.push(assetName);\r\n                    this.loader.add(assetName);\r\n\r\n                }\r\n            }\r\n\r\n            public StartLoading(): void {\r\n                this.loadFonts();\r\n                this.loader.load();\r\n            }\r\n\r\n            public addFontToLoad(fontName:string) {\r\n                if (!this.fontsToLoad)\r\n                    this.fontsToLoad = [];\r\n\r\n                this.fontsToLoad.push(fontName);\r\n            }\r\n\r\n            private loadFonts(): void {\r\n\r\n                WebFont.load(\r\n                    {\r\n                        active: () => {\r\n                            // let browser take a breath. Some fonts may require more room for taking deep breath\r\n                            TweenMax.delayedCall(0.4, this.onFontLoadComplete.bind(this))\r\n                        },\r\n                        // when font is loaded do some magic, so font can be correctly rendered immediately after PIXI is initialized\r\n                        // this event is triggered when the fonts have been rendered, see https://github.com/typekit/webfontloader\r\n                        fontloading: this.preRenderFont.bind(this),\r\n\r\n                        // multiple fonts can be passed here\r\n                        custom: {\r\n                            families: this.fontsToLoad,\r\n                            urls: ['/fonts.css']\r\n                        }\r\n                        // google: {\r\n                        //     families: this.fontsToLoad\r\n                        // }\r\n                    })\r\n\r\n            }\r\n\r\n            protected onFontLoadComplete():void\r\n            {\r\n                console.log(\"Font Loading Complete\");\r\n            }\r\n\r\n            private preRenderFont():void\r\n            {\r\n               /* let el = document.createElement('p');\r\n                el.style.fontFamily = this._titleFont;\r\n                el.style.fontSize = \"0px\";\r\n                el.style.visibility = \"hidden\";\r\n                el.innerHTML = '.';\r\n\r\n                document.body.appendChild(el);*/\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"../../../../lib/types/pixi/pixi.d.ts\"/>\r\nnamespace Framework {\r\n    export module Background {\r\n        import Sprite = PIXI.Sprite;\r\n        import AbstractModule = Framework.Abstracts.AbstractModule;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import SignalsType = Framework.Signals.SignalsType;\r\n\r\n        export class AbstractBackgroundModule extends AbstractModule {\r\n\r\n            protected backgrounds: { [name: string]: Sprite; };\r\n            protected backgroundsPaths: { [name: string]: string; };\r\n            protected currentBackground: Sprite;\r\n\r\n            // protected mainBg: Sprite;\r\n            // public bgTextureName: string = '';\r\n            constructor() {\r\n                super();\r\n\r\n                this.addAssetToLoad(Settings.desktopAssetsPath + Settings.backgroundsPath + \"main_bg.png\");\r\n                this.registerBackground(Settings.mainBackgroundName, Settings.desktopAssetsPath + Settings.backgroundsPath + \"main_bg.png\");\r\n            }\r\n\r\n\r\n            protected registerSignalsHandlers(): void {\r\n                /* SignalsManager.AddSignalCallback(SignalsType.REGISTER_CUSTOM_BACKGROUND, this.onRegisterCustomBackground.bind(this));\r\n                 SignalsManager.AddSignalCallback(SignalsType.REGISTER_MAIN_BACKGROUND, this.onRegisterMainBackground.bind(this));*/\r\n\r\n                super.registerSignalsHandlers();\r\n                SignalsManager.AddSignalCallback(SignalsType.CHANGE_BACKGROUND, this.onChangeBackground.bind(this));\r\n            }\r\n\r\n            private onChangeBackground(param: any[]): void {\r\n                this.changeBackground(param[0].toString(), +param[1]);\r\n            }\r\n\r\n            public registerBackground(name: string, texturePath: string): void {\r\n                if (!this.backgroundsPaths)\r\n                    this.backgroundsPaths = {};\r\n\r\n                this.backgroundsPaths[name] = texturePath;\r\n            }\r\n\r\n            /*protected onRegisterMainBackground(params: any[]): void {\r\n                let mainBg = new Sprite(PIXI.Texture.fromFrame(this.bgTextureName));\r\n                mainBg.x = mainBg.width / 2;\r\n                mainBg.y = mainBg.height / 2;\r\n\r\n                this.addChild(mainBg);\r\n            }\r\n\r\n            protected onRegisterCustomBackground(params: any[]): void {\r\n\r\n            }*/\r\n\r\n\r\n            public createElements(): void {\r\n                super.createElements();\r\n\r\n                this.backgrounds = {};\r\n\r\n                _.forEach(this.backgroundsPaths, (path: string, id: string) => {\r\n                    this.backgrounds[id] = new Sprite(PIXI.Texture.fromFrame(path));\r\n                    this.backgrounds[id].anchor.x = 0.5;\r\n                    this.backgrounds[id].anchor.y = 0.5;\r\n                });\r\n\r\n                // this.changeBackground(Settings.mainBackgroundName, 0.5);\r\n            }\r\n\r\n            private changeBackground(id: string, fadeTime: number) {\r\n                if (this.backgrounds[id]) {\r\n                    let newBackground: Sprite = this.backgrounds[id];\r\n                    newBackground.alpha = 0;\r\n                    this.addChild(newBackground);\r\n\r\n                    if(!_.isUndefined(this.currentBackground) && !_.isNull(this.currentBackground))\r\n                    {\r\n                        let oldBackground:Sprite = this.currentBackground;\r\n                        TweenMax.to(newBackground, fadeTime, {alpha: 1, onComplete:this.removeBackgroundFromParent.bind(this), onCompleteParams:[oldBackground]});\r\n                    }\r\n                    else\r\n                    {\r\n                        TweenMax.to(newBackground, fadeTime, {alpha: 1});\r\n                    }\r\n\r\n                    this.currentBackground = newBackground;\r\n\r\n                }\r\n                else {\r\n                    console.warn(\"background id not registered: \" + id);\r\n                }\r\n            }\r\n\r\n            private removeBackgroundFromParent(background: Sprite): void {\r\n                if (background && background.parent)\r\n                    background.parent.removeChild(background);\r\n            }\r\n\r\n\r\n            protected onResize(params: any[]): void {\r\n\r\n                super.onResize(params);\r\n\r\n                if (this.currentBackground && this.currentBackground == this.backgrounds[Settings.mainBackgroundName]) {\r\n                    this.currentBackground.height = Settings.stageHeight;\r\n                    let scale: number = this.currentBackground.scale.y;\r\n                    this.currentBackground.scale.x = scale;\r\n                    if (this.currentBackground.width < Settings.stageWidth) {\r\n                        this.currentBackground.width = Settings.stageWidth;\r\n                        scale = this.currentBackground.scale.x;\r\n                        this.currentBackground.scale.y = scale;\r\n                    }\r\n\r\n                    this.currentBackground.x = Settings.stageWidth / 2;\r\n                    this.currentBackground.y = Settings.stageHeight / 2;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n}","///<reference path=\"../../Abstracts/abstract-module.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/8/2018\r\n */\r\nnamespace Framework {\r\n    export module UserInterface {\r\n        import AbstractModule = Framework.Abstracts.AbstractModule;\r\n\r\n        export class AbstractUserInterfaceModule extends AbstractModule {\r\n\r\n            //\r\n            // constructor() {\r\n            //\r\n            //     super();\r\n            //\r\n            // }\r\n\r\n\r\n            // createElements(): void {\r\n            //     super.createElements();\r\n            // }\r\n        }\r\n\r\n\r\n    }\r\n}","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/17/2018\r\n */\r\n\r\n\r\nnamespace Framework {\r\n    export module Utils {\r\n\r\n        import Point = PIXI.Point;\r\n        import Vector2 = Framework.Utils.Vector2;\r\n\r\n        export class TouchHandler {\r\n            private static instance: TouchHandler;\r\n            private initialized: boolean = false;\r\n\r\n            public isTouchMoving: boolean = false;\r\n            // public left: ButtonState;\r\n            // public middle: ButtonState;\r\n            // public right: ButtonState;\r\n\r\n            public position: Point;\r\n\r\n            static Instance(): TouchHandler {\r\n                if (!TouchHandler.instance) {\r\n                    TouchHandler.instance = new TouchHandler();\r\n\r\n                    if (!TouchHandler.Instance().initialized) {\r\n                        TouchHandler.Instance().initialized = true;\r\n\r\n                        TouchHandler.Instance().position = new Point();\r\n                        // TouchHandler.Instance().left = new ButtonState();\r\n                        // TouchHandler.Instance().middle = new ButtonState();\r\n                        // TouchHandler.Instance().right = new ButtonState();\r\n\r\n                        document.ontouchmove = TouchHandler.Instance().handleTouchMove.bind(this);\r\n                        document.ontouchend = TouchHandler.Instance().handleTouchEnd.bind(this);\r\n                        // document.onmousedown = TouchHandler.Instance().handleMouseDown.bind(this);\r\n                        // document.onmouseup = TouchHandler.Instance().handleMouseUp.bind(this);\r\n\r\n                        // TouchHandler.Instance().reset();\r\n\r\n                    }\r\n                }\r\n                return TouchHandler.instance;\r\n            }\r\n\r\n            private handleTouchMove(e: TouchEvent): void {\r\n                // let x: number = e.pageX;\r\n                // let y: number = e.pageY;\r\n\r\n                let x: number = e.touches[0].clientX;\r\n                let y: number = e.touches[0].clientY;\r\n                // clientY = e.touches[0].clientY;\r\n\r\n                TouchHandler.Instance().position = new Point(x, y);\r\n                TouchHandler.Instance().isTouchMoving = true;\r\n                // console.log(\"x -> \" + x, \"y -> \" + y);\r\n                // console.log(\"isTouchMoving: \" + this.isTouchMoving);\r\n            }\r\n\r\n            private handleTouchEnd(e: TouchEvent): void {\r\n                // let x: number = e.pageX;\r\n                // let y: number = e.pageY;\r\n                //\r\n                // let x: number = e.touches[0].clientX;\r\n                // let y: number = e.touches[0].clientY;\r\n                // // clientY = e.touches[0].clientY;\r\n                //\r\n                // TouchHandler.Instance().position = new Point(x, y);\r\n                TouchHandler.Instance().isTouchMoving = false;\r\n                // console.log(\"isTouchMoving: \" + this.isTouchMoving);\r\n\r\n                // console.log(\"x -> \" + x, \"y -> \" + y);\r\n            }\r\n\r\n            /*private handleMouseDown(e: MouseEvent): void {\r\n                // this.handleMouseMove(e);\r\n\r\n                if (e.button == 0) {\r\n\r\n                    if (!TouchHandler.Instance().left.down) {\r\n                        TouchHandler.Instance().left.pressed = true;\r\n                    }\r\n                    TouchHandler.Instance().left.down = true;\r\n\r\n                } else if (e.button == 1) {\r\n\r\n                    if (!TouchHandler.Instance().middle.down) {\r\n                        TouchHandler.Instance().middle.pressed = true;\r\n                    }\r\n                    TouchHandler.Instance().middle.down = true;\r\n\r\n                } else if (e.button == 2) {\r\n\r\n                    if (!TouchHandler.Instance().right.down) {\r\n                        TouchHandler.Instance().right.pressed = true;\r\n                    }\r\n                    TouchHandler.Instance().right.down = true;\r\n                }\r\n            }\r\n\r\n            private handleMouseUp(e): void {\r\n                // this.handleMouseMove(e);\r\n                if (e.button == 0) {\r\n                    TouchHandler.Instance().left.down = false;\r\n                } else if (e.button == 1) {\r\n                    TouchHandler.Instance().middle.down = false;\r\n                } else if (e.button == 2) {\r\n                    TouchHandler.Instance().right.down = false;\r\n                }\r\n            }\r\n\r\n            private reset(): void {\r\n                // this.position.x = e.pageX;\r\n                this.left.pressed = false;\r\n                this.middle.pressed = false;\r\n                this.right.pressed = false;\r\n\r\n                requestAnimationFrame(this.reset.bind(this));\r\n            }*/\r\n\r\n            /*public GetAngle(vector: Vector2): number {\r\n                // let angle:number = 0;\r\n                var angle = Math.atan2(this.position.x - vector.x, -(this.position.y - vector.y)) * (180 / Math.PI);\r\n\r\n                return angle;\r\n            }*/\r\n        }\r\n\r\n    }\r\n}","namespace Framework {\r\n    export module Connection {\r\n        export class FrameworkSocketNamespaces {\r\n            public static SEARCH: string = \"/searching\";\r\n            public static PLAY: string = \"/play\";\r\n        }\r\n\r\n        export class FrameworkSocketEvents {\r\n\r\n            public static newConnection: string = \"FrameworkSocketEvents\" + \"newConnection\";\r\n            public static letsConnect: string = \"FrameworkSocketEvents\" + \"letsConnect\";\r\n            public static joinRoom: string = \"FrameworkSocketEvents\" + \"joinRoom\";\r\n            public static joinedRoom: string = \"FrameworkSocketEvents\" + \"joinedRoom\";\r\n            public static privateMessage: string = \"FrameworkSocketEvents\" + \"privateMessage\";\r\n            // public static partnerFoundChannel: string = \"partnerFoundChannel\";\r\n        }\r\n\r\n        export class FrameworkSocketMessages {\r\n            public static WHO_WANTS_TO_PLAY: string = \"FrameworkSocketMessages.\" + \"WHO_WANTS_TO_PLAY\";\r\n            public static I_WANT_TO_PLAY: string = \"FrameworkSocketMessages.\" + \"I_WANTS_TO_PLAY\";\r\n            public static HELLO: string = \"FrameworkSocketMessages.\" + \"HELLO\";\r\n\r\n        }\r\n    }\r\n}","///<reference path=\"../../Signals/signals-manager.ts\"/>\r\n///<reference path=\"../../Signals/signal-types.ts\"/>\r\n///<reference path=\"connection-channels-and-messages.ts\"/>\r\n///<reference path=\"../../../../lib/types/socket.io/socket.io-client.d.ts\"/>\r\n\r\nnamespace Framework {\r\n    export module Connection {\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import ConnectionSignalsType = Framework.Signals.ConnectionSignalsType;\r\n\r\n        export class SocketClient {\r\n            protected searchingSocket: any;\r\n            protected playingSocket: any;\r\n            protected lookingForPartner: boolean = false;\r\n            protected myID: string = \"\";\r\n            protected partnerID: string;\r\n            protected connectionID: string;\r\n            public socketConnectionCreated: boolean = false;\r\n\r\n            public initializeClientSockets(): void {\r\n                this.initializeSearchingSocket();\r\n            }\r\n\r\n            protected initializeSearchingSocket(): void {\r\n                this.searchingSocket = io(FrameworkSocketNamespaces.SEARCH);\r\n                this.searchingSocket.on('connect', () => {\r\n                    this.myID = this.searchingSocket.id.replace(FrameworkSocketNamespaces.SEARCH, '');\r\n                    SignalsManager.DispatchSignal(ConnectionSignalsType.UPDATE_SOCKET_ID, [this.myID]);\r\n\r\n                    console.log(\"sunt conectat pe search: \" + this.myID);\r\n\r\n                    this.searchingSocket.emit(FrameworkSocketEvents.letsConnect, FrameworkSocketMessages.WHO_WANTS_TO_PLAY, this.myID, \"\");\r\n                    this.lookingForPartner = true;\r\n                });\r\n\r\n                this.searchingSocket.on(FrameworkSocketEvents.letsConnect, (msg, id, partnerID) => {\r\n                    console.log(\"cineva vrea sa ma conectez, socket: \" + id + \". verific...\");\r\n                    if (this.lookingForPartner && msg == FrameworkSocketMessages.WHO_WANTS_TO_PLAY) {\r\n                        if (id != this.myID && (partnerID == \"\")) {\r\n                            console.log(\"ma conectez cu: \" + id);\r\n                            this.searchingSocket.emit(FrameworkSocketEvents.letsConnect, FrameworkSocketMessages.I_WANT_TO_PLAY, id, this.myID);\r\n                            this.partnerID = id;\r\n                            this.connectionID = id + this.myID;\r\n\r\n                            this.initializePlayingSocket();\r\n\r\n                            this.lookingForPartner = false;\r\n                        }\r\n                    }\r\n                    else if (this.lookingForPartner && msg == FrameworkSocketMessages.I_WANT_TO_PLAY) {\r\n                        if (id == this.myID && (partnerID != \"\" && partnerID != null && partnerID != undefined)) {\r\n                            console.log(\"ma conectez cu: \" + partnerID);\r\n\r\n                            this.partnerID = partnerID;\r\n                            this.connectionID = this.myID + partnerID;\r\n\r\n                            this.initializePlayingSocket();\r\n\r\n                            this.lookingForPartner = false;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            protected initializePlayingSocket(): void {\r\n                this.playingSocket = io(FrameworkSocketNamespaces.PLAY);\r\n                this.playingSocket.on('connect', () => {\r\n                    this.searchingSocket.disconnect();\r\n                    this.searchingSocket = null;\r\n\r\n                    this.playingSocket.emit(FrameworkSocketEvents.joinRoom, this.connectionID, this.myID);\r\n\r\n                    this.playingSocket.on(FrameworkSocketEvents.joinedRoom, (room) => {\r\n                        console.log(\"sunt conectat pe playing room: \" + room + \" as \" + this.myID);\r\n\r\n                        this.playingSocket.emit(FrameworkSocketEvents.privateMessage, this.connectionID, FrameworkSocketMessages.HELLO, this.myID, this.partnerID);\r\n                        // SignalsManager.DispatchSignal(ConnectionSignalsType.SOCKET_IO_CONNECTION_CREATED, [this.myID, this.partnerID, this.connectionID]);\r\n                    });\r\n\r\n                    this.playingSocket.on(FrameworkSocketEvents.privateMessage, (messageType, messageData) => {\r\n                        this.handlePrivateMessage(messageType, messageData);\r\n\r\n                    });\r\n                });\r\n            }\r\n\r\n            protected handlePrivateMessage(messageType, messageData): void {\r\n                switch (messageType) {\r\n                    case FrameworkSocketMessages.HELLO: {\r\n                        if (!this.socketConnectionCreated) {\r\n                            this.socketConnectionCreated = true;\r\n\r\n                            SignalsManager.DispatchSignal(ConnectionSignalsType.SOCKET_IO_CONNECTION_CREATED, [this.myID, this.partnerID, this.connectionID]);\r\n                            this.playingSocket.emit(FrameworkSocketEvents.privateMessage, this.connectionID, FrameworkSocketMessages.HELLO);\r\n\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            public sendPrivateMessage(params: any[]): void {\r\n                if (this.playingSocket && this.connectionID && this.myID) {\r\n                    let messageType = params[0];\r\n                    let messageData = params[1];\r\n\r\n                    this.playingSocket.emit(FrameworkSocketEvents.privateMessage, this.connectionID, messageType, messageData);\r\n\r\n                    // console.log(\"private message sent: \" + messageType, messageData);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"../../Abstracts/abstract-module.ts\"/>\r\n///<reference path=\"socket-client.ts\"/>\r\n///<reference path=\"../../Signals/signal-types.ts\"/>\r\n///<reference path=\"../../Signals/signals-manager.ts\"/>\r\n\r\nnamespace Framework {\r\n    export module Connection {\r\n\r\n        import AbstractModule = Framework.Abstracts.AbstractModule;\r\n        import SocketClient = Framework.Connection.SocketClient;\r\n        import ConnectionSignalsType = Framework.Signals.ConnectionSignalsType;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n\r\n        export class AbstractConnectionModule extends AbstractModule {\r\n\r\n            protected socketClient: SocketClient;\r\n\r\n            constructor() {\r\n\r\n                super();\r\n\r\n                this.Name = \"AbstractConnectionModule\";\r\n            }\r\n\r\n            protected registerSignalsHandlers(): void {\r\n                super.registerSignalsHandlers();\r\n                if (!Settings.singlePlayer) {\r\n                    SignalsManager.AddSignalCallback(ConnectionSignalsType.CREATE_SOCKET_IO_CONNECTION, this.onCreateSocketIoConnection.bind(this));\r\n                    SignalsManager.AddSignalCallback(ConnectionSignalsType.SOCKET_IO_DISCONNECTED, this.onSocketIoDisconnected.bind(this));\r\n                    SignalsManager.AddSignalCallback(ConnectionSignalsType.PRIVATE_MESSAGE, this.onPrivateMessage.bind(this));\r\n                    SignalsManager.AddSignalCallback(ConnectionSignalsType.UPDATE_SOCKET_ID, this.onUpdateSocketID.bind(this));\r\n                }\r\n\r\n            }\r\n\r\n            protected onUpdateSocketID(params: any[]): void {\r\n                Settings.socketID = params[0];\r\n            }\r\n\r\n            protected onSocketIoDisconnected(): void {\r\n\r\n            }\r\n\r\n            protected onPrivateMessage(params: any[]): void {\r\n                this.socketClient.sendPrivateMessage(params);\r\n            }\r\n\r\n            protected onCreateSocketIoConnection(): void {\r\n                if (_.isNull(this.socketClient) || _.isUndefined(this.socketClient)) {\r\n                    this.socketClient = this.getSocketIoClient();\r\n                }\r\n\r\n                this.socketClient.initializeClientSockets();\r\n            }\r\n\r\n            protected getSocketIoClient(): SocketClient {\r\n                return new SocketClient();\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n    }\r\n}","/**\r\n *  Edgeflow\r\n *  Copyright 2017 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/12/2018\r\n */\r\n\r\nnamespace Framework {\r\n    export class Layers {\r\n\r\n        public static DefaultLayer: string = \"DefaultLayer\";\r\n        public static BackgroundLayer: string = \"BackgroundLayer\";\r\n        public static GameLayer: string = \"GameLayer\";\r\n        public static UILayer: string = \"UILayer\";\r\n\r\n        public static LayerOrder: string[] = [Layers.BackgroundLayer, Layers.GameLayer, Layers.UILayer];\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 11/9/2018\r\n */\r\n\r\n\r\nnamespace Framework {\r\n    export module Connection {\r\n        export class DatabaseConnector {\r\n\r\n            private static checkUserRequest:XMLHttpRequest;\r\n\r\n            constructor() {\r\n\r\n\r\n               /* let postString: string =\r\n                    \"email=\" + this.userEmail +\r\n                    \"&image=\" + this.currentImage +\r\n                    \"&rating=\" + (e.currentTarget as HTMLButtonElement).value;\r\n\r\n                this.checkUserRequest = new XMLHttpRequest();\r\n                this.checkUserRequest.addEventListener(\"load\", this.onPostLoad.bind(this));\r\n                this.checkUserRequest.open(\"POST\", \"includes/postData.php\", true);\r\n\r\n                this.checkUserRequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n                this.checkUserRequest.send(postString);*/\r\n\r\n            }\r\n\r\n            public static SaveToDatabase(dataToSend:any):void\r\n            {\r\n                this.checkUserRequest = new XMLHttpRequest();\r\n                this.checkUserRequest.addEventListener(\"load\", this.onPostLoad.bind(this));\r\n                this.checkUserRequest.open(\"POST\", \"includes/postData.php\", true);\r\n\r\n                this.checkUserRequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n                this.checkUserRequest.send(dataToSend);\r\n            }\r\n\r\n            private static onPostLoad():void\r\n            {\r\n                // console.log('onPostLoad: ' + this.checkUserRequest.responseText);\r\n            }\r\n\r\n\r\n            public static checkDatabaseUser(userID:string, listener:EventListener): void {\r\n                this.checkUserRequest = new XMLHttpRequest(); //New request object\r\n                this.checkUserRequest.addEventListener(\"load\", listener);\r\n                this.checkUserRequest.open(\"POST\", \"includes/getData.php\", true);\r\n                this.checkUserRequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n                this.checkUserRequest.send('idToCheck=' + userID);\r\n            }\r\n\r\n            private static checkUserIDRequestListener(e: Event): void {\r\n                if (this.checkUserRequest.responseText != 'false' && this.checkUserRequest.responseText != '') {\r\n                    // this.seen = _.split(this.checkUserRequest.responseText, ',').map(Number);\r\n                }\r\n\r\n                this.checkUserRequest.removeEventListener(\"load\", this.checkUserIDRequestListener.bind(this));\r\n            }\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"Loaders/assets-loader.ts\"/>\r\n///<reference path=\"Abstracts/abstract-module.ts\"/>\r\n///<reference path=\"AbstractModules/Background/abstract-background-module.ts\"/>\r\n///<reference path=\"Signals/signals-manager.ts\"/>\r\n///<reference path=\"AbstractModules/UserInterface/abstract-user-interface-module.ts\"/>\r\n///<reference path=\"Utils/touch-handler.ts\"/>\r\n///<reference path=\"AbstractModules/Connection/abstract-connection-module.ts\"/>\r\n///<reference path=\"Abstracts/layers.ts\"/>\r\n///<reference path=\"../../lib/types/webfontloader/webfontloader.d.ts\"/>\r\n///<reference path=\"AbstractModules/Connection/database-connector.ts\"/>\r\n\r\n// Created by: Sandru Andrei for Edgeflow on 7/11/2018\r\n\r\nnamespace Framework {\r\n    import AbstractModule = Framework.Abstracts.AbstractModule;\r\n    import AssetsLoader = Framework.Loaders.AssetsLoader;\r\n    import Container = PIXI.Container;\r\n    import WebGLRenderer = PIXI.WebGLRenderer;\r\n    import CanvasRenderer = PIXI.CanvasRenderer;\r\n    import SignalsManager = Framework.Signals.SignalsManager;\r\n    import SignalsType = Framework.Signals.SignalsType;\r\n    import TouchHandler = Framework.Utils.TouchHandler;\r\n    import AbstractConnectionModule = Framework.Connection.AbstractConnectionModule;\r\n    import AbstractBackgroundModule = Framework.Background.AbstractBackgroundModule;\r\n    import AbstractUserInterfaceModule = Framework.UserInterface.AbstractUserInterfaceModule;\r\n    import ConnectionSignalsType = Framework.Signals.ConnectionSignalsType;\r\n    import Settings = Framework.Settings;\r\n    import DatabaseConnector = Framework.Connection.DatabaseConnector;\r\n\r\n\r\n    export class AbstractEntryPoint {\r\n        //array holding all the modules that the framework will use\r\n        protected gameModules: AbstractModule[];\r\n        //the pixi loader that will load all the assets mapped to each module\r\n        protected assetsLoader: AssetsLoader;\r\n        protected name: string = \"\";\r\n\r\n        protected stage: Container;\r\n        protected backgroundModule: AbstractModule;\r\n        protected uiModule: AbstractModule;\r\n        protected connectionModule: AbstractModule;\r\n        public static renderer: WebGLRenderer | CanvasRenderer;\r\n\r\n\r\n        constructor() {\r\n            this.name = \"AbstractEntryPoint\";\r\n\r\n            this.getCookieData();\r\n            this.checkDevice();\r\n            this.setWindowSize();\r\n            this.initializePixi();\r\n            this.registerSignals();\r\n            this.subscribeToSignals();\r\n            this.createLayers();\r\n            this.addModules();\r\n            this.initializeSingletons();\r\n            this.startLoadingAssets();\r\n        }\r\n\r\n        protected getCookieData(): void {\r\n            // this.connectToDataBase();\r\n        }\r\n\r\n        // protected connectToDataBase(): void {\r\n        //     let dbConnector: DatabaseConnector = new DatabaseConnector();\r\n        // }\r\n\r\n        private setWindowSize(): void {\r\n            Settings.stageWidth = window.innerWidth;\r\n            Settings.stageHeight = window.innerHeight;\r\n        }\r\n\r\n        private checkDevice(): void {\r\n            if (this.isMobile()) {\r\n                Settings.isMobile = true;\r\n                console.log(\"%c AbstractEntryPoint -> running on MOBILE!\", \"background: green; color: white; font-weight:bold; \");\r\n                return;\r\n            }\r\n\r\n            console.log(\"%c AbstractEntryPoint -> running on DESKTOP!\", \"background: green; color: white; font-weight:bold; \");\r\n        }\r\n\r\n\r\n        //here Pixi is initiated. Make sure you define the stage width and height before calling this method\r\n        protected initializePixi(): void {\r\n\r\n            PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.LINEAR;\r\n\r\n            // SignalsManager.DispatchSignal(SignalsType.WINDOW_RESIZE, [this.stageWidth, this.stageHeight]);\r\n\r\n            // PIXI.Texture.SC.DEFAULT = PIXI.Texture.SCALE_MODE.NEAREST;\r\n\r\n            AbstractEntryPoint.renderer = PIXI.autoDetectRenderer(Settings.stageWidth, Settings.stageHeight, {\r\n                backgroundColor: 0x0f404b,\r\n                antialias: true,\r\n                // roundPixels: true,\r\n                // resolution: 2;\r\n\r\n                // transparent: true\r\n            });\r\n            AbstractEntryPoint.renderer.view.style.position = \"absolute\";\r\n            AbstractEntryPoint.renderer.view.style.top = \"0px\";\r\n            AbstractEntryPoint.renderer.view.style.left = \"0px\";\r\n            AbstractEntryPoint.renderer.view.style.zIndex = \"-800\";\r\n\r\n            // var c = document.getElementById(\"canvas\");\r\n            // //@ts-ignore\r\n            // var ctx = c.getContext(\"2d\");\r\n            //\r\n            // // ctx.fillStyle=\"red\";\r\n            // // ctx.fillRect(20,20,75,50);\r\n            // // ctx.globalCompositeOperation=\"source-over\";\r\n            // // ctx.fillStyle=\"blue\";\r\n            // // ctx.fillRect(50,50,75,50);\r\n            // //\r\n            // // ctx.fillStyle=\"red\";\r\n            // // ctx.fillRect(150,20,75,50);\r\n            // //@ts-ignore\r\n            // ctx.globalCompositeOperation = \"destination-over\";\r\n            // AbstractEntryPoint.renderer.view.style.ctx.globalCompositeOperation='destination-over';\r\n\r\n            document.body.appendChild(AbstractEntryPoint.renderer.view);\r\n\r\n            this.stage = new Container();\r\n            /*if(Settings.isMobile){\r\n                console.log(\"e mobil in plm\");\r\n                // this.stage.buttonMode = true;\r\n                // this.stage.interactive = true;\r\n                // this.stage.defaultCursor = \"url(cursor.png) 3 2, auto\";\r\n                this.stage.buttonMode = true;\r\n                this.stage.interactive = true;\r\n                this.stage.hitArea = new PIXI.Rectangle(0, 0, 800, 600);\r\n                this.stage.defaultCursor = \"url(cursor.png) 3 2, auto\";\r\n            }*/\r\n\r\n            this.frameAnimate();\r\n        }\r\n\r\n        //all the modules used in the game should be mapped from here, before calling startLoadingAssets() as super()\r\n        protected addModules() {\r\n            //map the modules here before calling startLoadingAssets() by using registerModule(module)\r\n            this.addConnectionModule();\r\n            this.addBackgroundModule();\r\n            this.addUIModule();\r\n\r\n\r\n        }\r\n\r\n        protected addBackgroundModule(): void {\r\n            this.backgroundModule = this.getBackgroundModule();\r\n            this.registerModule(this.backgroundModule);\r\n        }\r\n\r\n        protected addConnectionModule(): void {\r\n            this.connectionModule = this.getConnectionModule();\r\n            this.registerModule(this.connectionModule);\r\n        }\r\n\r\n        protected addUIModule(): void {\r\n            this.uiModule = this.getUIModule();\r\n            this.registerModule(this.uiModule);\r\n        }\r\n\r\n        //once every the textures have been mapped to its according module, all of them will be loaded.\r\n        // When everything is loaded the callback method onAssetsLoadComplete is called and will tell each module\r\n        // that it can start do his thing in  module.createElements();\r\n        protected startLoadingAssets() {\r\n\r\n            if (_.isNull(this.assetsLoader) || _.isUndefined(this.assetsLoader)) {\r\n                this.assetsLoader = new AssetsLoader(this.onAssetsLoadComplete.bind(this));\r\n            }\r\n\r\n            this.addFontsToLoad();\r\n\r\n            console.log(this.gameModules);\r\n            _.forEach(this.gameModules, (module: AbstractModule) => {\r\n                _.forEach(module.AssetsToLoad, (asset: string) => {\r\n\r\n                    this.assetsLoader.addAssetToLoad(asset);\r\n\r\n                });\r\n            });\r\n\r\n\r\n            this.assetsLoader.StartLoading();\r\n        }\r\n\r\n        protected addFontsToLoad(): void {\r\n            // this.assetsLoader.addFontToLoad();\r\n        }\r\n\r\n        protected onAssetsLoadComplete(): void {\r\n            //when each asset of each module is loaded that module will start creating the elements\r\n            _.forEach(this.gameModules, (module: AbstractModule) => {\r\n                module.createElements();\r\n                // this.stage.addChild(module.Layer);\r\n            });\r\n\r\n        }\r\n\r\n        protected registerModule(module: AbstractModule) {\r\n            if (_.isNull(this.gameModules) || _.isUndefined(this.gameModules)) {\r\n                this.gameModules = [];\r\n            }\r\n\r\n            this.gameModules.push(module);\r\n        }\r\n\r\n        protected frameAnimate() {\r\n            requestAnimationFrame(this.frameAnimate.bind(this));\r\n\r\n            // if (Settings.stageWidth != window.innerWidth || Settings.stageHeight != window.innerHeight) {\r\n            //     this.windowResize();\r\n            // }\r\n            // //Render the stage\r\n            AbstractEntryPoint.renderer.render(this.stage);\r\n        }\r\n\r\n        protected getBackgroundModule(): AbstractModule {\r\n            let backgroundModule: AbstractBackgroundModule = new AbstractBackgroundModule();\r\n\r\n            backgroundModule.Layer = this.getLayer(Layers.BackgroundLayer);\r\n\r\n            return backgroundModule;\r\n        }\r\n\r\n        protected getUIModule(): AbstractModule {\r\n\r\n            let uiModule: AbstractModule = new AbstractUserInterfaceModule();\r\n            uiModule.Layer = this.getLayer(Layers.UILayer);\r\n\r\n            return uiModule;\r\n        }\r\n\r\n        protected getConnectionModule(): AbstractModule {\r\n\r\n            console.log(\"intra la get connection module in: \" + this.name);\r\n            let connectionModule: AbstractModule = new AbstractConnectionModule();\r\n            return connectionModule;\r\n        }\r\n\r\n        public windowResize(stageWidth: number, stageHeight: number) {\r\n            if (Settings.stageWidth == stageWidth && Settings.stageHeight == stageHeight) {\r\n                return;\r\n            }\r\n\r\n            Settings.stageWidth = stageWidth;\r\n            Settings.stageHeight = stageHeight;\r\n            // if(window.innerWidth >= window.innerHeight)\r\n            // {\r\n            //     Settings.stageWidth = window.innerWidth;\r\n            //     Settings.stageHeight = window.innerHeight;\r\n            // }\r\n            // else\r\n            // {\r\n            //     Settings.stageWidth = window.innerHeight;\r\n            //     Settings.stageHeight = window.innerWidth;\r\n            // }\r\n            /*\r\n            Settings.stageWidth = window.innerWidth;\r\n            Settings.stageHeight = window.innerHeight;*/\r\n            console.log(\"la window resize: w - h : \" + Settings.stageWidth, Settings.stageHeight);\r\n            // this.stageWidth = window.innerWidth;\r\n            // this.stageHeight = window.innerHeight;\r\n\r\n            AbstractEntryPoint.renderer.resize(Settings.stageWidth, Settings.stageHeight);\r\n\r\n            SignalsManager.DispatchSignal(SignalsType.WINDOW_RESIZE);\r\n        }\r\n\r\n        private createLayers() {\r\n\r\n            // Layers.LayerOrder.reverse();\r\n            for (let i = 0; i < Layers.LayerOrder.length; i++) {\r\n                let layerName: string = Layers.LayerOrder[i];\r\n                let layer: Container = new Container();\r\n                layer.name = layerName;\r\n                this.stage.addChild(layer);\r\n            }\r\n            // _.forEach(Layers.LayerOrder, (layerName: string) => {\r\n            //     let layer: Container = new Container();\r\n            //     layer.name = layerName;\r\n            //     this.stage.addChild(layer);\r\n            // })\r\n        }\r\n\r\n        protected getLayer(layerName: string): Container {\r\n            return this.stage.getChildByName(layerName) as Container;\r\n        }\r\n\r\n        protected initializeSingletons() {\r\n            SignalsManager.Instance();\r\n            TouchHandler.Instance();\r\n        }\r\n\r\n        private subscribeToSignals() {\r\n            SignalsManager.GetSignal(SignalsType.ASSETS_LOADED).add(this.onAssetsLoadComplete.bind(this));\r\n            SignalsManager.GetSignal(SignalsType.MODULE_ELEMENTS_CREATED).add(this.onModuleElementsCreated.bind(this));\r\n        }\r\n\r\n        protected registerSignals() {\r\n            SignalsManager.CreateNewSignal(SignalsType.ASSETS_LOADED);\r\n            SignalsManager.CreateNewSignal(SignalsType.MODULE_ELEMENTS_CREATED);\r\n            SignalsManager.CreateNewSignal(SignalsType.ALL_MODULES_ELEMENTS_CREATED);\r\n            SignalsManager.CreateNewSignal(SignalsType.WINDOW_RESIZE);\r\n            SignalsManager.CreateNewSignal(SignalsType.CHANGE_BACKGROUND);\r\n            /*SignalsManager.CreateNewSignal(SignalsType.REGISTER_MAIN_BACKGROUND);\r\n            SignalsManager.CreateNewSignal(SignalsType.REGISTER_CUSTOM_BACKGROUND);*/\r\n            SignalsManager.CreateNewSignal(ConnectionSignalsType.CREATE_SOCKET_IO_CONNECTION);\r\n            SignalsManager.CreateNewSignal(ConnectionSignalsType.SOCKET_IO_CONNECTION_CREATED);\r\n            SignalsManager.CreateNewSignal(ConnectionSignalsType.SOCKET_IO_DISCONNECTED);\r\n            SignalsManager.CreateNewSignal(ConnectionSignalsType.PRIVATE_MESSAGE);\r\n            SignalsManager.CreateNewSignal(ConnectionSignalsType.UPDATE_SOCKET_ID);\r\n\r\n        }\r\n\r\n        private onModuleElementsCreated(): void {\r\n            let modulesCounter: number = 0;\r\n\r\n            _.forEach(this.gameModules, (module: AbstractModule) => {\r\n                if (module.ElementsCreated) {\r\n\r\n                    modulesCounter++;\r\n                }\r\n            });\r\n\r\n            if (modulesCounter == this.gameModules.length) {\r\n                SignalsManager.DispatchSignal(SignalsType.ALL_MODULES_ELEMENTS_CREATED);\r\n                SignalsManager.DispatchSignal(SignalsType.WINDOW_RESIZE);\r\n\r\n            }\r\n\r\n            // TweenMax.delayedCall(0.05, this.windowResize, [Settings.stageWidth, Settings.stageHeight]);\r\n\r\n        }\r\n\r\n        private isMobile(): boolean {\r\n            if (navigator.userAgent.match(/Mobi/)) {\r\n                return true;\r\n            }\r\n\r\n            if ('screen' in window && window.screen.width < 1366) {\r\n                return true;\r\n            }\r\n\r\n            // @ts-ignore\r\n            let connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\r\n\r\n            if (connection && connection.type === 'cellular') {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/26/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    import Vector2 = Framework.Utils.Vector2;\r\n    import Circle = PIXI.Circle;\r\n    import Graphics = PIXI.Graphics;\r\n    import DisplayObject = PIXI.DisplayObject;\r\n\r\n    export class Pocket extends Circle {\r\n        public finalPoint: Vector2;\r\n        public position: Vector2;\r\n        public touchPoints: Vector2[];\r\n        public graphics: Graphics[];\r\n\r\n        constructor(x: number, y: number, radius: number, finalPoint: Vector2) {\r\n            super(x, y, radius);\r\n            this.position = new Vector2(x, y);\r\n            this.finalPoint = finalPoint;\r\n            this.graphics = [];\r\n            this.touchPoints = [];\r\n\r\n            let point: Vector2 = new Vector2();\r\n            let g: Graphics = new Graphics();\r\n            let angle: number;\r\n\r\n            //1\r\n            angle = 90 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n            /*g = new Graphics();\r\n            g.beginFill(0xff9900);\r\n            g.drawCircle(point.x, point.y, 3);\r\n            g.endFill();\r\n            this.graphics.push(g);*/\r\n\r\n            //2\r\n            angle = 45 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n\r\n            /* g = new Graphics();\r\n             g.beginFill(0xff9900);\r\n             g.drawCircle(point.x, point.y, 3);\r\n             g.endFill();\r\n             this.graphics.push(g);*/\r\n\r\n            //3\r\n            angle = 0 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n\r\n            /*g = new Graphics();\r\n            g.beginFill(0xff9900);\r\n            g.drawCircle(point.x, point.y, 3);\r\n            g.endFill();\r\n            this.graphics.push(g);*/\r\n\r\n            //4\r\n            angle = -45 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n            /* g = new Graphics();\r\n             g.beginFill(0xff9900);\r\n             g.drawCircle(point.x, point.y, 3);\r\n             g.endFill();\r\n             this.graphics.push(g);*/\r\n\r\n            //5\r\n            angle = -90 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n            /*g = new Graphics();\r\n            g.beginFill(0xff9900);\r\n            g.drawCircle(point.x, point.y, 3);\r\n            g.endFill();\r\n            this.graphics.push(g);*/\r\n\r\n            //6\r\n            angle = -135 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n\r\n            /* g = new Graphics();\r\n             g.beginFill(0xff9900);\r\n             g.drawCircle(point.x, point.y, 3);\r\n             g.endFill();\r\n             this.graphics.push(g);*/\r\n\r\n            //7\r\n\r\n            angle = 180 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n\r\n            /*g = new Graphics();\r\n            g.beginFill(0xff9900);\r\n            g.drawCircle(point.x, point.y, 3);\r\n            g.endFill();\r\n            this.graphics.push(g);*/\r\n\r\n            //8\r\n\r\n            angle = 135 * Math.PI / 180;\r\n            point = new Vector2();\r\n\r\n            point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            this.touchPoints.push(point);\r\n\r\n            /*g = new Graphics();\r\n            g.beginFill(0xff9900);\r\n            g.drawCircle(point.x, point.y, 3);\r\n            g.endFill();\r\n            this.graphics.push(g);*/\r\n\r\n            // _.forEach([0, 1], () => {\r\n            // point = new Vector2();\r\n\r\n            // point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // this.touchPoints.push(point);\r\n            // g = new Graphics();\r\n            // g.beginFill(0xff9900);\r\n            // g.drawCircle(point.x, point.y, 3);\r\n            // g.endFill();\r\n            // this.graphics.push(g);\r\n\r\n\r\n            // angle = -90 * Math.PI / 180;\r\n            // point = new Vector2();\r\n            //\r\n            // point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // this.touchPoints.push(point);\r\n            // g = new Graphics();\r\n            // g.beginFill(0xff9900);\r\n            // g.drawCircle(point.x, point.y, 3);\r\n            // g.endFill();\r\n            // this.graphics.push(g);\r\n\r\n\r\n            // angle = 180 * Math.PI / 180;\r\n            // point = new Vector2();\r\n            //\r\n            // point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // this.touchPoints.push(point);\r\n            //\r\n            // g = new Graphics();\r\n            // g.beginFill(0xff9900);\r\n            // g.drawCircle(point.x, point.y, 3);\r\n            // g.endFill();\r\n            // this.graphics.push(g);\r\n\r\n\r\n            // angle = 135 * Math.PI / 180;\r\n            // point = new Vector2();\r\n            // point.x = this.position.x + Math.cos(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // point.y = this.position.y + Math.sin(angle) * (this.radius - PockeySettings.BALL_RADIUS - 2);\r\n            // this.touchPoints.push(point);\r\n            // g = new Graphics();\r\n            // g.beginFill(0xff9900);\r\n            // g.drawCircle(point.x, point.y, 3);\r\n            // g.endFill();\r\n            // this.graphics.push(g);\r\n\r\n\r\n            // });\r\n        }\r\n\r\n        public addPoints(parent: Container): void {\r\n            _.forEach(this.graphics, (g: Graphics) => {\r\n                parent.addChild(g);\r\n                // point.x = this.position.x + Math.cos(angle) * (this.radius + PockeySettings.BALL_RADIUS);\r\n                // point.y = this.position.y + Math.sin(angle) * (this.radius + PockeySettings.BALL_RADIUS);\r\n                // let g: Graphics = new Graphics();\r\n                // g.beginFill(0xff9900);\r\n                // g.drawCircle(point.x, point.y, 3);\r\n                // g.endFill();\r\n                // this.graphics.push(g);\r\n            });\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../../../../Framework/Utils/Line.ts\"/>\r\n///<reference path=\"../../../../Framework/abstract-entry-point.ts\"/>\r\n///<reference path=\"../Pocket.ts\"/>\r\n\r\n// /**\r\n//  *  Edgeflow\r\n//  *  Copyright 2018 EdgeFlow\r\n//  *  All Rights Reserved.\r\n//  *\r\n//  *  NOTICE: You may not use, distribute or modify this document without the\r\n//  *  written permission of its copyright owner\r\n//  *\r\n//  *  Created by Sandru Andrei on 7/23/2018\r\n//  */\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        import Sprite = PIXI.Sprite;\r\n        import Graphics = PIXI.Graphics;\r\n        import Vector2 = Framework.Utils.Vector2;\r\n        import Line = Framework.Utils.Line;\r\n        import Circle = PIXI.Circle;\r\n        import AbstractEntryPoint = Framework.AbstractEntryPoint;\r\n        import Settings = Framework.Settings;\r\n        import Point = PIXI.Point;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export enum BallType {\r\n            Player = \"PlayerBall\",\r\n            Opponent = \"OpponentBall\",\r\n            White = \"WhiteBall\",\r\n            Puck = \"Puck\"\r\n        }\r\n\r\n        export interface BallData {\r\n            removedFromArray?: boolean;\r\n            name?: string,\r\n            x?: number,\r\n            y?: number,\r\n            alpha?: number,\r\n            parentName?: string,\r\n            visible?: boolean,\r\n            canBeRemoved?: boolean,\r\n            scaleX?: number,\r\n            scaleY?: number,\r\n            shadowScaleX?: number,\r\n            shadowScaleY?: number,\r\n            zIndexSwitched?: boolean,\r\n            animationInProgress?: boolean\r\n        }\r\n\r\n        export class AbstractBall extends Sprite {\r\n            public ballType: BallType;\r\n            // protected defaultTextureName: string = 'ball-colorme.png';\r\n            protected defaultTextureName: string = Settings.desktopAssetsPath + \"Images/color_big.png\";\r\n            protected defaultOverTextureName: string = Settings.desktopAssetsPath + \"Images/color_big_over.png\";\r\n            protected defaultShadowTextureName: string = Settings.desktopAssetsPath + \"Images/color_big_shadow.png\";\r\n            protected _ballPosition: Vector2; //use this as default\r\n            public side: string;\r\n\r\n            public radius: number;//todo update la diameter dupa ce setezi textura\r\n            public mass: number = 1.4;\r\n            public velocity: Vector2;\r\n            public oldPos: Vector2;\r\n            public moving: boolean = false;\r\n            public power: number;\r\n            protected leftLimit: number;\r\n            protected rightLimit: number;\r\n            protected upLimit: number;\r\n            protected downLimit: number;\r\n            private g: Graphics;\r\n            public delta: number;\r\n            protected minStopLimit: number = 0.1;\r\n            public defaultColor: number = 0xffffff;\r\n            public isInPocket: boolean = false;\r\n            public lineLimits: Line[];\r\n            public pockets: Circle[];\r\n            public pocketsFinalPoints: Vector2[];\r\n            public p2Body: p2.Body;\r\n            public p2BodyShadow: p2.Body;\r\n            // private bitmapTexture: AnimatedSprite;\r\n            private zRotationActive: boolean = false;\r\n            private numberTest: number[] = [];\r\n            private lastAngle: number = 0;\r\n            private rot: number[];\r\n            private img: any;\r\n            private tex: any;\r\n            private imgPos: Vector2;\r\n\r\n            private prevX = 0;\r\n            private prevY = 0;\r\n            private newX = 0;\r\n            private newY = 0;\r\n            private ballTexture: Sprite;\r\n            private ballOverTexture: Sprite;\r\n            private ballIsInThePocket: boolean = false;\r\n            private occupiedPocket: Pocket;\r\n            private circleShape: p2.Circle;\r\n            public canBeRemoved: boolean = false;\r\n            public finalPocketAnimationRightPoint: Vector2 = new Vector2();\r\n            public finalPocketAnimationLeftPoint: Vector2 = new Vector2();\r\n            public finalPocketAnimationCenterPoint: Vector2 = new Vector2();\r\n            public pocketsZIndex: number = 0;\r\n\r\n            private firstPocketAnimationDone: boolean = false;\r\n            public removed: boolean = false;\r\n\r\n            public zIndexSwitched: boolean = false;\r\n            public ballAnimationHolder: Container;\r\n            public animationInProgress: boolean = false;\r\n\r\n            public ballValue: number = 1;\r\n\r\n            public ballShadow: Graphics;\r\n\r\n            public initialPosition: Vector2;\r\n\r\n            private ballInPocketAnimationTimeline: TimelineMax;\r\n\r\n            public removedFromArray: boolean = false;\r\n\r\n            constructor(ballSide: string = \"\", id: string = 'ball') {\r\n                super();\r\n                // this.img = context.createImageData(ballSize, ballSize);\r\n                // this.tex = context.createImageData(textureSize, textureSize);\r\n                this.rot = [1, 0, 0, 1];\r\n                this.moving = false;\r\n                this.velocity = new Vector2();\r\n                this.oldPos = new Vector2();\r\n                // this.imgPos = new Vector2(0, 0);\r\n\r\n                this.delta = PockeySettings.DELTA;\r\n                this.radius = PockeySettings.BALL_RADIUS;\r\n                // if()\r\n                this.side = ballSide;\r\n                this.name = this.side + id;\r\n                this.changeDefaultTextureName();\r\n                this.updateTexture();\r\n\r\n                // this.addGraphic();\r\n\r\n                // this.registerSignals();\r\n\r\n                // this.createBallShadow();\r\n\r\n                this.addP2Body();\r\n            }\r\n\r\n            protected addP2Body(): void {\r\n                this.p2Body = new p2.Body({\r\n                    mass: this.mass,\r\n                    position: [this.x, this.y],\r\n                    // fixedRotation: false,\r\n\r\n                });\r\n                this.p2BodyShadow = new p2.Body({\r\n                    mass: 0,\r\n                    position: [this.x, this.y]\r\n                });\r\n                this.p2Body.angularDamping = 0.4;\r\n                this.p2Body.damping = 0.2;\r\n                this.p2Body.boundingRadius = this.radius;\r\n                this.p2Body.allowSleep = true;\r\n                this.p2Body.sleepSpeedLimit = 2; // Body will feel sleepy if speed<1 (speed is the norm of velocity)\r\n                this.p2Body.sleepTimeLimit = 0.1;\r\n                this.p2Body.sleep();// =  1;\r\n                this.p2Body.velocity[0] = 0;// =  1;\r\n                this.p2Body.velocity[1] = 0;// =  1;\r\n\r\n                this.circleShape = new p2.Circle({radius: this.radius});\r\n                this.circleShape.material = this.getCircleMaterial();\r\n                this.p2Body.addShape(this.circleShape);\r\n\r\n                let circleShape2 = new p2.Circle({radius: PockeySettings.BALL_RADIUS + this.radius - 0});\r\n                circleShape2.material = new p2.Material(MaterialType.SHADOW_MATERIAL);\r\n\r\n                this.p2BodyShadow.addShape(circleShape2);\r\n\r\n                P2WorldManager.Instance().world.addBody(this.p2Body);\r\n\r\n\r\n                P2WorldManager.Instance().world.on(\"preSolve\", (evt) => {\r\n                    this.worldPreSolveHandler();\r\n                }, this);\r\n\r\n            }\r\n\r\n            protected worldPreSolveHandler(): void {\r\n\r\n                if (this.speed() < 50)\r\n                    this.p2Body.velocity = [this.p2Body.velocity[0] * PockeySettings.DELTA, this.p2Body.velocity[1] * PockeySettings.DELTA]\r\n            }\r\n\r\n            protected getCircleMaterial(): p2.Material {\r\n                return P2WorldManager.Instance().getMaterialByID(MaterialType.BALL_MATERIAL);//new p2.Material(MaterialType.BALL_MATERIAL);\r\n            }\r\n\r\n            protected changeDefaultTextureName(): void {\r\n                // this.defaultTextureName =\r\n            }\r\n\r\n            protected updateTexture(): void {\r\n\r\n                this.anchor.set(0.5, 0.5);\r\n\r\n                this.ballTexture = new Sprite();\r\n                let g: Graphics = new Graphics();\r\n                g.beginFill(0xffffff, 1);\r\n                g.drawCircle(0, 0, this.radius);\r\n                g.endFill();\r\n                this.ballTexture.addChild(g);\r\n\r\n                this.addChild(this.ballTexture);\r\n\r\n                this.addGraphic();\r\n            }\r\n\r\n            public setLineLimits(lineLimits: Line[]): void {\r\n                this.lineLimits = lineLimits;\r\n            }\r\n\r\n            public setPockets(pockets: Circle[]): void {\r\n                this.pockets = pockets;\r\n            }\r\n\r\n            public setWallLimits(left: number, right: number, up: number, down: number): void {\r\n                this.leftLimit = left;\r\n                this.rightLimit = right;\r\n                this.upLimit = up;\r\n                this.downLimit = down;\r\n            }\r\n\r\n            public tintBall(color: number): void {\r\n                // this.g.tint = color;\r\n                (this.ballTexture.getChildAt(0) as Graphics).tint = color;\r\n            }\r\n\r\n            protected addGraphic(): void {\r\n                this.g = new Graphics();\r\n                if (this.ballType == BallType.Opponent) {\r\n                    this.defaultColor = PockeySettings.OPPONENT_COLOR;\r\n                    // this.g.beginFill(this.defaultColor);\r\n                }\r\n                else if (this.ballType == BallType.Player) {\r\n                    this.defaultColor = PockeySettings.PLAYER_COLOR;\r\n                    // this.g.beginFill(this.defaultColor);\r\n                }\r\n                else if (this.ballType == BallType.Puck) {\r\n                    this.defaultColor = PockeySettings.PUCK_COLOR;\r\n                    // this.g.beginFill(this.defaultColor);\r\n                }\r\n                else {\r\n                    this.defaultColor = 0xffffff;\r\n\r\n                }\r\n                this.g.beginFill(this.defaultColor);\r\n\r\n                this.g.drawCircle(0, 0, this.radius);\r\n                this.g.endFill();\r\n\r\n                this.img = AbstractEntryPoint.renderer.extract.pixels(this);\r\n\r\n                /*let frames = [];\r\n\r\n                for (let i = 0; i < 180; i++) {\r\n\r\n                    frames.push(PIXI.Texture.fromFrame('Ball' + i + '.png'));\r\n                }*/\r\n            }\r\n\r\n\r\n            public update(): void {\r\n\r\n                this.moving = this.p2Body.sleepState != p2.Body.SLEEPING;\r\n\r\n                //person.age >=16 ? 'Yes' : 'No';\r\n                if (this.moving && !this.canBeRemoved) {\r\n\r\n                    let isCloserToPocket: boolean = false;\r\n                    let pocketPosition: Vector2 = new Vector2();\r\n                    let p2BodyPos: Vector2 = new Vector2(this.p2Body.position[0], this.p2Body.position[1]);\r\n                    let lastDirection: number = 0;\r\n\r\n                    this.oldPos.x = this.p2Body.velocity[0];\r\n                    this.oldPos.y = this.p2Body.velocity[1];\r\n                    this.oldPos = this.oldPos.normalise();\r\n\r\n                    _.forEach(this.pockets, (pocket: Pocket) => {\r\n                        pocketPosition = new Vector2(pocket.x, pocket.y);\r\n\r\n                        if (pocketPosition.distanceTo(p2BodyPos) <= (this.radius + pocket.radius + 8)) {\r\n                            isCloserToPocket = true;\r\n\r\n                            if (pocketPosition.distanceTo(p2BodyPos) <= (pocket.radius + 1)) {\r\n\r\n                                this.canBeRemoved = true;\r\n                                console.log(\"intra la can be removed fmm: \" + this.name);\r\n                                P2WorldManager.Instance().world.removeBody(this.p2Body);\r\n\r\n                                SignalsManager.DispatchSignal(PockeySignalTypes.BALL_IN_POCKET, [this.ballType]);\r\n\r\n                                // P2WorldManager.Instance().world.remove(this.p2Body);\r\n\r\n                                this.x = p2BodyPos.x;\r\n                                this.y = p2BodyPos.y;\r\n\r\n                                this.ballShadow.x = p2BodyPos.x;\r\n                                this.ballShadow.y = p2BodyPos.y;\r\n\r\n                                let closestDistance: number = 3000;\r\n                                let distanceToNextClosestPoint: number = 3000;\r\n                                let pointId: number = 0;\r\n                                let nextPointId: number = 0;\r\n                                let direction: number = 0;\r\n                                let closestPoint: Vector2 = new Vector2();\r\n                                let nextClosestPoint2: Vector2 = new Vector2();\r\n\r\n                                closestPoint.x = pocket.x + this.oldPos.x;\r\n                                closestPoint.y = pocket.y + this.oldPos.y;\r\n                                closestPoint.x = closestPoint.x / 2 + p2BodyPos.x / 2;\r\n                                closestPoint.y = closestPoint.y / 2 + p2BodyPos.y / 2;\r\n\r\n                                nextClosestPoint2.x = p2BodyPos.x + this.oldPos.x * PockeySettings.BALL_RADIUS * 2;\r\n                                nextClosestPoint2.y = p2BodyPos.y + this.oldPos.y * PockeySettings.BALL_RADIUS * 2;\r\n\r\n                                let finalTouchPoint: Vector2 = new Vector2(closestPoint.x, closestPoint.y);\r\n                                _.forEach(pocket.touchPoints, (touchPoint: Vector2, id: number) => {\r\n                                    let newDist: number = closestPoint.distanceTo(touchPoint);\r\n                                    let dirDist: number = nextClosestPoint2.distanceTo(touchPoint);\r\n\r\n                                    if (newDist < closestDistance) {\r\n                                        closestDistance = newDist;\r\n                                        finalTouchPoint = new Vector2(touchPoint.x, touchPoint.y);\r\n                                        pointId = id;\r\n                                    }\r\n\r\n                                    if (dirDist < distanceToNextClosestPoint) {\r\n                                        distanceToNextClosestPoint = dirDist;\r\n                                        nextPointId = id;\r\n                                    }\r\n\r\n                                });\r\n\r\n                                closestPoint.x = finalTouchPoint.x;\r\n                                closestPoint.y = finalTouchPoint.y;\r\n\r\n                                let touchPointsArrayLength: number = pocket.touchPoints.length;\r\n                                let clockwiseDistance: number = 0;\r\n                                let counterclockDistance: number = 0;\r\n                                let idCounter: number = pointId;\r\n\r\n                                if (nextPointId > pointId) {\r\n                                    clockwiseDistance = nextPointId - pointId;\r\n                                    let tempDist: number = 0;\r\n                                    for (let i = 0; i < touchPointsArrayLength; i++) {\r\n                                        tempDist++;\r\n                                        idCounter--;\r\n                                        if (idCounter < 0)\r\n                                            idCounter = touchPointsArrayLength - 1;\r\n\r\n                                        if (idCounter == nextPointId)\r\n                                            counterclockDistance = tempDist;\r\n                                    }\r\n\r\n                                    if (counterclockDistance < clockwiseDistance)\r\n                                        direction = -1;\r\n                                    else if (counterclockDistance > clockwiseDistance)\r\n                                        direction = 1;\r\n                                    else\r\n                                        direction = 0;\r\n                                }\r\n                                else {\r\n\r\n                                    clockwiseDistance = pointId - nextPointId;\r\n                                    let tempDist: number = 0;\r\n                                    idCounter = nextPointId;\r\n                                    for (let i = 0; i < touchPointsArrayLength; i++) {\r\n                                        tempDist++;\r\n                                        idCounter--;\r\n                                        if (idCounter < 0)\r\n                                            idCounter = touchPointsArrayLength - 1;\r\n\r\n                                        if (idCounter == pointId)\r\n                                            counterclockDistance = tempDist;\r\n                                    }\r\n\r\n                                    if (clockwiseDistance < counterclockDistance)\r\n                                        direction = -1;\r\n                                    else if (clockwiseDistance > counterclockDistance)\r\n                                        direction = 1;\r\n                                    else\r\n                                        direction = 0;\r\n                                }\r\n                                lastDirection = direction;\r\n\r\n                                let bezierPositions: Point[] = [];\r\n                                let testids: number[] = [];\r\n                                idCounter = pointId;\r\n\r\n                                if (direction == -1) {\r\n                                    for (let i = 0; i < touchPointsArrayLength - 1; i++) {\r\n                                        testids.push(idCounter);\r\n                                        bezierPositions[i] = new Point(pocket.touchPoints[idCounter].x, pocket.touchPoints[idCounter].y);\r\n                                        idCounter--;\r\n                                        if (idCounter < 0)\r\n                                            idCounter = touchPointsArrayLength - 1;\r\n\r\n                                    }\r\n                                    bezierPositions.shift();\r\n\r\n                                }\r\n                                else if (direction == 1) {\r\n                                    for (let i = 0; i < touchPointsArrayLength; i++) {\r\n\r\n                                        testids.push(idCounter);\r\n                                        bezierPositions[i] = new Point(pocket.touchPoints[idCounter].x, pocket.touchPoints[idCounter].y);\r\n\r\n                                        idCounter++;\r\n                                        if (idCounter > touchPointsArrayLength - 1)\r\n                                            idCounter = 0;\r\n\r\n                                    }\r\n                                    bezierPositions.shift();\r\n\r\n                                }\r\n                                else if (direction == 0) {\r\n\r\n                                    direction = Math.round(Math.random() * 1) - 1;\r\n                                    lastDirection = direction;\r\n                                    if (direction == 0)\r\n                                        direction = 1;\r\n\r\n\r\n                                    idCounter = nextPointId;\r\n                                    bezierPositions.push(new Point(pocket.touchPoints[pointId].x, pocket.touchPoints[pointId].y));\r\n                                    bezierPositions.push(new Point(pocket.touchPoints[nextPointId].x, pocket.touchPoints[nextPointId].y));\r\n\r\n                                    for (let i = 0; i < touchPointsArrayLength - counterclockDistance; i++) {\r\n\r\n                                        if (i == 1) {\r\n\r\n                                            let tempPoint: Point = new Point(\r\n                                                pocket.touchPoints[nextPointId].x / 2 + pocket.touchPoints[idCounter].x / 2,\r\n                                                pocket.touchPoints[nextPointId].y / 2 + pocket.touchPoints[idCounter].y / 2\r\n                                            );\r\n\r\n                                            tempPoint = new Point(\r\n                                                tempPoint.x / 2 + pocket.touchPoints[nextPointId].x / 2,\r\n                                                tempPoint.y / 2 + pocket.touchPoints[nextPointId].y / 2\r\n                                            );\r\n                                            tempPoint = new Point(\r\n                                                tempPoint.x / 2 + pocket.touchPoints[nextPointId].x / 2,\r\n                                                tempPoint.y / 2 + pocket.touchPoints[nextPointId].y / 2\r\n                                            );\r\n                                            tempPoint = new Point(\r\n                                                tempPoint.x / 2 + pocket.touchPoints[nextPointId].x / 2,\r\n                                                tempPoint.y / 2 + pocket.touchPoints[nextPointId].y / 2\r\n                                            );\r\n                                            bezierPositions.push(tempPoint);\r\n                                            testids.push(idCounter);\r\n                                        }\r\n\r\n                                        idCounter -= direction;\r\n                                        if (idCounter > touchPointsArrayLength - 1)\r\n                                            idCounter = 0;\r\n                                        if (idCounter < 0)\r\n                                            idCounter = touchPointsArrayLength - 1;\r\n                                    }\r\n\r\n                                }\r\n                                bezierPositions.push(new Point(pocket.finalPoint.x, pocket.finalPoint.y));\r\n\r\n                                let duration: number = 1 / (this.speed() / 60);\r\n                                if (lastDirection == 0)\r\n                                    duration *= 2.4;\r\n                                else\r\n                                    duration *= 2;\r\n                                if (duration > 1.8)\r\n                                    duration = 1.8;\r\n\r\n                                this.animationInProgress = true;\r\n\r\n                                this.ballInPocketAnimationTimeline = new TimelineMax();\r\n                                this.ballInPocketAnimationTimeline.add(TweenMax.to(this, duration, {\r\n                                    bezier: bezierPositions,\r\n                                    ease: Linear.easeNone,\r\n                                    onUpdate: this.onAnimationUpdate.bind(this),\r\n                                    onUpdateParams: [pocket.x, pocket.y, pocket.radius],\r\n                                    onComplete: this.declareAnimationFinished.bind(this)\r\n                                }), 0);\r\n\r\n                                this.ballInPocketAnimationTimeline.add(TweenMax.to(this.scale, duration - duration / 3, {\r\n                                    x: 0.8,\r\n                                    y: 0.8,\r\n                                    ease: Linear.easeNone\r\n                                }), 0);\r\n                                this.ballInPocketAnimationTimeline.add(TweenMax.to(this.ballShadow.scale, (duration - duration / 3) / 2, {\r\n                                    x: 0,\r\n                                    y: 0,\r\n                                    ease: Linear.easeNone\r\n                                }), 0);\r\n                                this.ballInPocketAnimationTimeline.add(TweenMax.to(this, (duration - duration / 3), {\r\n                                    alpha: 0,\r\n                                    ease: Linear.easeNone\r\n                                }), duration / 3);\r\n\r\n\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                    });\r\n\r\n                    if (this.canBeRemoved)\r\n                        return;\r\n\r\n                    if (!isCloserToPocket) {\r\n\r\n                        if (p2BodyPos.x + this.radius > this.rightLimit) {\r\n                            p2BodyPos.x = this.rightLimit - this.radius;\r\n                        }\r\n                        else if (p2BodyPos.x - this.radius < this.leftLimit) {\r\n                            p2BodyPos.x = this.leftLimit + this.radius;\r\n                        }\r\n                        if (p2BodyPos.y + this.radius > this.downLimit) {\r\n                            p2BodyPos.y = this.downLimit - this.radius;\r\n                        }\r\n                        else if (p2BodyPos.y - this.radius < this.upLimit) {\r\n                            p2BodyPos.y = this.upLimit + this.radius;\r\n                        }\r\n                    }\r\n\r\n                    this.x = p2BodyPos.x;\r\n                    this.y = p2BodyPos.y;\r\n\r\n                    this.ballShadow.x = p2BodyPos.x;\r\n                    this.ballShadow.y = p2BodyPos.y;\r\n\r\n                    this.oldPos.x = this.x;\r\n                    this.oldPos.y = this.y;\r\n                }\r\n            }\r\n\r\n            protected declareAnimationFinished(): void {\r\n                this.animationInProgress = false;\r\n                this.visible = false;\r\n                if (this.parent)\r\n                    this.parent.removeChild(this);\r\n            }\r\n\r\n            public addShadowBody(): void {\r\n                this.p2BodyShadow.position[0] = this.x;\r\n                this.p2BodyShadow.position[1] = this.y;\r\n\r\n                P2WorldManager.Instance().world.addBody(this.p2BodyShadow);\r\n            }\r\n\r\n            private onAnimationUpdate(x: number, y: number, radius: number): void {\r\n\r\n                this.moving = true;\r\n                let ballPos: Vector2 = new Vector2(this.x, this.y);\r\n                let pocketPos: Vector2 = new Vector2(x, y);\r\n                let minDistance: number = radius - this.radius;\r\n                let distance: number = pocketPos.distanceTo(ballPos)\r\n\r\n                if (distance <= minDistance && !this.zIndexSwitched) {\r\n\r\n                    this.ballAnimationHolder.addChildAt(this.ballShadow, 0);\r\n                    this.ballAnimationHolder.addChild(this);\r\n                    // this.ballAnimationHolder.addChild(this.ballShadow);\r\n                    this.zIndexSwitched = true;\r\n                }\r\n\r\n            }\r\n\r\n            set ballPosition(positionVector: Vector2) {\r\n                if (!this.initialPosition) {\r\n                    this.initialPosition = positionVector.clone();\r\n                }\r\n                this._ballPosition = positionVector;\r\n\r\n                this.x = positionVector.x;\r\n                this.y = positionVector.y;\r\n\r\n                this.ballShadow.scale.x = 1;\r\n                this.ballShadow.scale.y = 1;\r\n\r\n                this.ballShadow.x = this.x;\r\n                this.ballShadow.y = this.y;\r\n\r\n                this.p2Body.position = [positionVector.x, positionVector.y]\r\n                this.p2BodyShadow.position = [positionVector.x, positionVector.y]\r\n\r\n            }\r\n\r\n            get ballPosition(): Vector2 {\r\n                return this._ballPosition;\r\n            }\r\n\r\n            public speed(): number {\r\n                // magnitude of velocity vector\r\n                return Math.sqrt(this.p2Body.velocity[0] * this.p2Body.velocity[0] + this.p2Body.velocity[1] * this.p2Body.velocity[1]);\r\n            }\r\n\r\n\r\n            public angle(): number {\r\n                //angle of ball with the x axis\r\n                return Math.atan2(this.velocity.y, this.velocity.x);\r\n            }\r\n\r\n            public onShoot(rotation: number, power: number): void {\r\n                this.power = power;\r\n                this.velocity = new Vector2(this.power * Math.cos(rotation), this.power * Math.sin(rotation));\r\n                this.moving = true;\r\n            }\r\n\r\n            public reset(): void {\r\n                if (this.ballInPocketAnimationTimeline && this.ballInPocketAnimationTimeline.isActive()) {\r\n                    this.ballInPocketAnimationTimeline.pause();\r\n                    this.ballInPocketAnimationTimeline.kill();\r\n                    // this.ballInPocketAnimationTimeline.pause(0, true); //Go back to the start (true is to suppress events)\r\n                    // this.ballInPocketAnimationTimeline.\r\n                    // Timel.remove();\r\n                }\r\n                this.alpha = 1;\r\n                this.scale.x = 1;\r\n                this.scale.y = 1;\r\n\r\n                this.ballShadow.scale.x = 1;\r\n                this.ballShadow.scale.y = 1;\r\n                this.zIndexSwitched = false;\r\n                this.canBeRemoved = false;\r\n                this.animationInProgress = false;\r\n                this.p2Body.velocity[0] = 0;\r\n                this.p2Body.velocity[1] = 0;\r\n                P2WorldManager.Instance().world.addBody(this.p2Body);\r\n                P2WorldManager.Instance().world.addBody(this.p2BodyShadow);\r\n                this.removedFromArray = false;\r\n                this.visible = true;\r\n                this.removed = false;\r\n                // this.poolTable.addChild(this.poolTable.whiteBall);\r\n                // this.ticker.add(this.poolTable.whiteBall.update);\r\n            }\r\n\r\n            public createBallShadow() {\r\n                this.ballShadow = new Graphics();\r\n                this.ballShadow.beginFill(0x000000, 0.4);\r\n                this.ballShadow.drawCircle(this.radius / 4, this.radius / 4, this.radius);\r\n                // holder.addChild(this.ballShadow);\r\n            }\r\n\r\n            public getBallData(): BallData {\r\n                let ballData: BallData = {};\r\n\r\n                ballData.x = this.x;\r\n                ballData.y = this.y;\r\n\r\n                ballData.scaleX = this.scale.x;\r\n                ballData.scaleY = this.scale.y;\r\n\r\n                ballData.shadowScaleX = this.ballShadow.scale.x;\r\n                ballData.shadowScaleY = this.ballShadow.scale.y;\r\n\r\n                ballData.zIndexSwitched = this.zIndexSwitched;\r\n\r\n                ballData.visible = this.visible;\r\n                ballData.alpha = this.alpha;\r\n                // ballData.canBeRemoved = this.canBeRemoved;\r\n                ballData.name = this.name;\r\n                ballData.parentName = (this.parent) ? this.parent.name : \"none\";\r\n                // ballData.animationInProgress = this.animationInProgress;\r\n                // ballData.removedFromArray = this.removedFromArray;\r\n\r\n                return ballData;\r\n            }\r\n\r\n            public setBallData(ballData: BallData): void {\r\n                // let ballData:BallData = {};\r\n                this.ballPosition = new Vector2(ballData.x, ballData.y);\r\n                // this.x = ballData.x;\r\n                // this.y = ballData.y;\r\n\r\n                this.scale.x = ballData.scaleX;\r\n                this.scale.y = ballData.scaleY;\r\n\r\n                this.ballShadow.scale.x = ballData.shadowScaleX;\r\n                this.ballShadow.scale.y = ballData.shadowScaleY;\r\n\r\n                this.visible = ballData.visible;\r\n                this.alpha = ballData.alpha;\r\n                // this.animationInProgress = ballData.animationInProgress;\r\n                // this.canBeRemoved = ballData.canBeRemoved;\r\n                // this.removedFromArray = ballData.removedFromArray;\r\n\r\n                if (ballData.zIndexSwitched) {\r\n                    this.ballAnimationHolder.addChildAt(this.ballShadow, 0);\r\n                    this.ballAnimationHolder.addChild(this);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"../../PockeyEntryPoint/pockey-entry-point.ts\"/>\r\n///<reference path=\"../../GameFiles/Modules/GameModule/balls/abstract-ball.ts\"/>\r\n///<reference path=\"../../GameFiles/Modules/GameModule/p2-world-manager.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/1/2018\r\n */\r\n\r\n\r\nnamespace Framework {\r\n    export module Utils {\r\n        import Vector2 = Framework.Utils.Vector2;\r\n        import MaterialType = Pockey.GameModule.MaterialType;\r\n        import P2WorldManager = Pockey.GameModule.P2WorldManager;\r\n        import Graphics = PIXI.Graphics;\r\n        import Rectangle = PIXI.Rectangle;\r\n\r\n        // export enum LineType {\r\n        //     BallsOnly = \"BallOnly\",\r\n        //     PuckOnly = \"PuckOnly\",\r\n        //     Normal = \"Normal\"\r\n        // }\r\n\r\n        export class Rect {\r\n\r\n            public firstPoint: Vector2;\r\n            public secondPoint: Vector2;\r\n            private angle: number;\r\n            public cosAlpha;\r\n            public sinAlpha;\r\n            public lineType: LineType;\r\n            public p2Body: p2.Body;\r\n\r\n            constructor(rectangle:Rectangle, rotationAngle:number, materialType: MaterialType) {\r\n                // this.firstPoint = firstPoint;\r\n                // this.secondPoint = secondPoint;\r\n                // this.angle = this.getAngle();\r\n                // this.cosAlpha = Math.cos(this.angle);\r\n                // this.sinAlpha = Math.sin(this.angle);\r\n                // this.lineType = type;\r\n\r\n                this.p2Body = new p2.Body({\r\n                    mass: 0,\r\n                    // position: [496, 560],\r\n                    // fixedRotation: true,\r\n                    position: [rectangle.x, rectangle.y],\r\n                    angle: rotationAngle\r\n                });\r\n\r\n                // this.p2Body.collisionResponse = true;\r\n                // this.p2Body.damping = 20;\r\n                // this.p2Body.angularDamping = 20;\r\n                // this.p2Body.angularVelocity = 20;\r\n\r\n                // let c:Graphics =\r\n                // this.p2Body.angle\r\n\r\n                // this.p2Body.damping = 0.3;\r\n\r\n\r\n                // var lineShape = new p2.Line({length: 500});\r\n                var rectShape = new p2.Box({\r\n                    width: rectangle.width,\r\n                    height: rectangle.height\r\n                });\r\n                rectShape.material = new p2.Material(materialType);\r\n                // circleShape.material.\r\n\r\n                // let m = new p2.ContactMaterial(new AbstractBall(null).circleShape.material, lineShape.material, {\r\n                // friction: 0,\r\n                // relaxation: 10,\r\n                // frictionRelaxation: 0.5\r\n                // restitution: 0,\r\n                // frictionRelaxation: 0,\r\n                // relaxation: 0,\r\n                // friction: 0,\r\n                // frictionStiffness: 0,\r\n                // stiffness: 10000,\r\n                // surfaceVelocity: 100,\r\n                // restitution: 0.9,\r\n                //\r\n                // });\r\n                // P2WorldManager.Instance().world.addContactMaterial(m);\r\n\r\n                this.p2Body.addShape(rectShape);\r\n\r\n                P2WorldManager.Instance().world.addBody(this.p2Body);\r\n            }\r\n\r\n            // private getAngle(): number {\r\n            //     let x1: number = this.firstPoint.x;//, y1, x2, y2\r\n            //     let y1: number = this.firstPoint.y;\r\n            //\r\n            //     let x2: number = this.secondPoint.x;//, y1, x2, y2\r\n            //     let y2: number = this.secondPoint.y;\r\n            //\r\n            //     let dy = y2 - y1;\r\n            //     let dx = x2 - x1;\r\n            //     let theta: number = Math.atan2(dy, dx); // range (-PI, PI]\r\n            //     // theta *= 180 / Math.PI; // rads to degs, range (-180, 180]\r\n            //     //if (theta < 0) theta = 360 + theta; // range [0, 360)\r\n            //     return theta;\r\n            // }\r\n        }\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/16/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        import Sprite = PIXI.Sprite;\r\n\r\n        export enum DecalType {\r\n            Welcome = \"dccal_welcome.png\",\r\n            AstroJunkie = \"decal_astrojunkie.png\",\r\n            Blastoff = \"decal_blastoff.png\",\r\n            Cthulu = \"decal_cthulu.png\",\r\n            Dice = \"decal_dice.png\",\r\n            InserCoin = \"decal_insertcoin.png\",\r\n            KnuckeSandwich = \"decal_knucklesandwhich.png\",\r\n            Looselips = \"decal_looselips.png\",\r\n            OneUp = \"decal_oneup.png\",\r\n            PlayerOne = \"decal_playerone.png\",\r\n            Pockey = \"decal_pockey.png\",\r\n            RageQuit = \"decal_ragequit.png\",\r\n            StatTrickShot = \"decal_statTrickshot.png\",\r\n            ToweKing = \"decal_towerking.png\",\r\n            WingedSword = \"decal_wingedsword.png\"\r\n        }\r\n\r\n        export class Decal extends Sprite {\r\n\r\n            // private decalIcon: Sprite;\r\n\r\n            constructor() {\r\n                super();\r\n                this.anchor.set(0.5, 0.5);\r\n                this.SetDecalIcon(DecalType.Pockey);\r\n            }\r\n\r\n            public SetDecalIcon(decalType: DecalType) {\r\n                let texture = PIXI.Texture.fromFrame(decalType.toString());\r\n                this.texture = texture;\r\n                this.alpha = 0.4;\r\n            }\r\n        }\r\n    }\r\n}\r\n","namespace Pockey {\r\n    export module Connection {\r\n        /*export class FrameworkSocketNamespaces {\r\n            public static SLEEP: string = \"/sleep_mode\";\r\n            public static SEARCH: string = \"/searching\";\r\n            public static PLAY: string = \"/play\";\r\n        }\r\n\r\n        export class FrameworkSocketEvents {\r\n\r\n            public static newConnection: string = \"newConnection\";\r\n            // public static lookingForPartnerChannel: string = \"lookingForPartner\";\r\n            public static letsConnect: string = \"letsConnect\";\r\n            public static joinRoom: string = \"joinRoom\";\r\n            public static joinedRoom: string = \"joinedRoom\";\r\n            public static privateMessage: string = \"privateMessage\";\r\n            // public static partnerFoundChannel: string = \"partnerFoundChannel\";\r\n        }*/\r\n\r\n        export class PockeySocketMessages {\r\n            public static WATCH: string = \"PockeySocketMessages.\" + \"WATCH\";\r\n            public static SCORE_UPDATE: string = \"PockeySocketMessages.\" + \"SCORE_UPDATE\";\r\n            public static OPPONENT: string = \"PockeySocketMessages.\" + \"OPPONENT\";\r\n            public static YOUR_TURN: string = \"PockeySocketMessages.\" + \"YOUR_TURN\";\r\n            public static OPPONENT_SETTINGS: string = \"PockeySocketMessages.\" + \"OPPONENT_SETTINGS\";\r\n            public static OPPONENT_RESTART_GAME: any = \"PockeySocketMessages.\" + \"OPPONENT_RESTART_GAME\";\r\n            // public static OPPONENT_RESTART: any;\r\n\r\n        }\r\n    }\r\n}","///<reference path=\"../../../Framework/Utils/mouse-handler.ts\"/>\r\n///<reference path=\"../../../Framework/Signals/signal-types.ts\"/>\r\n///<reference path=\"../ConnectionModule/pocket-connection-channels-and-messages.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/16/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        import Sprite = PIXI.Sprite;\r\n        import Point = PIXI.Point;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n        import Vector2 = Framework.Utils.Vector2;\r\n        import PointLike = PIXI.PointLike;\r\n        import MouseHandler = Framework.Utils.MouseHandler;\r\n\r\n        export enum StickType {\r\n            Basic = \"stick_basic.png\",\r\n            BlueSteel = \"stick_bluesteel.png\",\r\n            CandyCue = \"stick_candycue.png\",\r\n            Default = \"stick_default.png\",\r\n            Dotty = \"stick_dotty.png\",\r\n            E = \"stick_e.png\",\r\n            Facebook1 = \"stick_facebook01.png\",\r\n            Facebook2 = \"stick_facebook02.png\",\r\n            Funky = \"stick_funky.png\",\r\n            Gnarly = \"stick_gnarly.png\",\r\n            Ivory = \"stick_ivory.png\",\r\n            KingsGlaive = \"stick_kingsglaive.png\",\r\n            Ninja = \"stick_ninja.png\",\r\n            Pinky = \"stick_pinky.png\",\r\n            GDY = \"stick_qdy.png\",\r\n            Rocket = \"stick_rocket.png\",\r\n            Rockstar = \"stick_rockstar.png\",\r\n            Saber = \"stick_saber.png\",\r\n            Sevn = \"stick_sevn.png\",\r\n            Snake = \"stick_snake.png\",\r\n            TigerMasou = \"stick_tigermasou.png\",\r\n            Twisted = \"stick_twisted.png\",\r\n            Twitch = \"stick_twitch.png\",\r\n            Twitter1 = \"stick_twitter01.png\"\r\n        }\r\n\r\n        export class Stick extends Sprite {\r\n            public power: number = 0;\r\n            public rotationEnabled: boolean = false;\r\n            private leftLimit: number;\r\n            private rightLimit: number;\r\n            private upLimit: number;\r\n            private downLimit: number;\r\n            protected opposite: number;\r\n            protected adjacent: number;\r\n            private shootTimeline: TimelineLite;\r\n            public isActive: boolean = false;\r\n            public startPosition: Point;\r\n            public initialPosition: Point;\r\n            public initialPivotPoint: Point;\r\n\r\n            protected clickPoint: Vector2;\r\n            protected clickPointRegistered: boolean = false;\r\n            protected firstPointOfTangent: Vector2;\r\n            protected secondPointOfTangent: Vector2;\r\n            protected stickPowerFactor: number = 9.81;\r\n            protected mouseReleased: boolean = false;\r\n\r\n            constructor() {\r\n                super();\r\n                this.SetStickSkin(StickType.Default);\r\n                this.initialPivotPoint = new Point(this.texture.width + 8, this.texture.height / 2);\r\n                this.pivot = this.initialPivotPoint;\r\n                this.defineShootTimeline();\r\n\r\n            }\r\n\r\n            public SetStickSkin(stickType: StickType) {\r\n\r\n                this.texture = PIXI.Texture.fromFrame(stickType.toString());\r\n            }\r\n\r\n            public update(): void {\r\n                if (!MouseHandler.Instance().left.down)\r\n                    this.mouseReleased = true;\r\n\r\n                if (this.isActive ) {\r\n                    // console.log(\"stick intra la is active!!\");\r\n\r\n                    // if (!MouseHandler.Instance().left.down) {\r\n                    //     console.log(\"stick NU intra la left button down!!! rotation: \" + this.rotationEnabled);\r\n                    // }\r\n                    if (MouseHandler.Instance().left.down && this.mouseReleased) {\r\n\r\n                        // console.log(\"stick intra la left button down!!!\");\r\n\r\n                        this.rotationEnabled = false;\r\n// if(this.mouseReleased)\r\n// {\r\n                        if (!this.clickPointRegistered) {\r\n                            // console.log(\"stick intra la click point registered!!!\");\r\n\r\n                            let localPoint = this.parent.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\r\n                            this.clickPointRegistered = true;\r\n\r\n                            this.clickPoint = new Vector2(localPoint.x, localPoint.y);\r\n\r\n                            let oppRot: Vector2 = new Vector2(Math.cos(90 * Math.PI / 180 + this.rotation),\r\n                                Math.sin(90 * Math.PI / 180 + this.rotation)).normalise();\r\n\r\n                            this.firstPointOfTangent = new Vector2(localPoint.x - oppRot.x * 1500, localPoint.y - oppRot.y * 1500);\r\n                            this.secondPointOfTangent = new Vector2(localPoint.x + oppRot.x * 1500, localPoint.y + oppRot.y * 1500);\r\n\r\n                            // let g: Graphics = new Graphics();\r\n                            // g.beginFill(0xff990);\r\n                            // g.lineStyle(2, 0x000000);\r\n                            // g.moveTo(this.firstPointOfTangent.x, this.firstPointOfTangent.y);\r\n                            // g.lineTo(this.secondPointOfTangent.x, this.secondPointOfTangent.y);\r\n                            // g.endFill();\r\n                            // this.parent.addChild(g);\r\n\r\n\r\n                        } else {\r\n                            // console.log(\"stick NU intra la click point registered!!!\");\r\n\r\n                            let stickPower: number = 0;\r\n\r\n                            let localPoint = this.parent.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\r\n                            let mouseDirection: number = (localPoint.x - this.firstPointOfTangent.x) * (this.secondPointOfTangent.y - this.firstPointOfTangent.y) - (localPoint.y - this.firstPointOfTangent.y) * (this.secondPointOfTangent.x - this.firstPointOfTangent.x);\r\n\r\n                            if (mouseDirection > 0)\r\n                                mouseDirection = -1;\r\n                            else\r\n                                mouseDirection = 1;\r\n\r\n                            if (mouseDirection > 0) {\r\n                                stickPower = this.distToSegment(localPoint, this.firstPointOfTangent, this.secondPointOfTangent);\r\n                            }\r\n                            else {\r\n                                stickPower = 0\r\n                            }\r\n\r\n                            stickPower /= 2;\r\n                            if (stickPower > 120)\r\n                                stickPower = 120;\r\n\r\n                            // console.log(\"stick powa: \" + stickPower);\r\n                            this.increasePower(stickPower);\r\n                        }\r\n                    }\r\n                    else if (this.power > 6) {\r\n                        // console.log(\"stick intra la power mai mare!!!\");\r\n\r\n                        this.release();\r\n                    }\r\n                    else if (this.power == 0) {\r\n                        // console.log(\"stick intra la power zero!!!\");\r\n\r\n                        this.rotationEnabled = true;\r\n\r\n                    }\r\n\r\n\r\n                    // } else if (this.power <= 0) {\r\n                    //     this.rotationEnabled = true;\r\n                    //     // this.x = this.initialPivotPoint.x;\r\n                    // }\r\n                    if (this.rotationEnabled && (!MouseHandler.Instance().left.down || !this.mouseReleased)) {\r\n                        // console.log(\"stick intra la rotation is enabled!!\");\r\n\r\n                        let localPoint = this.parent.toLocal(\r\n                            new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\r\n                        this.opposite = localPoint.y - this.position.y;\r\n                        this.adjacent = localPoint.x - this.position.x;\r\n                        this.rotation = Math.atan2(this.opposite, this.adjacent);\r\n\r\n                        this.clickPointRegistered = false;\r\n                        this.pivot.x = this.initialPivotPoint.x;\r\n                        // if(this.raycastFollower)\r\n                    }\r\n\r\n                }\r\n                /*  else {\r\n                      console.log(\"stick NU active!!\");\r\n\r\n                  }*/\r\n            }\r\n\r\n            protected increasePower(stickPower: number): void {\r\n                // if (this.pivot.x - this.initialPivotPoint.x < 100) {\r\n                // TweenMax.to(this.pivot, 0.1, {x: this.initialPivotPoint.x + stickPower});\r\n                this.pivot.x = this.initialPivotPoint.x + stickPower;\r\n                this.power = stickPower * this.stickPowerFactor;\r\n                // }\r\n            }\r\n\r\n            protected release(): void {\r\n                // console.log(\"la release\");\r\n                this.isActive = false;\r\n                this.clickPointRegistered = false;\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.HIDE_BALL_RAY_GRAPHICS);\r\n                this.shootTimeline.play(0);\r\n            }\r\n\r\n            // public setWallLimits(left: number, right: number, up: number, down: number): void {\r\n            //     this.leftLimit = left;\r\n            //     this.rightLimit = right;\r\n            //     this.upLimit = up;\r\n            //     this.downLimit = down;\r\n            // }\r\n\r\n            public reset(): void {\r\n                this.isActive = false;\r\n                this.rotationEnabled = false;\r\n                this.clickPointRegistered = false;\r\n                if(MouseHandler.Instance().left.down)\r\n                    this.mouseReleased = false;\r\n            }\r\n\r\n            public GoToStartPosition(): void {\r\n                this.x = this.startPosition.x;\r\n                this.y = this.startPosition.y;\r\n            }\r\n\r\n            public activate(position: Point | PointLike): void {\r\n                // console.log(\"stick la activate\");\r\n\r\n                this.position.x = position.x;\r\n                this.position.y = position.y;\r\n                this.isActive = true;\r\n                this.rotationEnabled = true;\r\n                // console.log(\"la activate -> stick rotation enabled: \" + this.rotationEnabled);\r\n\r\n            }\r\n\r\n            private defineShootTimeline(): void {\r\n                this.shootTimeline = new TimelineLite();\r\n                this.shootTimeline.pause();\r\n                this.shootTimeline.add(TweenMax.to(this.pivot, 0.05, {\r\n                    x: this.initialPivotPoint.x - 8,\r\n                    onComplete: this.shoot.bind(this)\r\n                }));\r\n                this.shootTimeline.add(TweenMax.to(this.pivot, 0.1, {\r\n                    x: this.initialPivotPoint.x\r\n                }));\r\n\r\n            }\r\n\r\n\r\n            private shoot(): void {\r\n                // this.power = 0;\r\n                // console.log(\"stick power: \" + this.power);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.SHOOT_BALL);\r\n                // this.isActive = false;\r\n            }\r\n\r\n            private dist2(v: Vector2, w: Vector2) {\r\n                return (v.x - w.x) * (v.x - w.x) + (v.y - w.y) * (v.y - w.y);\r\n            }\r\n\r\n            private distToSegmentSquared(point: Vector2, firstLinePoint: Vector2, secondLinePoint: Vector2): number {\r\n                let l2 = this.dist2(firstLinePoint, secondLinePoint);\r\n                if (l2 == 0)\r\n                    return this.dist2(point, firstLinePoint);\r\n\r\n                var t = ((point.x - firstLinePoint.x) * (secondLinePoint.x - firstLinePoint.x) + (point.y - firstLinePoint.y) * (secondLinePoint.y - firstLinePoint.y)) / l2;\r\n                t = Math.max(0, Math.min(1, t));\r\n\r\n                return this.dist2(point, new Vector2(\r\n                    firstLinePoint.x + t * (secondLinePoint.x - firstLinePoint.x),\r\n                    firstLinePoint.y + t * (secondLinePoint.y - firstLinePoint.y)\r\n                ));\r\n            }\r\n\r\n            protected distToSegment(p, v, w) {\r\n                return Math.sqrt(this.distToSegmentSquared(p, v, w));\r\n            }\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"stick.ts\"/>\r\n///<reference path=\"../../../Framework/Utils/touch-handler.ts\"/>\r\nnamespace Pockey {\r\n    import Stick = Pockey.GameModule.Stick;\r\n    import TouchHandler = Framework.Utils.TouchHandler;\r\n    import Point = PIXI.Point;\r\n    import SignalsManager = Framework.Signals.SignalsManager;\r\n    import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n    import PointLike = PIXI.PointLike;\r\n\r\n    export class StickMobile extends Stick {\r\n        // constructor\r\n        constructor() {\r\n            super();\r\n            // console.log(\"stick constructor\");\r\n\r\n            SignalsManager.AddSignalCallback(PockeySignalTypes.STICK_PIVOT_MOBILE_UPDATE, this.onStickPowerMobile.bind(this));\r\n            SignalsManager.AddSignalCallback(PockeySignalTypes.STICK_MOBILE_RELEASE, this.stickMobileRelease.bind(this));\r\n        }\r\n\r\n        public activate(position: Point | PointLike): void {\r\n            // console.log(\"stick la activate\");\r\n\r\n           super.activate(position);\r\n\r\n            SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_STICK_POWER_MOBILE);\r\n\r\n            // console.log(\"la activate -> stick rotation enabled: \" + this.rotationEnabled);\r\n\r\n        }\r\n\r\n        private stickMobileRelease(params: any[]): void {\r\n            // let stickPower: number = params[0];\r\n\r\n            if (this.power > 6) {\r\n                // console.log(\"stick intra la power mai mare!!!\");\r\n\r\n                this.release();\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.HIDE_STICK_POWER_MOBILE);\r\n            }\r\n            else if (this.power == 0) {\r\n                // console.log(\"stick intra la power zero!!!\");\r\n\r\n                this.rotationEnabled = true;\r\n            }\r\n        }\r\n\r\n        private onStickPowerMobile(params: any[]): void {\r\n            let stickPower: number = params[0];\r\n            this.rotationEnabled = false;\r\n\r\n            this.increasePower(stickPower);\r\n        }\r\n\r\n        protected increasePower(stickPower: number): void {\r\n            // if (this.pivot.x - this.initialPivotPoint.x < 100) {\r\n            // TweenMax.to(this.pivot, 0.1, {x: this.initialPivotPoint.x + stickPower});\r\n            this.pivot.x = this.initialPivotPoint.x + stickPower;\r\n            console.log(\"pivotu pizdii: \" + this.initialPivotPoint.x, stickPower, this.pivot.x);\r\n            this.power = stickPower * this.stickPowerFactor;\r\n            // }\r\n        }\r\n\r\n        public update(): void {\r\n            // console.log(\"stick update\");\r\n\r\n            if (this.isActive) {\r\n                // console.log(\"stick intra la is active!!\");\r\n\r\n                // if (!MouseHandler.Instance().left.down) {\r\n                //     console.log(\"stick NU intra la left button down!!! rotation: \" + this.rotationEnabled);\r\n                // }\r\n                // console.log(\"TouchHandler.Instance().isTouchMoving: \" + TouchHandler.Instance().isTouchMoving);\r\n\r\n                if (this.rotationEnabled && TouchHandler.Instance().isTouchMoving) {\r\n                    console.log(\"intra la rotation enabled\");\r\n                    // console.log(\"stick intra la rotation is enabled!!\");\r\n\r\n                    let localPoint = this.parent.toLocal(\r\n                        new Point(TouchHandler.Instance().position.x, TouchHandler.Instance().position.y));\r\n                    this.opposite = localPoint.y - this.position.y;\r\n                    this.adjacent = localPoint.x - this.position.x;\r\n                    this.rotation = Math.atan2(this.opposite, this.adjacent);\r\n\r\n                    this.clickPointRegistered = false;\r\n                    this.pivot.x = this.initialPivotPoint.x;\r\n                    // if(this.raycastFollower)\r\n                }\r\n\r\n                /* if (MouseHandler.Instance().left.down) {\r\n                     // console.log(\"stick intra la left button down!!!\");\r\n\r\n                     this.rotationEnabled = false;\r\n\r\n                     if (!this.clickPointRegistered) {\r\n                         // console.log(\"stick intra la click point registered!!!\");\r\n\r\n                         let localPoint = this.parent.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\r\n                         this.clickPointRegistered = true;\r\n                         this.clickPoint = new Vector2(localPoint.x, localPoint.y);\r\n\r\n                         let oppRot: Vector2 = new Vector2(Math.cos(90 * Math.PI / 180 + this.rotation),\r\n                             Math.sin(90 * Math.PI / 180 + this.rotation)).normalise();\r\n\r\n                         this.firstPointOfTangent = new Vector2(localPoint.x - oppRot.x * 1500, localPoint.y - oppRot.y * 1500);\r\n                         this.secondPointOfTangent = new Vector2(localPoint.x + oppRot.x * 1500, localPoint.y + oppRot.y * 1500);\r\n\r\n                         // let g: Graphics = new Graphics();\r\n                         // g.beginFill(0xff990);\r\n                         // g.lineStyle(2, 0x000000);\r\n                         // g.moveTo(this.firstPointOfTangent.x, this.firstPointOfTangent.y);\r\n                         // g.lineTo(this.secondPointOfTangent.x, this.secondPointOfTangent.y);\r\n                         // g.endFill();\r\n                         // this.parent.addChild(g);\r\n\r\n\r\n                     } else {\r\n                         // console.log(\"stick NU intra la click point registered!!!\");\r\n\r\n                         let stickPower: number = 0;\r\n\r\n                         let localPoint = this.parent.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\r\n                         let mouseDirection: number = (localPoint.x - this.firstPointOfTangent.x) * (this.secondPointOfTangent.y - this.firstPointOfTangent.y) - (localPoint.y - this.firstPointOfTangent.y) * (this.secondPointOfTangent.x - this.firstPointOfTangent.x);\r\n\r\n                         if (mouseDirection > 0)\r\n                             mouseDirection = -1;\r\n                         else\r\n                             mouseDirection = 1;\r\n\r\n                         if (mouseDirection > 0) {\r\n                             stickPower = this.distToSegment(localPoint, this.firstPointOfTangent, this.secondPointOfTangent);\r\n                         }\r\n                         else {\r\n                             stickPower = 0\r\n                         }\r\n\r\n                         stickPower /= 2;\r\n                         if (stickPower > 120)\r\n                             stickPower = 120;\r\n\r\n                         // console.log(\"stick powa: \" + stickPower);\r\n                         this.increasePower(stickPower);\r\n                     }\r\n                 }\r\n                 else if (this.power > 6) {\r\n                     // console.log(\"stick intra la power mai mare!!!\");\r\n\r\n                     this.release();\r\n                 }\r\n                 else if (this.power == 0) {\r\n                     // console.log(\"stick intra la power zero!!!\");\r\n\r\n                     this.rotationEnabled = true;\r\n\r\n                 }\r\n\r\n\r\n                 // } else if (this.power <= 0) {\r\n                 //     this.rotationEnabled = true;\r\n                 //     // this.x = this.initialPivotPoint.x;\r\n                 // }\r\n                 if (this.rotationEnabled && TouchHandler.Instance().isTouchMoving) {\r\n                     // console.log(\"stick intra la rotation is enabled!!\");\r\n\r\n                     let localPoint = this.parent.toLocal(\r\n                         new Point(TouchHandler.Instance().position.x, MouseHandler.Instance().position.y));\r\n                     this.opposite = localPoint.y - this.position.y;\r\n                     this.adjacent = localPoint.x - this.position.x;\r\n                     this.rotation = Math.atan2(this.opposite, this.adjacent);\r\n\r\n                     this.clickPointRegistered = false;\r\n                     this.pivot.x = this.initialPivotPoint.x;\r\n                     // if(this.raycastFollower)\r\n                 }*/\r\n            }\r\n            /*  else {\r\n                  console.log(\"stick NU active!!\");\r\n\r\n              }*/\r\n\r\n        }\r\n    }\r\n}","namespace Pockey {\r\n    export module GameModule {\r\n\r\n        import Vector2 = Framework.Utils.Vector2;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export class Puck extends AbstractBall {\r\n            public puckGoals: PuckGoal[];\r\n            public goalYPosition: number;\r\n            public goalHeight: number;\r\n\r\n            constructor() {\r\n                super();\r\n                this.ballType = BallType.Puck;\r\n                this.name = \"Puck\";\r\n                this.ballValue = 2;\r\n\r\n                this.delta += 0.994;\r\n\r\n                this.mass = 0.3;\r\n                console.log(\"puck body id: \" + this.p2Body.id);\r\n            }\r\n\r\n            protected worldPreSolveHandler(): void {\r\n\r\n                if (this.speed() < 18)\r\n                    this.p2Body.velocity = [this.p2Body.velocity[0] * PockeySettings.DELTA, this.p2Body.velocity[1] * PockeySettings.DELTA]\r\n            }\r\n\r\n            protected getCircleMaterial(): p2.Material {\r\n                return P2WorldManager.Instance().getMaterialByID(MaterialType.PUCK_MATERIAL);\r\n            }\r\n\r\n            protected changeDefaultTextureName(): void {\r\n                this.defaultTextureName = \"ball-puck.png\";\r\n            }\r\n\r\n            protected updateTexture(): void {\r\n                this.radius = 25;\r\n                super.updateTexture();\r\n            }\r\n\r\n            public animatePocketCollision(pocketPosition: Vector2, newX: number = null, newY: number = null) {\r\n                let animationSpeed: number = 1 / this.speed();\r\n\r\n                this.x = pocketPosition.x;\r\n                TweenMax.to(this, animationSpeed, {\r\n                    x: newX\r\n                });\r\n            }\r\n\r\n            public update(): void {\r\n\r\n                this.moving = this.p2Body.sleepState != p2.Body.SLEEPING;\r\n\r\n                //person.age >=16 ? 'Yes' : 'No';\r\n                if (this.moving && !this.canBeRemoved) {\r\n\r\n                    let isCloserToGoal: boolean = false;\r\n                    let goalPosition: Vector2 = new Vector2();\r\n                    let p2BodyPos: Vector2 = new Vector2(this.p2Body.position[0], this.p2Body.position[1]);\r\n                    let lastDirection: number = 0;\r\n                    let goalScored: boolean = false;\r\n                    let goalType: BallType;\r\n                    /* this.oldPos.x = this.p2Body.velocity[0];\r\n                     this.oldPos.y = this.p2Body.velocity[1];\r\n                     this.oldPos = this.oldPos.normalise();*/\r\n\r\n                    // _.forEach(this.puckGoals, (goal: PuckGoal) => {\r\n                    //     goalPosition = new Vector2(goal.x, goal.y);\r\n\r\n                    if (p2BodyPos.y > this.goalYPosition && p2BodyPos.y < this.goalYPosition + this.goalHeight) {\r\n                        this.x = p2BodyPos.x;\r\n                        this.y = p2BodyPos.y;\r\n\r\n                        isCloserToGoal = true;\r\n                        let distanceToFinalX: number;\r\n                        let finalPoint: Vector2 = new Vector2();\r\n                        let p2BodyVelocityNormalized: Vector2;\r\n\r\n\r\n                        if (p2BodyPos.x < this.leftLimit) {\r\n                            distanceToFinalX = (this.leftLimit - this.radius) - p2BodyPos.x;\r\n                            p2BodyVelocityNormalized = p2BodyPos.substract(this.oldPos).normalise().multiply(distanceToFinalX);\r\n                            finalPoint.x = this.leftLimit - this.radius - 3;\r\n                            goalScored = true;\r\n                            goalType = this.puckGoals[0].type;\r\n\r\n                        }\r\n                        else if (p2BodyPos.x > this.rightLimit) {\r\n                            distanceToFinalX = p2BodyPos.x - (this.rightLimit + this.radius);\r\n                            p2BodyVelocityNormalized = p2BodyPos.substract(this.oldPos).normalise().multiply(distanceToFinalX);\r\n                            finalPoint.x = this.rightLimit + this.radius + 3;\r\n                            goalScored = true;\r\n                            goalType = this.puckGoals[1].type;\r\n                        }\r\n\r\n                        if (goalScored) {\r\n\r\n                            // return;\r\n                            this.canBeRemoved = true;\r\n\r\n                            P2WorldManager.Instance().world.removeBody(this.p2Body);\r\n\r\n                            SignalsManager.DispatchSignal(PockeySignalTypes.BALL_IN_POCKET, [this.ballType, goalType]);\r\n\r\n\r\n                            finalPoint.y = this.y - p2BodyVelocityNormalized.y;\r\n\r\n                            if (finalPoint.y < this.goalYPosition + this.radius) {\r\n                                finalPoint.y = this.goalYPosition + this.radius;\r\n                            }\r\n                            if (finalPoint.y > this.goalYPosition + this.goalHeight - this.radius) {\r\n                                finalPoint.y = this.goalYPosition + this.goalHeight - this.radius\r\n                            }\r\n\r\n                            let duration: number = 1 / (this.speed() / 60);\r\n                            duration *= 2;\r\n                            if (duration > 1.8)\r\n                                duration = 1.8;\r\n                            // if (finalPoint.x < this.goalYPosition + this.radius) {\r\n                            //     finalPoint.y = this.goalYPosition + this.radius;\r\n                            // }\r\n                            // if (finalPoint.y > this.goalYPosition + this.goalHeight - this.radius) {\r\n                            //     finalPoint.y = this.goalYPosition + this.goalHeight - this.radius;\r\n                            // }\r\n\r\n                            this.animationInProgress = true;\r\n                            let tl: TimelineMax = new TimelineMax();\r\n                            tl.add(TweenMax.to(this, duration, {\r\n                                x: finalPoint.x,\r\n                                y: finalPoint.y,\r\n                                onComplete: this.declareAnimationFinished.bind(this)\r\n                            }), 0);\r\n                            tl.add(TweenMax.to(this.ballShadow.scale, duration, {\r\n                                x: 0.8,\r\n                                y: 0.8,\r\n                                ease: Linear.easeNone\r\n                            }), 0);\r\n                            tl.add(TweenMax.to(this.ballShadow, duration, {\r\n                                x: finalPoint.x,\r\n                                y: finalPoint.y,\r\n                                ease: Linear.easeNone\r\n                            }), 0);\r\n                            tl.add(TweenMax.to(this.scale, duration, {\r\n                                x: 0.92,\r\n                                y: 0.92\r\n                            }), 0);\r\n\r\n\r\n                            // let distanceToFinalX:number =\r\n                        }\r\n\r\n                    }\r\n\r\n                    /* if (pocketPosition.distanceTo(p2BodyPos) <= (this.radius + pocket.radius + 8)) {\r\n                         isCloserToGoal = true;\r\n\r\n                         if (pocketPosition.distanceTo(p2BodyPos) <= (pocket.radius + 1)) {\r\n\r\n                             this.canBeRemoved = true;\r\n                             P2WorldManager.Instance().world.removeBody(this.p2Body);\r\n\r\n                             SignalsManager.DispatchSignal(PockeySignalTypes.BALL_IN_POCKET, [this.ballType]);\r\n\r\n                             // P2WorldManager.Instance().world.remove(this.p2Body);\r\n\r\n                             this.x = p2BodyPos.x;\r\n                             this.y = p2BodyPos.y;\r\n\r\n                             let closestDistance: number = 3000;\r\n                             let distanceToNextClosestPoint: number = 3000;\r\n                             let pointId: number = 0;\r\n                             let nextPointId: number = 0;\r\n                             let direction: number = 0;\r\n                             let closestPoint: Vector2 = new Vector2();\r\n                             let nextClosestPoint2: Vector2 = new Vector2();\r\n\r\n                             closestPoint.x = pocket.x + this.oldPos.x;\r\n                             closestPoint.y = pocket.y + this.oldPos.y;\r\n                             closestPoint.x = closestPoint.x / 2 + p2BodyPos.x / 2;\r\n                             closestPoint.y = closestPoint.y / 2 + p2BodyPos.y / 2;\r\n\r\n                             nextClosestPoint2.x = p2BodyPos.x + this.oldPos.x * PockeySettings.BALL_RADIUS * 2;\r\n                             nextClosestPoint2.y = p2BodyPos.y + this.oldPos.y * PockeySettings.BALL_RADIUS * 2;\r\n\r\n                             let finalTouchPoint: Vector2 = new Vector2(closestPoint.x, closestPoint.y);\r\n                             _.forEach(pocket.touchPoints, (touchPoint: Vector2, id: number) => {\r\n                                 let newDist: number = closestPoint.distanceTo(touchPoint);\r\n                                 let dirDist: number = nextClosestPoint2.distanceTo(touchPoint);\r\n\r\n                                 if (newDist < closestDistance) {\r\n                                     closestDistance = newDist;\r\n                                     finalTouchPoint = new Vector2(touchPoint.x, touchPoint.y);\r\n                                     pointId = id;\r\n                                 }\r\n\r\n                                 if (dirDist < distanceToNextClosestPoint) {\r\n                                     distanceToNextClosestPoint = dirDist;\r\n                                     nextPointId = id;\r\n                                 }\r\n\r\n                             });\r\n\r\n                             closestPoint.x = finalTouchPoint.x;\r\n                             closestPoint.y = finalTouchPoint.y;\r\n\r\n                             let touchPointsArrayLength: number = pocket.touchPoints.length;\r\n                             let clockwiseDistance: number = 0;\r\n                             let counterclockDistance: number = 0;\r\n                             let idCounter: number = pointId;\r\n\r\n                             if (nextPointId > pointId) {\r\n                                 clockwiseDistance = nextPointId - pointId;\r\n                                 let tempDist: number = 0;\r\n                                 for (let i = 0; i < touchPointsArrayLength; i++) {\r\n                                     tempDist++;\r\n                                     idCounter--;\r\n                                     if (idCounter < 0)\r\n                                         idCounter = touchPointsArrayLength - 1;\r\n\r\n                                     if (idCounter == nextPointId)\r\n                                         counterclockDistance = tempDist;\r\n                                 }\r\n\r\n                                 if (counterclockDistance < clockwiseDistance)\r\n                                     direction = -1;\r\n                                 else if (counterclockDistance > clockwiseDistance)\r\n                                     direction = 1;\r\n                                 else\r\n                                     direction = 0;\r\n                             }\r\n                             else {\r\n\r\n                                 clockwiseDistance = pointId - nextPointId;\r\n                                 let tempDist: number = 0;\r\n                                 idCounter = nextPointId;\r\n                                 for (let i = 0; i < touchPointsArrayLength; i++) {\r\n                                     tempDist++;\r\n                                     idCounter--;\r\n                                     if (idCounter < 0)\r\n                                         idCounter = touchPointsArrayLength - 1;\r\n\r\n                                     if (idCounter == pointId)\r\n                                         counterclockDistance = tempDist;\r\n                                 }\r\n\r\n                                 if (clockwiseDistance < counterclockDistance)\r\n                                     direction = -1;\r\n                                 else if (clockwiseDistance > counterclockDistance)\r\n                                     direction = 1;\r\n                                 else\r\n                                     direction = 0;\r\n                             }\r\n                             lastDirection = direction;\r\n\r\n                             let bezierPositions: Point[] = [];\r\n                             let testids: number[] = [];\r\n                             idCounter = pointId;\r\n\r\n                             if (direction == -1) {\r\n                                 for (let i = 0; i < touchPointsArrayLength - 1; i++) {\r\n                                     testids.push(idCounter);\r\n                                     bezierPositions[i] = new Point(pocket.touchPoints[idCounter].x, pocket.touchPoints[idCounter].y);\r\n                                     idCounter--;\r\n                                     if (idCounter < 0)\r\n                                         idCounter = touchPointsArrayLength - 1;\r\n\r\n                                 }\r\n                                 bezierPositions.shift();\r\n\r\n                             }\r\n                             else if (direction == 1) {\r\n                                 for (let i = 0; i < touchPointsArrayLength; i++) {\r\n\r\n                                     testids.push(idCounter);\r\n                                     bezierPositions[i] = new Point(pocket.touchPoints[idCounter].x, pocket.touchPoints[idCounter].y);\r\n\r\n                                     idCounter++;\r\n                                     if (idCounter > touchPointsArrayLength - 1)\r\n                                         idCounter = 0;\r\n\r\n                                 }\r\n                                 bezierPositions.shift();\r\n\r\n                             }\r\n                             else if (direction == 0) {\r\n\r\n                                 direction = Math.round(Math.random() * 1) - 1;\r\n                                 lastDirection = direction;\r\n                                 if (direction == 0)\r\n                                     direction = 1;\r\n\r\n\r\n                                 idCounter = nextPointId;\r\n                                 bezierPositions.push(new Point(pocket.touchPoints[pointId].x, pocket.touchPoints[pointId].y));\r\n                                 bezierPositions.push(new Point(pocket.touchPoints[nextPointId].x, pocket.touchPoints[nextPointId].y));\r\n\r\n                                 for (let i = 0; i < touchPointsArrayLength - counterclockDistance; i++) {\r\n\r\n                                     if (i == 1) {\r\n\r\n                                         let tempPoint: Point = new Point(\r\n                                             pocket.touchPoints[nextPointId].x / 2 + pocket.touchPoints[idCounter].x / 2,\r\n                                             pocket.touchPoints[nextPointId].y / 2 + pocket.touchPoints[idCounter].y / 2\r\n                                         );\r\n\r\n                                         tempPoint = new Point(\r\n                                             tempPoint.x / 2 + pocket.touchPoints[nextPointId].x / 2,\r\n                                             tempPoint.y / 2 + pocket.touchPoints[nextPointId].y / 2\r\n                                         );\r\n                                         tempPoint = new Point(\r\n                                             tempPoint.x / 2 + pocket.touchPoints[nextPointId].x / 2,\r\n                                             tempPoint.y / 2 + pocket.touchPoints[nextPointId].y / 2\r\n                                         );\r\n                                         tempPoint = new Point(\r\n                                             tempPoint.x / 2 + pocket.touchPoints[nextPointId].x / 2,\r\n                                             tempPoint.y / 2 + pocket.touchPoints[nextPointId].y / 2\r\n                                         );\r\n                                         bezierPositions.push(tempPoint);\r\n                                         testids.push(idCounter);\r\n                                     }\r\n\r\n                                     idCounter -= direction;\r\n                                     if (idCounter > touchPointsArrayLength - 1)\r\n                                         idCounter = 0;\r\n                                     if (idCounter < 0)\r\n                                         idCounter = touchPointsArrayLength - 1;\r\n                                 }\r\n\r\n                             }\r\n                             bezierPositions.push(new Point(pocket.finalPoint.x, pocket.finalPoint.y));\r\n\r\n                             let duration: number = 1 / (this.speed() / 60);\r\n                             if (lastDirection == 0)\r\n                                 duration *= 2.4;\r\n                             else\r\n                                 duration *= 2;\r\n                             if (duration > 1.8)\r\n                                 duration = 1.8;\r\n\r\n                             this.animationInProgress = true;\r\n                             let tl: TimelineMax = new TimelineMax();\r\n                             tl.add(TweenMax.to(this, duration, {\r\n                                 bezier: bezierPositions,\r\n                                 ease: Linear.easeNone,\r\n                                 onUpdate: this.onAnimationUpdate.bind(this),\r\n                                 onUpdateParams: [pocket.x, pocket.y, pocket.radius],\r\n                                 onComplete: this.declareAnimationFinished.bind(this)\r\n                             }), 0);\r\n\r\n                             tl.add(TweenMax.to(this.scale, duration - duration / 3, {\r\n                                 x: 0.8,\r\n                                 y: 0.8,\r\n                                 ease: Linear.easeNone\r\n                             }), 0);\r\n                             tl.add(TweenMax.to(this, (duration - duration / 3), {\r\n                                 alpha: 0,\r\n                                 ease: Linear.easeNone\r\n                             }), duration / 3);\r\n\r\n\r\n                             return;\r\n                         }\r\n                     }*/\r\n\r\n                    // });\r\n\r\n                    if (this.canBeRemoved)\r\n                        return;\r\n\r\n                    /* if (!isCloserToGoal) {\r\n\r\n                         if (p2BodyPos.x + this.radius > this.rightLimit) {\r\n                             p2BodyPos.x = this.rightLimit - this.radius;\r\n                         }\r\n                         else if (p2BodyPos.x - this.radius < this.leftLimit) {\r\n                             p2BodyPos.x = this.leftLimit + this.radius;\r\n                         }\r\n                         if (p2BodyPos.y + this.radius > this.downLimit) {\r\n                             p2BodyPos.y = this.downLimit - this.radius;\r\n                         }\r\n                         else if (p2BodyPos.y - this.radius < this.upLimit) {\r\n                             p2BodyPos.y = this.upLimit + this.radius;\r\n                         }\r\n                     }*/\r\n\r\n                    this.x = p2BodyPos.x;\r\n                    this.y = p2BodyPos.y;\r\n\r\n                    this.ballShadow.x = p2BodyPos.x;\r\n                    this.ballShadow.y = p2BodyPos.y;\r\n\r\n                    this.oldPos.x = this.x;\r\n                    this.oldPos.y = this.y;\r\n                }\r\n            }\r\n\r\n            protected declareAnimationFinished(): void {\r\n                this.animationInProgress = false;\r\n                // this.visible = false;\r\n                // if (this.parent)\r\n                //     this.parent.removeChild(this);\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n","namespace Pockey {\r\n    export module GameModule {\r\n\r\n\r\n        export class WhiteBall extends AbstractBall {\r\n            private ballWasShot: boolean = false;\r\n\r\n            constructor() {\r\n                super();\r\n                this.ballType = BallType.White;\r\n                this.name = \"WhiteBall\";\r\n                // this.tintBall(0xffffff);\r\n                // (this.getChildAt(0) as Graphics).tint = 0xff9900;\r\n                // this.ci\r\n            }\r\n\r\n            protected worldPreSolveHandler(): void {\r\n                if (this.ballWasShot) {\r\n                    this.ballWasShot = false;\r\n                    this.p2Body.velocity = [this.velocity.x, this.velocity.y];\r\n                }\r\n                super.worldPreSolveHandler();\r\n\r\n\r\n                // if (this.speed() < 100)\r\n                //     this.p2Body.velocity = [this.p2Body.velocity[0] * PockeySettings.DELTA, this.p2Body.velocity[1] * PockeySettings.DELTA]\r\n            }\r\n\r\n\r\n            onShoot(rotation: number, power: number): void {\r\n                // this.rotation = rotation;\r\n                // this.moving = true;\r\n                super.onShoot(rotation, power);\r\n                this.ballWasShot = true;\r\n\r\n\r\n                // this.p2Body.wakeUp();\r\n                // this.p2Body.velocity = [this.velocity.x, this.velocity.y];\r\n                // console.log(\"speed: \" + this.velocity.x, this.velocity.y);\r\n                // this.p2Body.angularVelocity =   0;\r\n                // this.p2Body.applyImpulse( [this.velocity.x,  this.velocity.y], [this.velocity.x,  this.velocity.y])\r\n                // this.p2Body.force = [this.power, this.power];\r\n\r\n                // this.p2Body.force = [this.power, this.velocity.y * power];\r\n                // this.p2Body.angularForce = 80;//[this.velocity.x, this.velocity.y];\r\n                // this.p2Body.force = [this.power, this.power];//[this.velocity.x, this.velocity.y];\r\n\r\n\r\n            }\r\n\r\n\r\n            update(): void {\r\n              /*  if(this.parent)\r\n                    console.log(\"white ball parent name: \" + this.parent.name);*/\r\n                super.update();\r\n                // console.log(\"shoot speed: \" + this.speed());\r\n                // console.log(\"p2 velocity: \" + this.p2Body.velocity[0], this.p2Body.velocity[1]);\r\n\r\n                // console.log(\"speed: \" + this.speed());\r\n\r\n            }\r\n\r\n// protected registerSignals() {\r\n            // super.registerSignals();\r\n\r\n            // SignalsManager.AddSignalCallback(PockeySignalTypes.SHOOT_BALL, this.onShoot.bind(this));\r\n            // }\r\n\r\n\r\n        }\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/1/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        import Sprite = PIXI.Sprite;\r\n        import Container = PIXI.Container;\r\n\r\n        export class PuckGoal extends Container {\r\n\r\n\r\n            public type: BallType;\r\n\r\n            private goalRightPath: string = \"goalTop_right.png\";\r\n            private goalTopRightPath: string = \"goalTop_righttTopper.png\";\r\n\r\n            private goalLeftPath: string = \"goalTop_left.png\";\r\n            private goalTopLefttPath: string = \"goalTop_leftTopper.png\";\r\n\r\n            private goalGraphics: Sprite;\r\n            private goalGraphicsAnimator: Sprite;\r\n            private goalTopGraphics: Sprite;\r\n            private animationStarted: boolean = false;\r\n            private goalAnimationTween: TweenMax;\r\n            // private _caca:number\r\n            // private _tint:number;\r\n            constructor(side: string) {\r\n                super();\r\n\r\n                if (side == \"left\") {\r\n                    this.goalGraphics = new Sprite(PIXI.Texture.fromFrame(this.goalLeftPath));\r\n                    this.goalGraphicsAnimator = new Sprite(PIXI.Texture.fromFrame(this.goalLeftPath));\r\n                    this.goalTopGraphics = new Sprite(PIXI.Texture.fromFrame(this.goalTopLefttPath));\r\n                }\r\n                else {\r\n                    this.goalGraphics = new Sprite(PIXI.Texture.fromFrame(this.goalRightPath));\r\n                    this.goalGraphicsAnimator = new Sprite(PIXI.Texture.fromFrame(this.goalRightPath));\r\n                    this.goalTopGraphics = new Sprite(PIXI.Texture.fromFrame(this.goalTopRightPath));\r\n                }\r\n\r\n                this.addChild(this.goalGraphics);\r\n                this.goalGraphicsAnimator.visible = false;\r\n                this.addChild(this.goalGraphicsAnimator);\r\n                this.addChild(this.goalTopGraphics);\r\n            }\r\n\r\n            set tint(color: number) {\r\n                this.goalGraphics.tint = color;\r\n                // this._tint = value;\r\n            }\r\n\r\n            public animate(): void {\r\n                if (!this.animationStarted) {\r\n                    this.animationStarted = true;\r\n                    this.goalGraphicsAnimator.visible = true;\r\n                    this.goalGraphicsAnimator.alpha = 0;\r\n                    this.goalAnimationTween = TweenMax.to(this.goalGraphicsAnimator, 0.2, {\r\n                        alpha: 0.68,\r\n                        yoyo: true,\r\n                        repeat: -1\r\n                    });\r\n                }\r\n            }\r\n\r\n            public stopAnimation(): void {\r\n                if (this.animationStarted) {\r\n                    this.animationStarted = false;\r\n                    this.goalGraphicsAnimator.visible = false;\r\n                    if (this.goalAnimationTween && this.goalAnimationTween.isActive())\r\n                        this.goalAnimationTween.kill();\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../../../Framework/Utils/Rect.ts\"/>\r\n///<reference path=\"decal.ts\"/>\r\n///<reference path=\"stick.ts\"/>\r\n///<reference path=\"stick-mobile.ts\"/>\r\n///<reference path=\"balls/puck.ts\"/>\r\n///<reference path=\"balls/white-ball.ts\"/>\r\n///<reference path=\"puck-goal.ts\"/>\r\n\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/16/2018\r\n */\r\nimport Container = PIXI.Container;\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        import Sprite = PIXI.Sprite;\r\n        import Graphics = PIXI.Graphics;\r\n        import Point = PIXI.Point;\r\n        import Vector2 = Framework.Utils.Vector2;\r\n        import Line = Framework.Utils.Line;\r\n        import Rect = Framework.Utils.Rect;\r\n        import Rectangle = PIXI.Rectangle;\r\n        import Settings = Framework.Settings;\r\n\r\n        export class PoolTable extends Container {\r\n\r\n\r\n            private poolTableBackground: Sprite;\r\n            private poolTableBackgroundBottom: Sprite;\r\n            private poolTableOverFrame: Sprite;\r\n            private decalIcon: Decal;\r\n\r\n\r\n            private ballsDistance: number = 108;\r\n\r\n            public leftGoal: PuckGoal;\r\n            public rightGoal: PuckGoal;\r\n\r\n            private playerStartXPos: number = 736;\r\n            private opponentStartXPos: number = 1223;\r\n\r\n\r\n            public leftBallsArray: AbstractBall[];\r\n            public rightBallsArray: AbstractBall[];\r\n\r\n            public balls: AbstractBall[];\r\n\r\n            private playGround: Rectangle;\r\n            public leftLimit: number;\r\n            public rightLimit: number;\r\n            public upLimit: number;\r\n            public downLimit: number;\r\n\r\n            private mouseXOffset: number = 0;\r\n            private mouseYOffset: number = 0;\r\n\r\n            public puck: Puck;\r\n            public whiteBall: WhiteBall;\r\n            public ballPositionCircle: Container;\r\n            public ballPositionCircleOnRaycast: Container;\r\n            public raycastFollower: Sprite;\r\n\r\n            public poolStick: Stick;\r\n\r\n            public BallPositionCircleRadius: number;\r\n            public ballAnimationHolder: Container;\r\n\r\n            private ballCanMove: boolean = false;\r\n\r\n            public ballPocket1: Sprite;\r\n            public ballPocket2: Sprite;\r\n            public ballPocket3: Sprite;\r\n            public ballPocket4: Sprite;\r\n\r\n            // public pockets: Sprite[];\r\n            public limits: Line[];\r\n            public pockets: Pocket[];\r\n            // private pocketsZIndex:number = 0;\r\n\r\n            // private gameMechanics: GameMechanics;\r\n            public whiteBallReflectionArrow: Container;\r\n            public otherBallReflectionArrow: Container;\r\n\r\n            private shadowsHolder: Container;\r\n\r\n            public ballsHolder: Container;\r\n\r\n            constructor() {\r\n                super();\r\n                this.name = \"poolTable\";\r\n                this.createElements();\r\n                // this.startGameMechanics();\r\n            }\r\n\r\n//472, 284\r\n//472, 284\r\n//472, 284\r\n//472, 284\r\n//472, 284\r\n            private createElements(): void {\r\n                this.balls = [];\r\n\r\n                //poolTableBackground\r\n                this.poolTableBackground = new Sprite(PIXI.Texture.fromFrame(\"table-default.png\"));\r\n                this.poolTableBackground.name = \"poolTableBackground\";\r\n                this.poolTableBackground.x = -this.poolTableBackground.width / 2;//472;\r\n                this.poolTableBackground.y = -this.poolTableBackground.height / 2;//284;\r\n                this.addChild(this.poolTableBackground);\r\n                ////end poolTableBackground\r\n\r\n\r\n                PockeySettings.MIDDLE_TABLE_POS = new Vector2(0, 0);\r\n                // PockeySettings.MIDDLE_TABLE_POS = new Vector2(this.poolTableBackground.x + this.poolTableBackground.width / 2, this.poolTableBackground.y + this.poolTableBackground.height / 2);\r\n                // console.log(\"PockeySettings.MIDDLE_TABLE_POS: \" + PockeySettings.MIDDLE_TABLE_POS.x, PockeySettings.MIDDLE_TABLE_POS.y);\r\n\r\n                PockeySettings.MIDDLE_TABLE_LEFT_POS = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x - 244, PockeySettings.MIDDLE_TABLE_POS.y);\r\n                PockeySettings.MIDDLE_TABLE_RIGHT_POS = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x + 244, PockeySettings.MIDDLE_TABLE_POS.y);\r\n\r\n\r\n                // PockeySettings.MIDDLE_TABLE_POS.y = ;\r\n                // PockeySettings.MIDDLE_TABLE_POS.x_LEFT = ;\r\n                // PockeySettings.MIDDLE_TABLE_POS.x_RIGHT = PockeySettings.MIDDLE_TABLE_POS.x + 200;\r\n                //\r\n                // let leftAnimationPoint = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x_LEFT, PockeySettings.MIDDLE_TABLE_POS.y);\r\n                // let rightAnimationPoint = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x_RIGHT, PockeySettings.MIDDLE_TABLE_POS.y);\r\n                // let centerAnimationPoint = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x, PockeySettings.MIDDLE_TABLE_POS.y);\r\n\r\n                //poolTableOverFrame\r\n                this.poolTableOverFrame = new Sprite(PIXI.Texture.fromFrame(\"table_border-1.png\"));\r\n                this.poolTableOverFrame.name = \"poolTableOverFrame\";\r\n                this.poolTableOverFrame.x = PockeySettings.MIDDLE_TABLE_POS.x - this.poolTableOverFrame.width / 2;\r\n                this.poolTableOverFrame.y = PockeySettings.MIDDLE_TABLE_POS.y - this.poolTableOverFrame.height / 2;\r\n                this.addChild(this.poolTableOverFrame);\r\n\r\n                //end poolTableOverFrame\r\n                this.ballAnimationHolder = new Container();\r\n                this.addChild(this.ballAnimationHolder);\r\n\r\n\r\n                //poolTableBackgroundBottom\r\n                this.poolTableBackgroundBottom = new Sprite(PIXI.Texture.fromFrame(Settings.desktopAssetsPath + \"Images/table_bottom.png\"));\r\n                this.poolTableBackgroundBottom.name = \"poolTableBackgroundBottom\";\r\n                this.poolTableBackgroundBottom.x = -this.poolTableBackgroundBottom.width / 2;//485;\r\n                this.poolTableBackgroundBottom.y = -this.poolTableBackgroundBottom.height / 2;//300;\r\n                // this.poolTableBackgroundBottom.alpha = 0.6;\r\n                this.addChild(this.poolTableBackgroundBottom);\r\n\r\n                ////end poolTableBackgroundBottom\r\n\r\n\r\n                //play ground\r\n                this.playGround = new Rectangle(-970 / 2, -484 / 2, 970, 484);//Container();\r\n                // this.playGround.name = \"playGround\";\r\n                // this.playGround.interactive = true;\r\n\r\n                // let playGroundGraphics: Graphics = new Graphics();\r\n                // playGroundGraphics.name = \"playGroundGraphics\";\r\n                // playGroundGraphics.beginFill(0xff9900, 1);\r\n                // playGroundGraphics.drawRect(0, 0, 970, 484);\r\n                // playGroundGraphics.endFill();\r\n                // this.playGround.addChild(playGroundGraphics);\r\n                // this.playGround.x = 495;\r\n                // this.playGround.y = 307;\r\n                // this.addChild(this.playGround);\r\n                this.setTableLimits();\r\n\r\n                /////end play ground\r\n\r\n                //Pockets\r\n                this.addPockets();\r\n                //end pockets\r\n\r\n                // decal icon\r\n                this.decalIcon = new Decal();\r\n                this.decalIcon.name = \"decalIcon\";\r\n                this.decalIcon.x = PockeySettings.MIDDLE_TABLE_POS.x;\r\n                this.decalIcon.y = PockeySettings.MIDDLE_TABLE_POS.y;\r\n                this.addChild(this.decalIcon);\r\n                // this.decalIcon.SetDecalIcon(DecalType.AstroJunkie);\r\n                //end decal icon\r\n\r\n                this.shadowsHolder = new Container();\r\n                this.addChild(this.shadowsHolder);\r\n\r\n                this.ballsHolder = new Container();\r\n                this.ballsHolder.name = \"ballsHolder\";\r\n\r\n                this.addChild(this.ballsHolder);\r\n                // puck\r\n                //\r\n                this.puck = new Puck();\r\n                this.puck.ballAnimationHolder = this.ballAnimationHolder;\r\n\r\n                this.puck.createBallShadow();\r\n                // this.puck.name = \"puck\";\r\n                this.puck.tintBall(PockeySettings.PUCK_COLOR);\r\n\r\n                // this.puck.anchor.set(0.5, 0.5);\r\n                this.puck.x = PockeySettings.MIDDLE_TABLE_POS.x;\r\n                this.puck.y = PockeySettings.MIDDLE_TABLE_POS.y;\r\n                this.puck.ballPosition = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x, PockeySettings.MIDDLE_TABLE_POS.y);\r\n                this.puck.setWallLimits(this.leftLimit, this.rightLimit, this.upLimit, this.downLimit);\r\n                // this.puck.setLineLimits(this.limits);\r\n                // this.puck.setPockets(this.pockets);\r\n                this.addBallToBallsHolder(this.puck);\r\n                this.balls.push(this.puck);\r\n                // this.addChild(this.puck);\r\n                //end puck\r\n\r\n                //rightGoal\r\n                this.rightGoal = new PuckGoal(\"right\");\r\n                // new Sprite(PIXI.Texture.fromFrame(\"goalTop_right.png\"));\r\n                // this.rightGoal.tint = PockeySettings.OPPONENT_COLOR;\r\n                this.rightGoal.name = \"rightGoal\";\r\n                this.rightGoal.x = PockeySettings.MIDDLE_TABLE_POS.x + 487;\r\n                this.rightGoal.y = PockeySettings.MIDDLE_TABLE_POS.y - 116;\r\n                this.addChild(this.rightGoal);\r\n                //end rightGoal\r\n\r\n                // rightGoalTop\r\n                // this.rightGoalTop = new Sprite(PIXI.Texture.fromFrame(\"goalTop_righttTopper.png\"));\r\n                // this.rightGoalTop.name = \"rightGoalTop\";\r\n                // this.rightGoalTop.x = this.rightGoal.x;\r\n                // this.rightGoalTop.y = this.rightGoal.y;\r\n                // this.addChild(this.rightGoalTop);\r\n                //end rightGoalTop\r\n\r\n                //leftGoal\r\n                this.leftGoal = new PuckGoal(\"left\");\r\n\r\n                // new Sprite(PIXI.Texture.fromFrame(\"goalTop_left.png\"));\r\n                // this.leftGoal.tint = PockeySettings.PLAYER_COLOR;\r\n\r\n                this.leftGoal.name = \"leftGoal\";\r\n                this.leftGoal.x = PockeySettings.MIDDLE_TABLE_POS.x - 483 - this.leftGoal.width;\r\n                this.leftGoal.y = PockeySettings.MIDDLE_TABLE_POS.y - 116;\r\n\r\n                this.addChild(this.leftGoal);\r\n\r\n                this.puck.puckGoals = [this.leftGoal, this.rightGoal];\r\n                this.puck.goalYPosition = this.leftGoal.y;\r\n                this.puck.goalHeight = this.leftGoal.height;\r\n                //end leftGoal\r\n\r\n                // leftGoalTop\r\n                // this.leftGoalTop = new Sprite(PIXI.Texture.fromFrame(\"goalTop_leftTopper.png\"));\r\n                // this.leftGoalTop.name = \"leftGoalTop\";\r\n                // this.leftGoalTop.x = this.leftGoal.x;\r\n                // this.leftGoalTop.y = this.leftGoal.y;\r\n                // this.addChild(this.leftGoalTop);\r\n                //end leftGoalTop\r\n\r\n                //ball position when raycasting\r\n                this.ballPositionCircleOnRaycast = new Container();\r\n                this.ballPositionCircleOnRaycast.name = \"ballPositionCircleOnRaycast\";\r\n                let graphics: Graphics = new Graphics();\r\n                graphics.name = \"graphics\";\r\n                graphics.lineStyle(4, 0xffffff);\r\n                graphics.beginFill(0xffffff, 0);\r\n                // graphics.lineStyle(2, 0xffffff)\r\n                graphics.drawCircle(0, 0, PockeySettings.BALL_RADIUS + 6);\r\n                this.ballPositionCircleOnRaycast.addChild(graphics);\r\n                // this.ballPositionCircleOnRaycast.x = 100;\r\n                // this.ballPositionCircleOnRaycast.y = 100;\r\n                this.ballPositionCircleOnRaycast.visible = false;\r\n                this.addChild(this.ballPositionCircleOnRaycast);\r\n\r\n                // this.ballPositionCircleOnRaycast.tint = 0x000000;\r\n\r\n\r\n                // this.addChild(this.whiteBall);\r\n\r\n                // this.ballCanMove = true;\r\n                //end ball position\r\n\r\n\r\n                //white ball\r\n                this.whiteBall = new WhiteBall();\r\n                this.whiteBall.ballAnimationHolder = this.ballAnimationHolder;\r\n\r\n                this.whiteBall.createBallShadow();\r\n                this.whiteBall.ballPosition = new Vector2(PockeySettings.MIDDLE_TABLE_LEFT_POS.x, PockeySettings.MIDDLE_TABLE_POS.y);\r\n                this.whiteBall.setWallLimits(this.leftLimit, this.rightLimit, this.upLimit, this.downLimit);\r\n                // this.whiteBall.setLineLimits(this.limits);\r\n                this.whiteBall.setPockets(this.pockets);\r\n\r\n                // pune-l pe mijloc si vezi cum e cu shadowul de jos\r\n                // this.whiteBall.setWallLimits(this.leftLimit, this.rightLimit, this.upLimit, this.downLimit);\r\n                // this.whiteBall.setPockets(this.pockets);\r\n                // this.whiteBall.pocketsFinalPoints = [PockeySettings.MIDDLE_TABLE_POS, PockeySettings.MIDDLE_TABLE_LEFT_POS, PockeySettings.MIDDLE_TABLE_RIGHT_POS];\r\n                this.balls.push(this.whiteBall);\r\n                // this.whiteBall.x = this.playerStartXPos;\r\n                // this.whiteBall.y = PockeySettings.MIDDLE_TABLE_POS.y;\r\n                this.addBallToBallsHolder(this.whiteBall);\r\n                // this.BallPositionCircleRadius = this.whiteBall.radius;\r\n\r\n                //end white ball\r\n\r\n                //rightBalls\r\n                let ball: AbstractBall;\r\n                this.rightBallsArray = [];\r\n                this.leftBallsArray = [];\r\n                let angle: number;\r\n\r\n                _.forEach(_.range(PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER), (id: number) => {\r\n                    // playerBall = new Sprite(PIXI.Texture.fromFrame(\"ball-colorme.png\"));\r\n                    ball = new AbstractBall(\"right\", id.toString());\r\n                    ball.ballAnimationHolder = this.ballAnimationHolder;\r\n                    ball.createBallShadow();\r\n                    // ball.tintBall(PockeySettings.PLAYER_COLOR);\r\n                    ball.setWallLimits(this.leftLimit, this.rightLimit, this.upLimit, this.downLimit);\r\n                    // ball.setLineLimits(this.limits);\r\n                    ball.setPockets(this.pockets);\r\n\r\n\r\n                    // ball.name = \"PlayerBall_\" + id.toString();\r\n                    this.balls.push(ball);\r\n                    this.rightBallsArray.push(ball);\r\n                    angle = (id / (PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER / 2)) * Math.PI;\r\n\r\n                    ball.ballPosition = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x + (this.ballsDistance * Math.cos(angle)),\r\n                        PockeySettings.MIDDLE_TABLE_POS.y + (this.ballsDistance * Math.sin(angle)));\r\n                    // ball.anchor.set(0.5, 0.5);\r\n                    // ball.x = PockeySettings.MIDDLE_TABLE_POS.x + (this.ballsDistance * Math.cos(angle));\r\n                    // ball.y = PockeySettings.MIDDLE_TABLE_POS.y + (this.ballsDistance * Math.sin(angle));\r\n                    this.addBallToBallsHolder(ball);\r\n                });\r\n                //end right balls\r\n\r\n                //left balls\r\n                // this.opponentBallsArray = [];\r\n                // let opponentBall: Sprite;\r\n\r\n                _.forEach(_.range(PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER), (id: number) => {\r\n                    // opponentBall = new Sprite(PIXI.Texture.fromFrame(\"ball-colorme.png\"));\r\n                    ball = new AbstractBall(\"left\", id.toString());\r\n                    ball.ballAnimationHolder = this.ballAnimationHolder;\r\n                    ball.createBallShadow();\r\n\r\n                    // ball.tint = this.opponentColor;\r\n                    // ball.tintBall(PockeySettings.OPPONENT_COLOR);\r\n                    ball.setWallLimits(this.leftLimit, this.rightLimit, this.upLimit, this.downLimit);\r\n                    // ball.setLineLimits(this.limits);\r\n                    ball.setPockets(this.pockets);\r\n\r\n                    // ball.name = \"OpponentBall_\" + id.toString();\r\n                    this.balls.push(ball);\r\n                    this.leftBallsArray.push(ball);\r\n                    angle = (id / (PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER / 2)) * Math.PI + Math.PI / PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER;\r\n\r\n                    // ball.x =\r\n                    // ball.y = ;\r\n                    ball.ballPosition = new Vector2(PockeySettings.MIDDLE_TABLE_POS.x + (this.ballsDistance * Math.cos(angle)),\r\n                        PockeySettings.MIDDLE_TABLE_POS.y + (this.ballsDistance * Math.sin(angle)));\r\n\r\n\r\n                    this.addBallToBallsHolder(ball);\r\n                });\r\n                //end left balls\r\n\r\n\r\n                //ball position\r\n                this.ballPositionCircle = new Container();\r\n                this.ballPositionCircle.name = \"ballPositionCircle\";\r\n                graphics = new Graphics();\r\n                graphics.name = \"graphics\";\r\n                graphics.lineStyle(3, 0xffffff);\r\n                // graphics.beginFill(0x000000, 0);\r\n                // graphics.lineStyle(2, 0xffffff)\r\n                graphics.drawCircle(0, 0, PockeySettings.BALL_RADIUS);\r\n                this.ballPositionCircle.addChild(graphics);\r\n                this.ballPositionCircle.x = 580;\r\n                this.ballPositionCircle.y = 400;\r\n                this.ballPositionCircle.visible = false;\r\n                this.addChild(this.ballPositionCircle);\r\n\r\n\r\n                this.raycastFollower = new Sprite();\r\n                graphics = new Graphics();\r\n                graphics.name = \"graphics\"\r\n                graphics.lineStyle(4, 0xffffff);\r\n                graphics.beginFill(0xffffff, 0);\r\n                graphics.drawCircle(0, 0, PockeySettings.BALL_RADIUS - 2);\r\n                graphics.endFill();\r\n                this.raycastFollower.addChild(graphics);\r\n                // this.raycastFollower.position = this.pivot;\r\n                this.raycastFollower.visible = false;\r\n                this.addChild(this.raycastFollower);\r\n\r\n\r\n                this.whiteBallReflectionArrow = new Container();\r\n                this.otherBallReflectionArrow = new Container();\r\n\r\n                _.forEach([this.whiteBallReflectionArrow, this.otherBallReflectionArrow], (arrow: Sprite) => {\r\n\r\n                    let g: Graphics = new Graphics();\r\n                    g.lineStyle(4, 0xffffff);\r\n                    /* if (arrow == this.whiteBallReflectionArrow)\r\n                         g.lineStyle(2, 0xffffff);*/\r\n\r\n                    let sideLength: number = 6;\r\n                    g.moveTo(-sideLength / 2, -sideLength * Math.sqrt(2));\r\n                    g.lineTo(sideLength, 0.2);\r\n                    g.moveTo(-sideLength / 2, sideLength * Math.sqrt(2));\r\n                    g.lineTo(sideLength, -0.2);\r\n\r\n                    arrow.addChild(g);\r\n                    arrow.x = 200;\r\n                    arrow.y = 200;\r\n                    arrow.visible = false;\r\n                    this.addChild(arrow);\r\n                });\r\n\r\n\r\n                //poolStick\r\n                if (Settings.isMobile) {\r\n                    this.poolStick = new StickMobile();\r\n                    this.poolStick.x = -145;\r\n                    this.poolStick.y = 110;\r\n                }\r\n                else {\r\n                    this.poolStick = new Stick();\r\n                    this.poolStick.x = 844;\r\n                    this.poolStick.y = 650;\r\n                }\r\n\r\n                this.poolStick.initialPosition = new Point(this.poolStick.x, this.poolStick.y);\r\n                this.poolStick.startPosition = new Point(this.whiteBall.position.x, this.whiteBall.position.y);\r\n\r\n                this.poolStick.visible = false;\r\n                this.addChild(this.poolStick);\r\n                //end pool stick\r\n\r\n                this.createUpperCollisionPolygon();\r\n                this.createUpperCollisionShadowPolygon();\r\n                this.createBottomCollisionPolygon();\r\n                this.createBottomCollisionShadowPolygon();\r\n\r\n\r\n            }\r\n\r\n            private setTableLimits() {\r\n                this.leftLimit = this.playGround.x;\r\n                this.rightLimit = this.playGround.x + this.playGround.width;\r\n                this.upLimit = this.playGround.y;\r\n                this.downLimit = this.playGround.y + this.playGround.height;\r\n\r\n                // var vertices = [[this.leftLimit, this.upLimit / 2], [this.rightLimit, this.upLimit / 2], [this.rightLimit, this.downLimit / 3], [this.leftLimit, this.downLimit / 3]];\r\n                // var convexShape = new p2.Convex({vertices: vertices});\r\n                // let body = new p2.Body({mass: 0});\r\n                // convexShape.material = new p2.Material(MaterialType.LINE_MATERIAL);\r\n                // body.addShape(convexShape);\r\n                //\r\n                // P2WorldManager.Instance().world.addBody(body);\r\n            }\r\n\r\n            public addBallToBallsHolder(ball: AbstractBall) {\r\n                this.ballsHolder.addChild(ball);\r\n                this.shadowsHolder.addChild(ball.ballShadow);\r\n            }\r\n\r\n            private addPockets() {\r\n                // this.limits = [];\r\n                let rect2A: Rect = this.createRectangle(new Rectangle(-494, 0, 20, 380), 0, MaterialType.PUCK_ONLY_MATERIAL, 0xff9900, \"rect2a\");\r\n                let rect2B: Rect = this.createRectangle(new Rectangle(497, 0, 20, 380), 0, MaterialType.PUCK_ONLY_MATERIAL, 0xff9900, \"rect2b\");\r\n                /*let rect2A: Rect = this.createRectangle(new Rectangle(-494, 0, 20, 380), 0, MaterialType.PUCK_ONLY_MATERIAL, 0xff9900, \"rect2a\");\r\n                let rect2B: Rect = this.createRectangle(new Rectangle(497, 0, 20, 380), 0, MaterialType.PUCK_ONLY_MATERIAL, 0xff9900, \"rect2b\");\r\n*/\r\n\r\n                let rect4A: Rect = this.createRectangle(new Rectangle(-492, -250, 20, 58), 0.7853981634, MaterialType.BALL_ONLY_MATERIAL, 0xffff00, \"rect4a\");\r\n                let rect4B: Rect = this.createRectangle(new Rectangle(492, 250, 20, 58), 0.7853981634, MaterialType.BALL_ONLY_MATERIAL, 0xffff00, \"rect4b\");\r\n                let rect5A: Rect = this.createRectangle(new Rectangle(492, -250, 20, 58), -0.7853981634, MaterialType.BALL_ONLY_MATERIAL, 0xffff00, \"rect5a\");\r\n                let rect5B: Rect = this.createRectangle(new Rectangle(-492, 250, 20, 58), -0.7853981634, MaterialType.BALL_ONLY_MATERIAL, 0xffff00, \"rect5b\");\r\n                let rect7A: Rect = this.createRectangle(new Rectangle(0, -270, 100, 20), 0, MaterialType.BALL_ONLY_MATERIAL, 0xffff00, \"rect7a\");\r\n                let rect7B: Rect = this.createRectangle(new Rectangle(0, 270, 100, 20), 0, MaterialType.BALL_ONLY_MATERIAL, 0xffff00, \"rect7b\");\r\n                // let rect1A = this.createRectangle(new Rectangle(417, 561 - 12, 20, 227), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect1B: Rect = this.createRectangle(new Rectangle(1544, 561 - 12, 20, 227), 0, MaterialType.BALL_MATERIAL);/**/\r\n                /*\r\n                                let rect4A: Rect = this.createRectangle(new Rectangle(486, 309 - 12, 20, 58), 0.7853981634, MaterialType.BALL_ONLY_MATERIAL);\r\n                                let rect4B: Rect = this.createRectangle(new Rectangle(1475, 813 - 12, 20, 58), 0.7853981634, MaterialType.BALL_ONLY_MATERIAL);\r\n                                let rect5A: Rect = this.createRectangle(new Rectangle(1475, 309 - 12, 20, 58), -0.7853981634, MaterialType.BALL_ONLY_MATERIAL);\r\n                                let rect5B: Rect = this.createRectangle(new Rectangle(486, 813 - 12, 20, 58), -0.7853981634, MaterialType.BALL_ONLY_MATERIAL);\r\n                                */\r\n\r\n                // let rect1A = this.createRectangle(new Rectangle(417, 561 - 12, 20, 227), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect1B: Rect = this.createRectangle(new Rectangle(1544, 561 - 12, 20, 227), 0, MaterialType.BALL_MATERIAL);\r\n\r\n                // let rect3A: Rect = this.createRectangle(new Rectangle(486, 415 - 12, 20, 99), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect3B: Rect = this.createRectangle(new Rectangle(1475, 413 - 12, 20, 101), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect3C: Rect = this.createRectangle(new Rectangle(1475, 707 - 12, 20, 102), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect3D: Rect = this.createRectangle(new Rectangle(486, 707 - 12, 20, 102), 0, MaterialType.BALL_MATERIAL);\r\n\r\n                // let rect6A: Rect = this.createRectangle(new Rectangle(737, 309 - 12, 391, 20), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect6B: Rect = this.createRectangle(new Rectangle(1223, 309 - 12, 391, 20), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect6C: Rect = this.createRectangle(new Rectangle(737, 813 - 12, 391, 20), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect6D: Rect = this.createRectangle(new Rectangle(1224, 813 - 12, 392, 20), 0, MaterialType.BALL_MATERIAL);\r\n\r\n                // let rect14A: Rect = this.createRectangle(new Rectangle(442, 437 - 12, 69, 20), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect14B: Rect = this.createRectangle(new Rectangle(1520, 437 - 12, 69, 20), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect14C: Rect = this.createRectangle(new Rectangle(1520, 684 - 12, 69, 20), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect14D: Rect = this.createRectangle(new Rectangle(442, 684 - 12, 69, 20), 0, MaterialType.BALL_MATERIAL);\r\n                // let rect9A : Rect = this.createRectangle(new Rectangle(454,331 - 12,107,20), 26, MaterialType.BALL_MATERIAL, 0xff9900);\r\n                // let rect9B : Rect = this.createRectangle(new Rectangle( 1507,781,107,20), 26, MaterialType.BALL_MATERIAL, 0xff9900);\r\n                // let rect8A: Rect = this.createRectangle(new Rectangle( 507,277-12,107,20), 29, MaterialType.BALL_MATERIAL);\r\n                // let rect8B : Rect = this.createRectangle(new Rectangle( 1454,845-12,107,20), 29, MaterialType.BALL_MATERIAL);\r\n                // let rect10A : Rect = this.createRectangle(new Rectangle( 1453,265,107,20), 15, MaterialType.BALL_MATERIAL);\r\n                // let rect10B : Rect = this.createRectangle(new Rectangle( 507,845-12,107,20), 15, MaterialType.BALL_MATERIAL);\r\n                // let rect11A : Rect = this.createRectangle(new Rectangle( 1508,317,107,20), 18, MaterialType.BALL_MATERIAL, 0xff0000);\r\n                // let rect11B : Rect = this.createRectangle(new Rectangle( 454,791-12,107,20), 18, MaterialType.BALL_MATERIAL);\r\n                // let rect12A: Rect = this.createRectangle(new Rectangle(948,269,80,20), 43, MaterialType.BALL_MATERIAL);\r\n                // let rect12B : Rect = this.createRectangle(new Rectangle( 1013,830,80,20), 43, MaterialType.BALL_MATERIAL);\r\n                // let rect13A : Rect = this.createRectangle(new Rectangle( 1013,268,80,20), 1, MaterialType.BALL_MATERIAL);\r\n                // let rect13B : Rect = this.createRectangle(new Rectangle( 947,830,80,20), 1, MaterialType.BALL_MATERIAL);\r\n                // @ts-ignore\r\n                // let line1: Line = this.createLine(new Vector2(496, 450), new Vector2(496, 351), MaterialType.LINE_MATERIAL);\r\n                // console.log(new Vector2(496, 450)., new Vector2(496, 351), MaterialType.LINE_MATERIAL);\r\n                // let line1: Rect = this.createRectangle(new Rectangle(476, 351, 21, 99), MaterialType.LINE_MATERIAL);\r\n                // let mPoint: Vector2 = new Vector2((line1.firstPoint.x + line1.secondPoint.x) / 2, (line1.firstPoint.y + line1.secondPoint.y) / 2);\r\n                // let c: Graphics = new Graphics();\r\n                // c.beginFill(0xff9900);\r\n                // c.drawCircle(mPoint.x,mPoint.y, 20);\r\n                // c.endFill();\r\n                //\r\n                // this.addChild(c);\r\n                // let line2: Rect = this.createRectangle(new Rectangle(496, 351, 99, 20), MaterialType.LINE_MATERIAL);\r\n                /*let line2to3: Line = this.createLine(new Vector2(472, 321), new Vector2(509, 284), MaterialType.BALL_ONLY_MATERIAL);\r\n                let line3: Line = this.createLine(new Vector2(509, 284), new Vector2(544, 307), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line4: Line = this.createLine(new Vector2(544, 307), new Vector2(934, 307), MaterialType.LINE_MATERIAL);\r\n                let line4: Rect = this.createRectangle(new Rectangle(544, 287, 390, 21), MaterialType.LINE_MATERIAL);\r\n\r\n                let line5: Line = this.createLine(new Vector2(934, 307), new Vector2(953, 284), MaterialType.LINE_MATERIAL);\r\n                let line5to6: Line = this.createLine(new Vector2(949, 288), new Vector2(1011, 288), MaterialType.BALL_ONLY_MATERIAL);\r\n                let line6: Line = this.createLine(new Vector2(1007, 284), new Vector2(1027, 307), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line7: Line = this.createLine(new Vector2(1027, 307), new Vector2(1424, 307), MaterialType.LINE_MATERIAL);\r\n                let line7: Rect = this.createRectangle(new Rectangle(1027, 287, 390, 21), MaterialType.LINE_MATERIAL);\r\n\r\n                let line8: Line = this.createLine(new Vector2(1424, 307), new Vector2(1450, 284), MaterialType.LINE_MATERIAL);\r\n                let line8to9: Line = this.createLine(new Vector2(1450, 284), new Vector2(1487, 321), MaterialType.BALL_ONLY_MATERIAL);\r\n                let line9: Line = this.createLine(new Vector2(1487, 321), new Vector2(1466, 351), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line10: Line = this.createLine(new Vector2(1466, 351), new Vector2(1466, 450), MaterialType.LINE_MATERIAL);\r\n                let line10: Rect = this.createRectangle(new Rectangle(1466, 351, 21, 99), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line11: Line = this.createLine(new Vector2(1466, 644), new Vector2(1466, 748), MaterialType.LINE_MATERIAL);\r\n                let line11: Rect = this.createRectangle(new Rectangle(1466, 644, 21, 99), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line10to11: Line = this.createLine(new Vector2(1466, 450), new Vector2(1466, 644), MaterialType.PUCK_ONLY_MATERIAL);\r\n                let line10to11: Rect = this.createRectangle(new Rectangle(1464, 351, 21, 392), MaterialType.PUCK_ONLY_MATERIAL, 0xFFFF00);\r\n\r\n\r\n                let line12: Line = this.createLine(new Vector2(1466, 748), new Vector2(1487, 776), MaterialType.LINE_MATERIAL);\r\n                let line12to13: Line = this.createLine(new Vector2(1487, 776), new Vector2(1450, 812), MaterialType.BALL_ONLY_MATERIAL);\r\n                let line13: Line = this.createLine(new Vector2(1450, 812), new Vector2(1424, 790), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line14: Line = this.createLine(new Vector2(1424, 790), new Vector2(1026, 790), MaterialType.LINE_MATERIAL);\r\n                let line14: Rect = this.createRectangle(new Rectangle(1026, 789, 390, 21), MaterialType.LINE_MATERIAL);\r\n\r\n                let line15: Line = this.createLine(new Vector2(1026, 790), new Vector2(1007, 812), MaterialType.LINE_MATERIAL);\r\n                let line15to16: Line = this.createLine(new Vector2(1011, 808), new Vector2(949, 808), MaterialType.BALL_ONLY_MATERIAL);\r\n                let line16: Line = this.createLine(new Vector2(953, 812), new Vector2(934, 790), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line17: Line = this.createLine(new Vector2(934, 790), new Vector2(544, 790), MaterialType.LINE_MATERIAL);\r\n                let line17: Rect = this.createRectangle(new Rectangle(544, 789, 390, 21), MaterialType.LINE_MATERIAL);\r\n\r\n                let line18: Line = this.createLine(new Vector2(544, 790), new Vector2(509, 812), MaterialType.LINE_MATERIAL);\r\n                let line18to19: Line = this.createLine(new Vector2(509, 812), new Vector2(472, 776), MaterialType.BALL_ONLY_MATERIAL);\r\n                let line19: Line = this.createLine(new Vector2(472, 776), new Vector2(496, 748), MaterialType.LINE_MATERIAL);\r\n                // let line20: Line = this.createLine(new Vector2(496, 748), new Vector2(496, 644), MaterialType.LINE_MATERIAL);\r\n                let line20: Rect = this.createRectangle(new Rectangle(476, 644, 21, 99), MaterialType.LINE_MATERIAL);\r\n\r\n                // let line20to1: Line = this.createLine(new Vector2(496, 644), new Vector2(496, 450), MaterialType.PUCK_ONLY_MATERIAL);\r\n                // let line20to1: Rect = this.createRectangle(new Rectangle(476, 450, 21, 196), MaterialType.PUCK_ONLY_MATERIAL, 0xFFFF00);\r\n\r\n                let line20to1: Rect = this.createRectangle(new Rectangle(478, 351, 21, 392), MaterialType.PUCK_ONLY_MATERIAL, 0xFFFF00);*/\r\n\r\n\r\n                this.pockets = [];\r\n                let pocket1: Pocket = new Pocket(-497, -254, 28, new Vector2(-438, -200));\r\n                this.pockets.push(pocket1);\r\n                pocket1.addPoints(this);\r\n\r\n                /*let pocketHolder1: Sprite = new Sprite();\r\n                pocketHolder1.name = \"pocket1\";\r\n                let pocket1Gr: Graphics = new Graphics();\r\n                pocket1Gr.beginFill(0x00ff00, 0.5);\r\n                pocket1Gr.drawCircle(0, 0, 5);\r\n                pocket1Gr.endFill();\r\n                pocketHolder1.x = -438;\r\n                pocketHolder1.y = -200;\r\n                pocketHolder1.addChild(pocket1Gr);\r\n                this.addChild(pocketHolder1);*/\r\n\r\n\r\n                let pocket2: Pocket = new Pocket(0, -264, 26, new Vector2(0, -200));\r\n                this.pockets.push(pocket2);\r\n                pocket2.addPoints(this);\r\n\r\n\r\n                /*let pocketHolder2: Sprite = new Sprite();\r\n                pocketHolder2.name = \"pocket2\";\r\n                let pocket2Gr: Graphics = new Graphics();\r\n                pocket2Gr.beginFill(0x00ff00, 0.5);\r\n                pocket2Gr.drawCircle(0, 0, 5);\r\n                pocket2Gr.endFill();\r\n                pocketHolder2.x = pocket2.x;\r\n                pocketHolder2.y = -200;\r\n                pocketHolder2.addChild(pocket2Gr);\r\n                this.addChild(pocketHolder2);*/\r\n\r\n\r\n                let pocket3: Pocket = new Pocket(496, -255, 28, new Vector2(438, -200));\r\n                this.pockets.push(pocket3);\r\n                pocket3.addPoints(this);\r\n\r\n                /*let pocketHolder3: Sprite = new Sprite();\r\n                pocketHolder3.name = \"pocket2\";\r\n                let pocket3Gr: Graphics = new Graphics();\r\n                pocket3Gr.beginFill(0x00ff00, 0.5);\r\n                pocket3Gr.drawCircle(0, 0, 5);\r\n                pocket3Gr.endFill();\r\n                pocketHolder3.x = 438;\r\n                pocketHolder3.y = -200;\r\n                pocketHolder3.addChild(pocket3Gr);\r\n                this.addChild(pocketHolder3);*/\r\n\r\n\r\n                let pocket4: Pocket = new Pocket(497, 254, 28, new Vector2(438, 200));\r\n                this.pockets.push(pocket4);\r\n                pocket4.addPoints(this);\r\n\r\n                /*let pocketHolder4: Sprite = new Sprite();\r\n                pocketHolder4.name = \"pocket4\";\r\n                let pocket4Gr: Graphics = new Graphics();\r\n                pocket4Gr.beginFill(0x00ff00, 0.5);\r\n                pocket4Gr.drawCircle(0, 0, 5);\r\n                pocket4Gr.endFill();\r\n                pocketHolder4.x = 438;\r\n                pocketHolder4.y = 200;\r\n                pocketHolder4.addChild(pocket4Gr);\r\n                this.addChild(pocketHolder4);*/\r\n\r\n\r\n                let pocket5: Pocket = new Pocket(0, 263, 26, new Vector2(0, 200));\r\n                this.pockets.push(pocket5);\r\n                pocket5.addPoints(this);\r\n\r\n                /* let pocketHolder5: Sprite = new Sprite();\r\n                 pocketHolder5.name = \"pocket5\";\r\n                 let pocket5Gr: Graphics = new Graphics();\r\n                 pocket5Gr.beginFill(0x00ff00, 0.5);\r\n                 pocket5Gr.drawCircle(0, 0, 5);\r\n                 pocket5Gr.endFill();\r\n                 pocketHolder5.x = pocket5.x;\r\n                 pocketHolder5.y = 200;\r\n                 pocketHolder5.addChild(pocket5Gr);\r\n                 this.addChild(pocketHolder5);*/\r\n\r\n\r\n                let pocket6: Pocket = new Pocket(-497, 253, 28, new Vector2(-438, 200));\r\n                this.pockets.push(pocket6);\r\n                pocket6.addPoints(this);\r\n\r\n                /* let pocketHolder6: Sprite = new Sprite();\r\n                 pocketHolder6.name = \"pocket6\";\r\n                 let pocket6Gr: Graphics = new Graphics();\r\n                 pocket6Gr.beginFill(0x00ff00, 0.5);\r\n                 pocket6Gr.drawCircle(0, 0, 5);\r\n                 pocket6Gr.endFill();\r\n                 pocketHolder6.x = -438;//pocket6.x;\r\n                 pocketHolder6.y = 200;//pocket6.y;\r\n                 pocketHolder6.addChild(pocket6Gr);\r\n                 this.addChild(pocketHolder6);*/\r\n\r\n\r\n                // TweenMax.delayedCall(0.1, this.createBottomCollisionPolygon.bind(this));\r\n            }\r\n\r\n            private createUpperCollisionPolygon(): void {\r\n                let vertices: number[][] = PockeySettings.MAIN_COLLISION_POLYGON.slice(0);\r\n                let upperCollisionPolygon: p2.Body = new p2.Body({mass: 0});\r\n                P2WorldManager.Instance().world.addBody(upperCollisionPolygon);\r\n                upperCollisionPolygon.fromPolygon(vertices);\r\n                _.forEach(upperCollisionPolygon.shapes, (shape: p2.Shape) => {\r\n                    shape.material = new p2.Material(MaterialType.LINE_MATERIAL);\r\n                });\r\n                // let salam = new Sprite();\r\n              /*   _.forEach(PockeySettings.MAIN_COLLISION_POLYGON, (lineCoord: number[], id: number) => {\r\n                                     // x1 = lineCoord[0];\r\n                                     // y1 = lineCoord[1];\r\n                                     // x2 = lineCoord[2];\r\n                                     // y2 = lineCoord[3];\r\n                                     if (id > 0) {\r\n                                         let prevPointCounter = id - 1;\r\n                                         let v1 = new Vector2(lineCoord[0], lineCoord[1]);\r\n                                         let v2 = new Vector2(PockeySettings.MAIN_COLLISION_POLYGON[prevPointCounter][0], PockeySettings.MAIN_COLLISION_POLYGON[prevPointCounter][1]);\r\n                                         this.createLine(v1, v2, MaterialType.LINE_MATERIAL);\r\n                                     }\r\n                                     // nextPointCounter = id + 1;\r\n                                     // if (id + 1 > PockeySettings.MAIN_COLLISION_POLYGON.length - 1) {\r\n                                     //\r\n                                     // }\r\n                                 });*/\r\n            }\r\n\r\n            private createUpperCollisionShadowPolygon(): void {\r\n                let vertices: number[][] = PockeySettings.MAIN_COLLISION_SHADOW.slice(0);\r\n                let upperCollisionShadowPolygon: p2.Body = new p2.Body({mass: 0});\r\n                P2WorldManager.Instance().world.addBody(upperCollisionShadowPolygon);\r\n                upperCollisionShadowPolygon.fromPolygon(vertices);\r\n                _.forEach(upperCollisionShadowPolygon.shapes, (shape: p2.Shape) => {\r\n                    shape.material = new p2.Material(MaterialType.SHADOW_MATERIAL);\r\n                });\r\n                upperCollisionShadowPolygon.position [0] -= 1.5;\r\n                upperCollisionShadowPolygon.position [1] += 1.5;\r\n\r\n                /*_.forEach(PockeySettings.MAIN_COLLISION_SHADOW, (lineCoord: number[], id: number) => {\r\n                    // x1 = lineCoord[0];\r\n                    // y1 = lineCoord[1];\r\n                    // x2 = lineCoord[2];\r\n                    // y2 = lineCoord[3];\r\n                    if (id > 0) {\r\n                        let prevPointCounter = id - 1;\r\n                        let v1 = new Vector2(lineCoord[0], lineCoord[1]);\r\n                        let v2 = new Vector2(PockeySettings.MAIN_COLLISION_SHADOW[prevPointCounter][0], PockeySettings.MAIN_COLLISION_SHADOW[prevPointCounter][1]);\r\n                        this.createLine(v1, v2, MaterialType.LINE_MATERIAL);\r\n                    }\r\n                    // nextPointCounter = id + 1;\r\n                    // if (id + 1 > PockeySettings.MAIN_COLLISION_POLYGON.length - 1) {\r\n                    //\r\n                    // }\r\n                });*/\r\n            }\r\n\r\n            private createBottomCollisionPolygon(): void {\r\n                let vertices: number[][] = PockeySettings.MAIN_COLLISION_POLYGON.slice(0);\r\n                let bottomCollisionPolygon: p2.Body = new p2.Body({mass: 0});\r\n                P2WorldManager.Instance().world.addBody(bottomCollisionPolygon);\r\n                bottomCollisionPolygon.fromPolygon(vertices);\r\n                _.forEach(bottomCollisionPolygon.shapes, (shape: p2.Shape) => {\r\n                    shape.material = new p2.Material(MaterialType.LINE_MATERIAL);\r\n                });\r\n                bottomCollisionPolygon.angle = Math.PI;\r\n                bottomCollisionPolygon.position [1] += 513;\r\n                bottomCollisionPolygon.position [0] -= 11;\r\n\r\n\r\n                /*_.forEach(PockeySettings.MAIN_COLLISION_POLYGON, (lineCoord: number[], id: number) => {\r\n                    // x1 = lineCoord[0];\r\n                    // y1 = lineCoord[1];\r\n                    // x2 = lineCoord[2];\r\n                    // y2 = lineCoord[3];\r\n                    if (id > 0) {\r\n                        let prevPointCounter = id - 1;\r\n                        let v1 = new Vector2(lineCoord[0], lineCoord[1]);\r\n                        let v2 = new Vector2(PockeySettings.MAIN_COLLISION_POLYGON[prevPointCounter][0], PockeySettings.MAIN_COLLISION_POLYGON[prevPointCounter][1]);\r\n                        this.createLine(v1, v2, MaterialType.LINE_MATERIAL);\r\n                    }\r\n                    // nextPointCounter = id + 1;\r\n                    // if (id + 1 > PockeySettings.MAIN_COLLISION_POLYGON.length - 1) {\r\n                    //\r\n                    // }\r\n                });*/\r\n\r\n            }\r\n\r\n            private createBottomCollisionShadowPolygon(): void {\r\n                let vertices: number[][] = PockeySettings.MAIN_COLLISION_SHADOW.slice(0);\r\n                let bottomCollisionShadowPolygon: p2.Body = new p2.Body({mass: 0});\r\n                P2WorldManager.Instance().world.addBody(bottomCollisionShadowPolygon);\r\n                bottomCollisionShadowPolygon.fromPolygon(vertices);\r\n                _.forEach(bottomCollisionShadowPolygon.shapes, (shape: p2.Shape) => {\r\n                    shape.material = new p2.Material(MaterialType.SHADOW_MATERIAL);\r\n                });\r\n                bottomCollisionShadowPolygon.angle = Math.PI;\r\n                bottomCollisionShadowPolygon.position [1] += 399;\r\n                bottomCollisionShadowPolygon.position [0] -= 2;\r\n            }\r\n\r\n            /*\r\n//                 let newB2 = new p2.Body({mass: 0});\r\n//                 P2WorldManager.Instance().world.addBody(newB2);\r\n//                 newB2.fromPolygon(PockeySettings.MAIN_COLLISION_POLYGON2);\r\n//                 newB2.angle = Math.PI;\r\n// newB2.position [1] += 513;\r\n//\r\n              let newB3 = new p2.Body({mass: 0});\r\n              let newB4 = new p2.Body({mass: 0});\r\n              newB4.position [1] += 402;\r\n              newB4.angle = Math.PI;\r\n\r\n//                 newB3.angle = Math.PI;\r\n              // newB3.position [1] += 513;\r\n\r\n              // let salam = new Sprite();\r\n              _.forEach(PockeySettings.MAIN_COLLISION_POLYGON, (lineCoord: number[], id: number) => {\r\n                  // x1 = lineCoord[0];\r\n                  // y1 = lineCoord[1];\r\n                  // x2 = lineCoord[2];\r\n                  // y2 = lineCoord[3];\r\n                  if (id > 0) {\r\n                      prevPointCounter = id - 1;\r\n                      v1 = new Vector2(lineCoord[0], lineCoord[1]);\r\n                      v2 = new Vector2(PockeySettings.MAIN_COLLISION_POLYGON[prevPointCounter][0], PockeySettings.MAIN_COLLISION_POLYGON[prevPointCounter][1]);\r\n                      this.createLine(v1, v2, MaterialType.LINE_MATERIAL);\r\n                  }\r\n                  // nextPointCounter = id + 1;\r\n                  // if (id + 1 > PockeySettings.MAIN_COLLISION_POLYGON.length - 1) {\r\n                  //\r\n                  // }\r\n              });\r\n              // P2WorldManager.Instance().world.addBody(newB3);\r\n              // P2WorldManager.Instance().world.addBody(newB4);\r\n              // newB3.fromPolygon(PockeySettings.MAIN_COLLISION_SHADOW);\r\n              // newB4.fromPolygon(PockeySettings.MAIN_COLLISION_POLYGON4);\r\n          }*/\r\n\r\n            private createLine(v1: Vector2, v2: Vector2, materialType: MaterialType, body: p2.Body = null): void {\r\n                // let line = new Line(v1, v2, materialType);\r\n                let graphics: Graphics = new Graphics();\r\n                graphics.name = \"line\";\r\n                graphics.lineStyle(2, 0xffff00);\r\n                graphics.moveTo(v1.x, v1.y);\r\n                graphics.lineTo(v2.x, v2.y);\r\n                this.addChild(graphics);\r\n                // graphics.x = body.position[0];// - 600;\r\n                // graphics.y = body.position[1];// - 102;\r\n\r\n                // this.cacat.name = \"cacat\";\r\n                // this.cacat.addChild(graphics);\r\n                // this.cacat.y = 513;\r\n                // this.cacat.x = 513;\r\n                // this.cacat.scale.x = 0.2;\r\n                // this.cacat.scale.y = 0.2;\r\n                // this.cacat.anchor.set(0.5,0.5);\r\n                // this.cacat.rotation = Math.PI;\r\n                // this.addChild(this.cacat);\r\n                // graphics.drawRect(-28, -31, 56, 62);\r\n                // graphics.endFill();\r\n                // rect.addChild(graphics);\r\n                // this.limits.push(line);\r\n                // return line;\r\n            }\r\n\r\n            public reset(): void {\r\n                this.balls = [];\r\n\r\n                this.whiteBall.reset();\r\n                this.whiteBall.ballPosition = this.whiteBall.initialPosition;\r\n                this.addBallToBallsHolder(this.whiteBall);\r\n                this.balls.push(this.whiteBall);\r\n                // console.log(this.whiteBall.name);\r\n\r\n                this.puck.reset();\r\n                this.puck.ballPosition = this.puck.initialPosition;//.x;\r\n                this.balls.push(this.puck);\r\n                this.addBallToBallsHolder(this.puck);\r\n\r\n                // console.log(this.puck.name);\r\n\r\n                _.forEach(this.leftBallsArray, (ball: AbstractBall) => {\r\n                    ball.reset();\r\n                    ball.ballPosition = ball.initialPosition;//.x;\r\n                    this.balls.push(ball);\r\n\r\n                    this.addBallToBallsHolder(ball);\r\n                    // console.log(ball.name);\r\n                    // ball.y = ball.initialPosition.y;\r\n\r\n                    // if (ball.ballType == BallType.Player) {\r\n                    //     ball.tintBall(color);\r\n                    // }\r\n                });\r\n                _.forEach(this.rightBallsArray, (ball: AbstractBall) => {\r\n                    ball.reset();\r\n                    console.log(ball.name);\r\n\r\n                    ball.ballPosition = ball.initialPosition;\r\n                    this.balls.push(ball);\r\n\r\n                    this.addBallToBallsHolder(ball);\r\n\r\n                    // if (ball.ballType == BallType.Player) {\r\n                    //     ball.tintBall(color);\r\n                    // }\r\n                });\r\n            }\r\n\r\n            private createRectangle(rectangle: Rectangle, rotationAngle: number, materialType: MaterialType, color = 0xffff00, id: string): Rect {\r\n\r\n                let rect = new Rect(rectangle, rotationAngle, materialType);\r\n\r\n                /*let graphics: Graphics = new Graphics();\r\n                graphics.beginFill(color, 0.8);\r\n                graphics.drawRect(-rectangle.width / 2, -rectangle.height / 2, rectangle.width, rectangle.height);\r\n                graphics.endFill();\r\n                let s: Sprite = new Sprite();\r\n                s.name = id;\r\n\r\n                s.addChild(graphics);\r\n\r\n                s.rotation = rotationAngle;\r\n                s.x = rectangle.x;\r\n                s.y = rectangle.y;\r\n                this.addChild(s);*/\r\n\r\n                return rect;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// \"ball-black.png\"\r\n// \"ball-colorme.png\" --------------- used\r\n// \"ball-highlight.png\"\r\n// \"ball-puck-01.png\"\r\n// \"ball-puck-02.png\"\r\n// \"ball-puck.png\" --------------- used\r\n// \"ball-puckInvalid.png\"\r\n// \"ball-scratch.png\"\r\n// \"ball-shadow.png\"\r\n// \"barrier-corner.png\"\r\n// \"barrier-icon.png\"\r\n// \"barrier-side.png\"\r\n// \"rightGoal-shine.png\"\r\n// \"goal_arrowIndicator.png\"\r\n// \"goalie.png\"\r\n// \"goalTop_left.png\" --------------- used\r\n// \"goalTop_leftTopper.png\" --------------- used\r\n// \"goalTop_right.png\" --------------- used\r\n// \"goalTop_righttTopper.png\" --------------- used\r\n// \"penalty-droppuck.png\" --------------- used\r\n// \"power-bg.png\" --------------- used in gameModule\r\n// \"power-color.png\"\r\n// \"powerUp_pocketBlock.png\"\r\n// \"powerUp_speedBuff.png\"\r\n// \"puck-icon.png\"\r\n// \"puck-indicator.png\"\r\n// \"puck_drop.png\"\r\n// \"roundcomplete.png\"\r\n// \"table-default.png\" --------------- used\r\n// \"table_border-1.png\" --------------- used\r\n// \"table_english-01.png\"\r\n// \"table_english-reticle.png\"\r\n// \"table_power-01a.png\"\r\n// \"table_power-light1.png\"\r\n// \"table_power-light2.png\"\r\n// \"table_power-light3.png\"\r\n// \"table_power-light4.png\"\r\n// \"ui_icon-arrow.png\"\r\n// \"ui_icon-tipsReg.png\"\r\n// \"ui_versus-empty.png\"\r\n// \"ui_versus-main.png\"\r\n// \"ui_versus-won.png\"\r\n// \"vs.png\"--------------- used","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/10/2018\r\n */\r\n\r\nnamespace Pockey {\r\n\r\n    export module StateMachineModule {\r\n\r\n        export class PockeyStateTexts {\r\n\r\n            // First-game State: shooting (optional, but might be too difficult)\r\n            public static beginGame: string = \"AIM WITH CURSOR, PRESS & HOLD LEFT MOUSE BUTTON AND DRAG TO SET POWER\";\r\n            public static beginGameMobile: string = \"TO AIM, TAP OR MOVE OVER THE POOLTABLE. SHOOT BY SELECTING THE POWER ON THE LEFT SIDE\";//AIM WITH CURSOR, PRESS & HOLD LEFT MOUSE BUTTON AND DRAG TO SET POWER\";\r\n\r\n            // First-game State: when its your turn to break - (we need to tweak the break pattern)\r\n            // public static yourTurnToShootText: string = \"YOUR TURN TO SHOOT!\";\r\n\r\n            // Tip State: when a players turn starts\r\n            public static yourTurnToShoot: string = \"YOUR TURN! SHOOT <opponent>{opponent}'S</opponent> BALLS INTO POCKETS\";\r\n\r\n            // Tip State: when you aim at your own ball\r\n            public static ownBallAiming: string = \"<warning>WARNING!</warning> HITTING YOUR OWN BALL FIRST IS A FOUL\";\r\n\r\n            // State: when you hit your own ball first\r\n            public static ownBallHit: string = \"<opponent>{opponent}</opponent> FOULED!\";\r\n\r\n            // Tip State: when you aim at the puck\r\n            // Result: goalbox of opponent has an arrow hovering of it + arrow indicator around puck\r\n            public static puckAiming: string = \"SHOOT THE PUCK INTO <opponent>{opponent}'S</opponent> GOAL!\";\r\n\r\n            // State: when opponent fouls and\r\n            public static opponentFault: string = \"<opponent>{opponent}</opponent> FOULED! PLACE THE BALL ANYWHERE ON TABLE\";\r\n\r\n            // State: when players scratches on cue ball\r\n            public static whiteBallFault: string = \"YOU FOULED! <opponent>{opponent}</opponent> GETS BALL-IN-HAND\";\r\n\r\n            // State: when player scores his own ball in\r\n            public static onOwnBallInPocket: string = \"YOU SCORED AN OWN BALL! <opponent>{opponent}s</opponent> TURN!\";\r\n\r\n            // State: when you score puck in your goal\r\n            public static puckOwnGoal: string = \"PUCK WENT INTO YOUR OWN GOAL! <opponent>{opponent}</opponent> GETS BALL-IN-HAND\";\r\n\r\n            public static onTimeUp: string = \"YOUR TIME IS UP! <opponent>{opponent}</opponent> GETS BALL-IN-HAND\";\r\n            public static onOpponentsTimeUp: string = \"<opponent>{opponent}</opponent> TIME IS UP! PLACE THE BALL ANYWHERE ON TABLE\";\r\n\r\n            // State: when you score the puck into opponent goal\r\n            // Result:goal box flashes, some poppy sound is made and\r\n            public static onPuckGoal: string = \"YOU SCORED THE PUCK! -2 HEALTH TO <opponent>{opponent}</opponent>\";\r\n\r\n            // State: when you dont hit any balls\r\n            public static noBallScored: string = \"YOU DIDNT SCORED! <opponent>{opponent}'S</opponent> TURN\";\r\n\r\n            // State: when you hit two or more balls in\r\n            public static multipleBallsIn: string = \"YOU MADE A TRICKSHOT! CONGRATS!\";\r\n\r\n            // State: when you hit the puck/other ball to make a different ball in\r\n            public static ballInPocketViaOtherBall: string = \"YOU MADE A TRICKSHOT! CONGRATS!\";\r\n\r\n            // Tip State: when an Pocket blocker icon appears\r\n            // POWER-UP AVAILABLE, SCORE A BALL IN THE POCKET ON FIRST SHOT\r\n\r\n            // State: when you shoot a ball into a Lock Icon pocket on your first shot of turn\r\n            // POWERUP! THIS POCKET WILL BE BLOCKED FOR YOUR OPPONENTS NEXT TURN\r\n            //\r\n            // State: when you score one of your balls in\r\n            public static opponentBallInPocket: string = \"<opponent>{opponent}</opponent> POCKETED A BALL AND CAN SHOOT AGAIN!\";\r\n            public static opponentsTurn: string = \"<opponent>{opponent}'s</opponent> turn\";\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../../../../lib/types/lodash/index.d.ts\"/>\n///<reference path=\"../StateMachine/pockey-state-machine.ts\"/>\n///<reference path=\"../../../Framework/Utils/Vector2.ts\"/>\n///<reference path=\"../../../Framework/Utils/pixi-dashed-line.ts\"/>\n///<reference path=\"../../../Framework/Utils/mouse-handler.ts\"/>\n///<reference path=\"pool-table.ts\"/>\n///<reference path=\"../../../../lib/types/greensock/greensock.d.ts\"/>\n///<reference path=\"../StateMachine/pockey-state-texts.ts\"/>\n\n\n/**\n *  Edgeflow\n *  Copyright 2018 EdgeFlow\n *  All Rights Reserved.\n *\n *  NOTICE: You may not use, distribute or modify this document without the\n *  written permission of its copyright owner\n *\n *  Created by Sandru Andrei on 7/17/2018\n */\n\n\nnamespace Pockey {\n    export module GameModule {\n\n        import SignalsManager = Framework.Signals.SignalsManager;\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\n        import Vector2 = Framework.Utils.Vector2;\n        import Point = PIXI.Point;\n        import Graphics = PIXI.Graphics;\n        import PixiDashedLine = Framework.Utils.PixiDashedLine;\n        import PockeyStateMachine = Pockey.StateMachineModule.PockeyStateMachine;\n        import PockeyStates = Pockey.StateMachineModule.PockeyStates;\n        import MouseHandler = Framework.Utils.MouseHandler;\n        import PockeyConnectionSignals = Pockey.SignalsModule.PockeyConnectionSignals;\n        import Settings = Framework.Settings;\n        import PockeyStateTexts = Pockey.StateMachineModule.PockeyStateTexts;\n\n        export interface PoolTableData {\n            playerName?: string,\n            playerSocketID?: any,\n            playerScore?: number,\n            playerColor?: number,\n            opponentScore?: number,\n            opponentColor?: number,\n            poolstickPivotX?: number,\n            poolstickRotation?: number,\n            poolstickPositionX?: number,\n            poolstickPositionY?: number,\n            opponentTimerText?: string;\n            opponentTimerAnimate?: boolean,\n            opponentState?: PockeyStates,\n            opponentTimeFinished?: boolean,\n            // leftBalls?: BallData[],\n            // rightBalls?: BallData[],\n            whiteBallData?: BallData,\n            puckData?: BallData,\n            whiteBallPenalty?: boolean,\n            ballsHit?: number,\n            balls?: BallData[],\n\n            followerVisible?: boolean,\n            followerX?: number,\n            followerY?: number,\n\n            ballPositionCircleVisible?: boolean,\n            ballPositionCircleX?: number,\n            ballPositionCircleY?: number,\n\n            ballPositionCircleOnRaycastVisible?: boolean,\n            ballPositionCircleOnRaycastX?: number,\n            ballPositionCircleOnRaycastY?: number,\n\n            lineBetweenCirclesVisible?: boolean,\n            lineBetweenCirclesPoints?: number[],\n            graphColor?: number\n        }\n\n        export interface Limits {\n            left: number,\n            right: number,\n            up: number,\n            down: number\n        }\n\n        export class PoolTableManager {\n\n            public poolTable: PoolTable;\n            private ticker: PIXI.ticker.Ticker;\n            private shootingEnded: boolean = false;\n            protected graph: Graphics;\n            // private poolTableData: PoolTableData;\n\n            private hitPoint: p2.vec2 = p2.vec2.create();\n\n            protected startRayCastPoint: number[] = [0, 0];\n            protected endRayCastPoint: number[] = [0, 0];\n            protected raycastResult: p2.RaycastResult = new p2.RaycastResult();\n            protected rayClosest: p2.Ray = new p2.Ray({\n                mode: p2.Ray.CLOSEST,\n                skipBackfaces: true\n            });\n\n            protected shortestContactDistance: number;\n            protected newPos: Vector2;\n            protected repositionWhiteBallEnabled: boolean = false;\n            protected lastGoodRepositionPoint: Vector2;\n            protected contactEnabled: boolean = false;\n            private whiteBallInThePocket: boolean = false;\n            private opponentBallInThePocket: boolean = false;\n\n            private playerTurnStarted: boolean = false;\n            private ballWasShot: boolean = false;\n\n            protected opponentTimeUp: boolean = false;\n            protected repositionStarted: boolean = false;\n\n            protected isFirstShoot: boolean = true;\n\n            protected uiTextOnWatch: string = \"\";\n            protected lineBetweenCirclesPoints: number[];\n            protected lineBetweenCirclesVisible: boolean;\n            protected graphColor: number = 0xffffff;\n\n            constructor() {\n                // console.log(\"%c Pool T Manager: intra la constructor \", \"background: red; color: white; font-weight:bold; \");\n\n                this.registerSignalsHandlers();\n\n                this.poolTable = new PoolTable();\n                this.poolTable.visible = false;\n                // this.poolTable.x = 650;\n                // this.poolTable.y = 380;\n\n                this.ticker = PIXI.ticker.shared;\n\n                if (this.poolTable.poolStick)\n                    this.ticker.add(this.poolTable.poolStick.update, this.poolTable.poolStick);\n\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    this.ticker.add(ball.update, ball);\n                    ball.addShadowBody();\n                });\n\n                this.ticker.add(this.update, this);\n\n                P2WorldManager.Instance().world.on(\"beginContact\", (evt) => {\n                    if (this.contactEnabled) {\n                        if (!_.isNull(evt.shapeA.radius) && !_.isUndefined(evt.shapeA.radius) &&\n                            !_.isNull(evt.shapeB.radius) && !_.isUndefined(evt.shapeB.radius)) {\n                            // console.log(\"penalty!!!!!\");\n                            this.contactEnabled = false;\n                            let isOwnBall: boolean = false;\n                            if (evt.bodyA == this.poolTable.whiteBall.p2Body) {\n                                isOwnBall = this.checkIfOwnBall(evt.bodyB);\n                            }\n                            else if (evt.bodyB == this.poolTable.whiteBall.p2Body) {\n                                isOwnBall = this.checkIfOwnBall(evt.bodyA);\n                            }\n\n                            if (isOwnBall) {\n                                SignalsManager.DispatchSignal(PockeySignalTypes.FIRST_BALL_FAULT);\n                                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.whiteBallFault]);\n\n                            }\n\n                        }\n\n                    }\n                }, this);\n            }\n\n            private registerSignalsHandlers(): void {\n\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SHOW_POOLTABLE, this.onShowPoolTable.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.RESET_POOLTABLE, this.onResetPoolTable.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.RESET_STICK_POWER, this.onResetStickPower.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.HIDE_BALL_RAY_GRAPHICS, this.hideBallRayGraphics.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.REACTIVATE_STICK, this.reactivateStick.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SHOOT_BALL, this.onShoot.bind(this));\n                SignalsManager.AddSignalCallback(PockeyConnectionSignals.WATCH, this.onWatch.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.CHANGE_OPPONENT_COLOR, this.onChangeOpponentColor.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.CHANGE_PLAYER_COLOR, this.onChangePlayerColor.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SET_SIDES_TYPE, this.onSetPuckGoalsSides.bind(this));\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH, this.onUpdateUITextOnWatch.bind(this));\n\n                /* SignalsManager.AddSignalCallback(PockeySignalTypes.ANIMATE_PUCK_GOAL, this.onAnimatePuckGoal.bind(this));\n                 SignalsManager.AddSignalCallback(PockeySignalTypes.ANIMATE_PUCK_GOAL_STOP, this.onStopAnimatePuckGoal.bind(this));*/\n\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.BALL_IN_POCKET, this.ballInPocketHandler.bind(this));\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.REPOSITION_WHITE_BALL, this.onRepositionWhiteBall.bind(this));\n                // SignalsManager.AddSignalCallback(SignalsType.FIRST_ROUND, this.onStarted.bind(this));\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.REPOSITION_STICK, this.repositionStick.bind(this));\n\n            }\n\n\n            protected onAnimatePuckGoal(): void {\n                if (this.poolTable.leftGoal.type == GameManager.Instance().currentPlayer.type) {\n                    this.poolTable.rightGoal.animate();\n                }\n                else {\n                    this.poolTable.leftGoal.animate();\n                }\n            }\n\n            protected onResetStickPower(): void {\n                this.poolTable.poolStick.power = 0;\n                this.poolTable.poolStick.reset();\n            }\n\n            protected onStopAnimatePuckGoal(): void {\n\n                this.poolTable.leftGoal.stopAnimation();\n                this.poolTable.rightGoal.stopAnimation();\n            }\n\n            protected onUpdateUITextOnWatch(params: any[]): void {\n                this.uiTextOnWatch = params[\"0\"];\n            }\n\n            protected onSetPuckGoalsSides(params: any[]): void {\n                this.poolTable.leftGoal.type = params[0];\n                // console.log(\"leftGoal.type: \" + this.poolTable.leftGoal.type);\n                this.poolTable.rightGoal.type = params[1];\n                // console.log(\"rightGoal.type: \" + this.poolTable.rightGoal.type);\n\n                _.forEach(this.poolTable.leftBallsArray, (ball: AbstractBall) => {\n                    // if (ball.side == \"left\") {\n                    ball.ballType = params[0];\n                    // }\n                    // else if (ball.side == \"right\") {\n                    //     ball.ballType = params[1];\n                    // }\n                });\n\n                _.forEach(this.poolTable.rightBallsArray, (ball: AbstractBall) => {\n                    // if (ball.side == \"left\") {\n                    ball.ballType = params[1];\n                    // }\n                    // else if (ball.side == \"right\") {\n                    //     ball.ballType = params[1];\n                    // }\n                });\n            }\n\n            protected onChangeOpponentColor(color: number): void {\n                if (this.poolTable.leftGoal.type == BallType.Opponent) {\n                    this.poolTable.leftGoal.tint = color;\n                }\n                else {\n                    this.poolTable.rightGoal.tint = color;\n                }\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    if (ball.ballType == BallType.Opponent) {\n                        ball.tintBall(color);\n                    }\n                });\n                // this.poolTable.rightGoalTop.tint = color;\n            }\n\n            protected onChangePlayerColor(color: number): void {\n                if (this.poolTable.leftGoal.type == BallType.Player) {\n                    this.poolTable.leftGoal.tint = color;\n                }\n                else {\n                    this.poolTable.rightGoal.tint = color;\n                }\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    if (ball.ballType == BallType.Player) {\n                        ball.tintBall(color);\n                    }\n                });\n                // this.poolTable.rightGoalTop.tint = color;\n            }\n\n            protected onShowPoolTable(): void {\n                this.poolTable.visible = true;\n            }\n\n            protected onResetPoolTable(): void {\n                // this.poolTable.visible = true;\n                this.isFirstShoot = true;\n                this.poolTable.reset();\n            }\n\n            protected onShoot(): void {\n                // console.log(\"%c Pool T Manager: intra la onShoot \", \"background: red; color: white; font-weight:bold; \");\n\n                this.onStopAnimatePuckGoal();\n\n                this.contactEnabled = true;\n                // this.ballWasShot = true;\n                // this.ticker.add(this.update, this);\n                let rotation = this.poolTable.poolStick.rotation;\n                // let power = this.poolTable.poolStick.power;\n\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    P2WorldManager.Instance().world.removeBody(ball.p2BodyShadow);\n                    ball.p2Body.wakeUp();\n                });\n                this.poolTable.whiteBall.onShoot(rotation, this.poolTable.poolStick.power);\n                this.poolTable.poolStick.power = 0;\n\n                this.isFirstShoot = false;\n                // this.shootingEnded = true;\n                // if (this.shootingEnded) {\n                // console.log(\"aici la 3\");\n\n                // this.shootingEnded = false;\n                // this.ballWasShot = true;\n                // return;\n                // this.repositionStick();\n                // }\n            }\n\n            protected onRepositionWhiteBall(): void {\n                // console.log(\"%c Pool T Manager: intra la onRepositionWhiteBall\", \"background: red; color: white; font-weight:bold; \");\n\n                /*       console.log(\"ball repos started\");\n\n                       this.poolTable.whiteBallReflectionArrow.visible = false;\n                       this.poolTable.otherBallReflectionArrow.visible = false;\n                       this.poolTable.ballPositionCircleOnRaycast.visible = false;\n                       this.poolTable.ballPositionCircle.visible = false;\n                       // let localPoint = this.poolTable.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\n                       // this.poolTable.ballPositionCircle.x = localPoint.x;\n                       // this.poolTable.ballPositionCircle.y = localPoint.y;\n                       this.lastGoodRepositionPoint = new Vector2();\n                       this.repositionWhiteBallEnabled = true;*/\n                if (this.opponentTimeUp) {\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.onOpponentsTimeUp]);\n                }\n                else\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.opponentFault]);\n\n                let localPoint = this.poolTable.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\n\n                if (_.isNull(this.lastGoodRepositionPoint) || _.isUndefined(this.lastGoodRepositionPoint)) {\n                    this.lastGoodRepositionPoint = new Vector2();\n                }\n\n                if (this.graph) {\n                    if (this.graph.parent)\n                        this.graph.parent.removeChild(this.graph);\n                    this.graph.clear();\n                    this.graph = null;\n                }\n\n                // if (localPoint.x < this.poolTable.rightLimit &&\n                //     localPoint.x > this.poolTable.leftLimit &&\n                //     localPoint.y < this.poolTable.downLimit &&\n                //     localPoint.y > this.poolTable.upLimit) {\n                //todo vezi ca mouse-ul sa fie in limita tablei de joc\n                //vezi ca daca-i white ball penalty si e la margine, poti sa pui acolo follower-ul. nu-i ok boss\n                let ballPositionCirclePosition: Vector2 = new Vector2(localPoint.x, localPoint.y);\n                if (ballPositionCirclePosition.x + PockeySettings.BALL_RADIUS > this.poolTable.rightLimit)\n                    ballPositionCirclePosition.x = this.poolTable.rightLimit - PockeySettings.BALL_RADIUS;\n                if (ballPositionCirclePosition.x - PockeySettings.BALL_RADIUS < this.poolTable.leftLimit)\n                    ballPositionCirclePosition.x = this.poolTable.leftLimit + PockeySettings.BALL_RADIUS;\n\n                if (ballPositionCirclePosition.y + PockeySettings.BALL_RADIUS > this.poolTable.downLimit)\n                    ballPositionCirclePosition.y = this.poolTable.downLimit - PockeySettings.BALL_RADIUS;\n                if (ballPositionCirclePosition.y - PockeySettings.BALL_RADIUS < this.poolTable.upLimit)\n                    ballPositionCirclePosition.y = this.poolTable.upLimit + PockeySettings.BALL_RADIUS;\n\n                let ballPosition: Vector2;// = new Vector2(this.poolTable.ballPositionCircle.x,this.poolTable.ballPositionCircle.y)\n\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    ballPosition = new Vector2(ball.x, ball.y);\n                    if (ballPositionCirclePosition.distanceTo(ballPosition) < ball.radius + PockeySettings.BALL_RADIUS) {\n                        let opposite: number = ballPositionCirclePosition.y - ballPosition.y;\n                        let adjacent: number = ballPositionCirclePosition.x - ballPosition.x;\n                        let rotAngle: number = Math.atan2(opposite, adjacent);\n\n                        ballPositionCirclePosition.x = ballPosition.x + (PockeySettings.BALL_RADIUS + ball.radius) * Math.cos(rotAngle);\n                        ballPositionCirclePosition.y = ballPosition.y + (PockeySettings.BALL_RADIUS + ball.radius) * Math.sin(rotAngle);\n                        let isInteresectingWithOthers: boolean = false;\n                        _.forEach(this.poolTable.balls, (ball2: AbstractBall) => {\n                            if (ball2 != ball) {\n                                let ball2Position: Vector2 = new Vector2(ball2.x, ball2.y);\n                                if (ball2Position.distanceTo(ballPositionCirclePosition) < PockeySettings.BALL_RADIUS + ball2.radius) {\n                                    isInteresectingWithOthers = true;\n                                    return;\n                                }\n                            }\n                        });\n\n                        if (isInteresectingWithOthers) {\n                            ballPositionCirclePosition.x = this.lastGoodRepositionPoint.x;\n                            ballPositionCirclePosition.y = this.lastGoodRepositionPoint.y;\n                        }\n                        else {\n                            this.lastGoodRepositionPoint.x = ballPositionCirclePosition.x;\n                            this.lastGoodRepositionPoint.y = ballPositionCirclePosition.y;\n                        }\n                    }\n\n                    this.poolTable.ballPositionCircle.x = ballPositionCirclePosition.x;\n                    this.poolTable.ballPositionCircle.y = ballPositionCirclePosition.y;\n                    /* TweenMax.to(this.poolTable.ballPositionCircle, 0.1, {\n                         x: ballPositionCirclePosition.x,\n                         y: ballPositionCirclePosition.y\n                     });*/\n                    this.poolTable.ballPositionCircle.visible = true;\n\n                });\n\n                if (MouseHandler.Instance().left.down) {\n                    this.repositionStarted = true;\n                }\n                if (this.repositionStarted && !MouseHandler.Instance().left.down) {\n                    this.repositionStarted = false;\n\n                    // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n                    this.repositionWhiteBallEnabled = false;\n                    this.poolTable.ballPositionCircle.visible = false;\n                    // this.poolTable.whiteBall.canBeRemoved = false;\n                    // this.poolTable.whiteBall.x = ballPositionCirclePosition.x;\n                    // P2WorldManager.Instance().world.addBody(this.poolTable.whiteBall.p2Body);\n                    // this.poolTable.whiteBall.p2Body.velocity[0] = 0;\n                    // this.poolTable.whiteBall.p2Body.velocity[1] = 0;\n                    // this.poolTable.whiteBall.addShadowBody();\n\n                    // this.poolTable.whiteBall.alpha = 1;\n                    this.poolTable.whiteBall.reset();\n                    this.poolTable.whiteBall.ballPosition = ballPositionCirclePosition;\n                    // if(this.poolTable.balls.cont)\n                    this.poolTable.balls.push(this.poolTable.whiteBall);\n                    this.poolTable.addBallToBallsHolder(this.poolTable.whiteBall);\n                    // this.poolTable.whiteBall.alpha = 1;//(this.poolTable.whiteBall);\n                    // this.repositionStick();\n                    // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n\n\n                    SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n\n                    if (!this.poolTable.poolStick.isActive) {\n                        _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                            ball.addShadowBody();\n                        });\n                        this.poolTable.raycastFollower.visible = true;\n                        this.poolTable.ballPositionCircleOnRaycast.visible = true;\n\n                        this.poolTable.poolStick.activate(new Point(this.poolTable.whiteBall.x, this.poolTable.whiteBall.y));\n                        // console.log(\"PockeyStateMachine.Instance().fsm.currentState: \" + PockeyStateMachine.Instance().fsm.currentState);\n                    }\n                    // this.poolTable.whiteBall.y = ballPositionCirclePosition.y;\n                    // this.ticker.add(this.poolTable.whiteBall.update);\n\n                }\n                this.sendElementsDataToManager();\n            }\n\n            protected handleCollisions(): void {\n                _.remove(this.poolTable.balls, (ball: AbstractBall) => {\n\n                    if (ball.canBeRemoved && !ball.animationInProgress) {\n                        this.ticker.remove(ball.update);\n                        ball.removedFromArray = true;\n                        // if (ball.ballType == BallType.White && !ball.animationInProgress) {\n                        //     // this.whiteBallInThePocket = true;\n                        //         SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_IN_POCKET);\n                        //\n                        // }\n                        // else if(ball.ballType != BallType.White && ball.ballType != BallType.Puck && !ball.animationInProgress)\n                        // {\n                        // }\n\n                        // if(this.checkIfOwnBall(ball.p2Body))\n                        // {\n                        //     SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_IN_POCKET);\n                        //\n                        //     // SignalsManager.DispatchSignal(PockeySignalTypes.BALL_IN_POCKET, [ball.ballType]);\n                        //     // this.opponentBallInThePocket = true;\n                        // }\n                        // if (ball.ballType != BallType.White && !ball.animationInProgress) {\n                        //     this.whiteBallInThePocket = true;\n                        // }\n                        // ball.reanimoved = true;\n\n                    }\n\n                    return ball.canBeRemoved && !ball.animationInProgress;\n\n                });\n            }\n\n            private ballInPocketHandler(params: any[]): void {\n                console.log(\"ball in Pocket: \" + params);\n                // _.remove(obj.subTopics, {\n                //     subTopicId: stToDelete\n                // });\n\n                // _.remove(this.poolTable.balls, {\n                //     subTopicId: stToDelete\n                // });\n                console.log(\"la pocket 1: \" + this.poolTable.balls.length);\n                // let ballName: string = params.toString();\n                // _.remove(this.poolTable.balls, (ball: AbstractBall) => {\n                //     return ball.name == ballName;\n                // });\n                console.log(\"la pocket 2: \" + this.poolTable.balls.length);\n\n            }\n\n            private hideBallRayGraphics(): void {\n                // console.log(\"%c Pool T Manager: intra la hideBallRayGraphics\", \"background: red; color: white; font-weight:bold; \");\n\n                if (this.graph) {\n                    if (this.graph.parent)\n                        this.graph.parent.removeChild(this.graph);\n                    this.graph.clear();\n                }\n                this.lineBetweenCirclesVisible = false;\n                this.poolTable.whiteBallReflectionArrow.visible = false;\n                this.poolTable.otherBallReflectionArrow.visible = false;\n                this.poolTable.raycastFollower.visible = false;\n                this.poolTable.ballPositionCircleOnRaycast.visible = false;\n            }\n\n            protected update(): void {\n\n                if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onRepositionWhiteBall) {\n                    this.onRepositionWhiteBall();\n\n                    return;\n                }\n\n                else if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onShoot) {\n                    if (!this.ballsAreMoving()) {\n                        SignalsManager.DispatchSignal(PockeySignalTypes.NEXT_TURN);\n                    }\n                    else {\n                        this.handleCollisions();\n                        this.sendElementsDataToManager();\n                    }\n                }\n\n                if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onRearrangeStick) {\n\n                    if (this.poolTable.poolStick.rotationEnabled) {\n                        if (this.isFirstShoot) {\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.beginGame]);\n                        }\n                        else {\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.yourTurnToShoot]);\n                        }\n\n\n                        if (this.graph) {\n                            if (this.graph.parent)\n                                this.graph.parent.removeChild(this.graph);\n                            this.graph.clear();\n                            this.graph = null;\n\n                        }\n                        this.graph = new Graphics();\n\n                        let localPoint = this.poolTable.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\n\n                        let opposite: number = localPoint.y - this.poolTable.whiteBall.y;\n                        let adjacent: number = localPoint.x - this.poolTable.whiteBall.x;\n                        let rot: number = Math.atan2(opposite, adjacent);\n\n                        let dir: Vector2 = new Vector2(Math.cos(rot), Math.sin(rot)).multiply(1100);\n\n                        this.newPos = new Vector2(this.poolTable.whiteBall.x + dir.x, this.poolTable.whiteBall.y + dir.y);\n                        this.shortestContactDistance = this.newPos.distanceTo(this.poolTable.whiteBall.position);\n                        //===================\n                        this.startRayCastPoint[0] = this.poolTable.whiteBall.x;\n                        this.startRayCastPoint[1] = this.poolTable.whiteBall.y;\n                        this.endRayCastPoint[0] = this.newPos.x;\n                        this.endRayCastPoint[1] = this.newPos.y;\n                        // P2WorldManager.Instance().world.removeBody(this.poolTable.whiteBall.p2Body);\n\n                        p2.vec2.copy(this.rayClosest.from, this.startRayCastPoint);\n                        p2.vec2.copy(this.rayClosest.to, this.endRayCastPoint);\n                        // this.rayClosest.\n                        this.rayClosest.update();\n                        this.raycastResult.reset();\n                        P2WorldManager.Instance().world.raycast(this.raycastResult, this.rayClosest);\n                        this.drawRayResult(this.raycastResult, this.rayClosest);\n                    }\n                    this.sendElementsDataToManager();\n                }\n                /*// this.graph.lineStyle(2, 0xffffff);\n                // this.graph.moveTo(localPoint.x, localPoint.y);\n                if (this.repositionWhiteBallEnabled) {\n                    if (this.graph) {\n                        if (this.graph.parent)\n                            this.graph.parent.removeChild(this.graph);\n                        this.graph.clear();\n                        this.graph = null;\n                    }\n\n                    // if (localPoint.x < this.poolTable.rightLimit &&\n                    //     localPoint.x > this.poolTable.leftLimit &&\n                    //     localPoint.y < this.poolTable.downLimit &&\n                    //     localPoint.y > this.poolTable.upLimit) {\n\n                    let ballPositionCirclePosition: Vector2 = new Vector2(localPoint.x, localPoint.y);\n                    if (ballPositionCirclePosition.x + PockeySettings.BALL_RADIUS > this.poolTable.rightLimit)\n                        ballPositionCirclePosition.x = this.poolTable.rightLimit - PockeySettings.BALL_RADIUS;\n                    if (ballPositionCirclePosition.x - PockeySettings.BALL_RADIUS < this.poolTable.leftLimit)\n                        ballPositionCirclePosition.x = this.poolTable.leftLimit + PockeySettings.BALL_RADIUS;\n\n                    if (ballPositionCirclePosition.y + PockeySettings.BALL_RADIUS > this.poolTable.downLimit)\n                        ballPositionCirclePosition.y = this.poolTable.downLimit - PockeySettings.BALL_RADIUS;\n                    if (ballPositionCirclePosition.y - PockeySettings.BALL_RADIUS < this.poolTable.upLimit)\n                        ballPositionCirclePosition.y = this.poolTable.upLimit + PockeySettings.BALL_RADIUS;\n\n                    let ballPosition: Vector2;// = new Vector2(this.poolTable.ballPositionCircle.x,this.poolTable.ballPositionCircle.y)\n\n                    _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                        ballPosition = new Vector2(ball.x, ball.y);\n                        if (ballPositionCirclePosition.distanceTo(ballPosition) < ball.radius + PockeySettings.BALL_RADIUS) {\n                            let opposite: number = ballPositionCirclePosition.y - ballPosition.y;\n                            let adjacent: number = ballPositionCirclePosition.x - ballPosition.x;\n                            let rotAngle: number = Math.atan2(opposite, adjacent);\n\n                            ballPositionCirclePosition.x = ballPosition.x + (PockeySettings.BALL_RADIUS + ball.radius) * Math.cos(rotAngle);\n                            ballPositionCirclePosition.y = ballPosition.y + (PockeySettings.BALL_RADIUS + ball.radius) * Math.sin(rotAngle);\n                            let isInteresectingWithOthers: boolean = false;\n                            _.forEach(this.poolTable.balls, (ball2: AbstractBall) => {\n                                if (ball2 != ball) {\n                                    let ball2Position: Vector2 = new Vector2(ball2.x, ball2.y);\n                                    if (ball2Position.distanceTo(ballPositionCirclePosition) < PockeySettings.BALL_RADIUS + ball2.radius) {\n                                        isInteresectingWithOthers = true;\n                                        return;\n                                    }\n                                }\n                            });\n\n                            if (isInteresectingWithOthers) {\n                                ballPositionCirclePosition.x = this.lastGoodRepositionPoint.x;\n                                ballPositionCirclePosition.y = this.lastGoodRepositionPoint.y;\n                            }\n                            else {\n                                this.lastGoodRepositionPoint.x = ballPositionCirclePosition.x;\n                                this.lastGoodRepositionPoint.y = ballPositionCirclePosition.y;\n                            }\n                        }\n\n                        TweenMax.to(this.poolTable.ballPositionCircle, 0.1, {\n                            x: ballPositionCirclePosition.x,\n                            y: ballPositionCirclePosition.y\n                        });\n                        this.poolTable.ballPositionCircle.visible = true;\n\n\n                    });\n\n                    if (MouseHandler.Instance().left.pressed) {\n                        // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n                        this.repositionWhiteBallEnabled = false;\n                        this.poolTable.ballPositionCircle.visible = false;\n                        // this.poolTable.whiteBall.canBeRemoved = false;\n                        // this.poolTable.whiteBall.x = ballPositionCirclePosition.x;\n                        // P2WorldManager.Instance().world.addBody(this.poolTable.whiteBall.p2Body);\n                        // this.poolTable.whiteBall.p2Body.velocity[0] = 0;\n                        // this.poolTable.whiteBall.p2Body.velocity[1] = 0;\n                        // this.poolTable.whiteBall.addShadowBody();\n\n                        // this.poolTable.whiteBall.alpha = 1;\n                        this.poolTable.whiteBall.reset();\n                        this.poolTable.whiteBall.ballPosition = ballPositionCirclePosition;\n                        this.poolTable.balls.push(this.poolTable.whiteBall);\n                        this.poolTable.addChild(this.poolTable.whiteBall);\n                        this.repositionStick();\n                        // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n\n                        // this.poolTable.whiteBall.y = ballPositionCirclePosition.y;\n                        // this.ticker.add(this.poolTable.whiteBall.update);\n\n                    }\n\n                    return;\n                }\n                // else {\n                if (this.ballsAreMoving()) {\n                    // console.log(\"aici la 1\");\n                    this.handleCollisions();\n                }\n                else {\n                    if (this.whiteBallInThePocket) {\n                        // console.log(\"aici la 2\");\n\n                        SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_IN_POCKET);\n                        this.whiteBallInThePocket = false;\n\n                        return;\n                    }\n\n\n                    if (this.poolTable.poolStick.rotationEnabled) {\n                        // console.log(\"aici la 4\");\n\n                        if (this.graph) {\n                            if (this.graph.parent)\n                                this.graph.parent.removeChild(this.graph);\n                            this.graph.clear();\n                            this.graph = null;\n\n                        }\n                        this.graph = new Graphics();\n\n                        let localPoint = this.poolTable.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\n\n                        let opposite: number = localPoint.y - this.poolTable.whiteBall.y;\n                        let adjacent: number = localPoint.x - this.poolTable.whiteBall.x;\n                        let rot: number = Math.atan2(opposite, adjacent);\n\n                        let dir: Vector2 = new Vector2(Math.cos(rot), Math.sin(rot)).multiply(1100);\n\n                        this.newPos = new Vector2(this.poolTable.whiteBall.x + dir.x, this.poolTable.whiteBall.y + dir.y);\n                        this.shortestContactDistance = this.newPos.distanceTo(this.poolTable.whiteBall.position);\n                        //===================\n                        this.startRayCastPoint[0] = this.poolTable.whiteBall.x;\n                        this.startRayCastPoint[1] = this.poolTable.whiteBall.y;\n                        this.endRayCastPoint[0] = this.newPos.x;\n                        this.endRayCastPoint[1] = this.newPos.y;\n                        // P2WorldManager.Instance().world.removeBody(this.poolTable.whiteBall.p2Body);\n\n                        p2.vec2.copy(this.rayClosest.from, this.startRayCastPoint);\n                        p2.vec2.copy(this.rayClosest.to, this.endRayCastPoint);\n                        // this.rayClosest.\n                        this.rayClosest.update();\n                        this.raycastResult.reset();\n                        P2WorldManager.Instance().world.raycast(this.raycastResult, this.rayClosest);\n                        this.drawRayResult(this.raycastResult, this.rayClosest);\n\n                    }\n\n                    if (this.ballWasShot && this.playerTurnStarted) {\n                        this.ballWasShot = false;\n                        this.playerTurnStarted = false;\n                        // if (this.playerTurnStarted)\n                        // {\n                        //     this.playerTurnStarted = false;\n                        SignalsManager.DispatchSignal(PockeySignalTypes.NEXT_TURN);\n                        //\n                        // }\n                    }\n                }*/\n\n                // console.log(\"==============\");\n            }\n\n            protected sendElementsDataToManager(): void {\n                let ballsData: BallData[] = [];\n\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    ballsData.push(ball.getBallData());\n                });\n\n                if (!Settings.singlePlayer) {\n                    /*let leftBallsData: BallData[] = [];\n\n                    _.forEach(this.poolTable.leftBallsArray, (ball: AbstractBall) => {\n                        leftBallsData.push(ball.getBallData());\n                    });\n\n                    let rightBallsData: BallData[] = [];\n\n                    _.forEach(this.poolTable.rightBallsArray, (ball: AbstractBall) => {\n\n                        rightBallsData.push(ball.getBallData());\n                    });*/\n\n                    let poolTableData: PoolTableData = {\n                        poolstickPivotX: this.poolTable.poolStick.pivot.x,\n                        poolstickRotation: this.poolTable.poolStick.rotation,\n                        poolstickPositionX: this.poolTable.poolStick.position.x,\n                        poolstickPositionY: this.poolTable.poolStick.position.y,\n                        // leftBalls: leftBallsData,\n                        // rightBalls: rightBallsData,\n                        whiteBallData: this.poolTable.whiteBall.getBallData(),\n                        // puckData: this.poolTable.puck.getBallData(),\n                        balls: ballsData,\n\n                        ballPositionCircleVisible: this.poolTable.ballPositionCircle.visible,\n                        ballPositionCircleX: this.poolTable.ballPositionCircle.x,\n                        ballPositionCircleY: this.poolTable.ballPositionCircle.y,\n\n                        ballPositionCircleOnRaycastVisible: this.poolTable.ballPositionCircleOnRaycast.visible,\n                        ballPositionCircleOnRaycastX: this.poolTable.ballPositionCircleOnRaycast.x,\n                        ballPositionCircleOnRaycastY: this.poolTable.ballPositionCircleOnRaycast.y,\n\n                        followerVisible: this.poolTable.raycastFollower.visible,\n                        followerX: this.poolTable.raycastFollower.x,\n                        followerY: this.poolTable.raycastFollower.y,\n\n                        lineBetweenCirclesVisible: this.lineBetweenCirclesVisible,\n                        lineBetweenCirclesPoints: this.lineBetweenCirclesPoints,\n                        graphColor: this.graphColor\n                    };\n                    SignalsManager.DispatchSignal(PockeySignalTypes.SEND_ELEMENTS_DATA_TO_MANAGER, [poolTableData]);\n                    // console.log(\"lungimea array-ului la sendData: \" + this.poolTable.balls.length);\n\n                }\n            }\n\n            private onWatch(params: any[]): void {\n\n                if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onWatch) {\n                    this.onStopAnimatePuckGoal();\n\n                    let poolTableData: PoolTableData = params[0] as PoolTableData;\n                    if (poolTableData.opponentState == PockeyStates.onShoot) {\n                        SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.opponentsTurn]);\n                    }\n                    else {\n                        console.log(\"poolTableData.opponentTimeFinished: \" + poolTableData.opponentTimeFinished);\n                        if (poolTableData.opponentTimeFinished == true) {\n                            this.opponentTimeUp = true;\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.onOpponentsTimeUp]);\n                        }\n                        else {\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [this.uiTextOnWatch]);\n                            this.opponentTimeUp = false;\n                        }\n\n                    }\n\n                    // console.log(\"pool table data: \" + poolTableData);\n                    this.poolTable.poolStick.x = poolTableData.poolstickPositionX;\n                    this.poolTable.poolStick.y = poolTableData.poolstickPositionY;\n                    this.poolTable.poolStick.rotation = poolTableData.poolstickRotation;\n                    this.poolTable.poolStick.reset();\n                    this.poolTable.poolStick.pivot.x = poolTableData.poolstickPivotX;\n                    this.poolTable.poolStick.visible = true;\n\n                    let ballsData: BallData[] = poolTableData.balls;\n\n                    let includesWhiteBall: boolean = false;\n                    let whiteBallData: BallData;\n\n                    _.remove(this.poolTable.balls, (ball: AbstractBall) => {\n                        let canBeKept: boolean = false;\n\n                        _.forEach(ballsData, (ballData: BallData) => {\n                            if (ballData.name == ball.name) {\n                                canBeKept = true;\n                                ball.setBallData(ballData);\n                            }\n                            if (ballData.name == this.poolTable.whiteBall.name) {\n                                whiteBallData = ballData;\n                                includesWhiteBall = true;\n                            }\n                        });\n\n                        if (!canBeKept) {\n                            P2WorldManager.Instance().world.removeBody(ball.p2Body);\n                            P2WorldManager.Instance().world.removeBody(ball.p2BodyShadow);\n                            ball.removed = true;\n                        }\n\n                        return ball.removed;\n                    });\n\n                    if (includesWhiteBall && !_.includes(this.poolTable.balls, this.poolTable.whiteBall)) {\n                        this.poolTable.whiteBall.setBallData(whiteBallData);\n                        this.poolTable.whiteBall.reset();\n                        this.poolTable.addBallToBallsHolder(this.poolTable.whiteBall);\n                        this.poolTable.balls.push(this.poolTable.whiteBall);\n                    }\n\n                    this.graphColor = poolTableData.graphColor;\n                    // console.log(\"lungimea array-ului la watch: \" + this.poolTable.balls.length);\n                    this.poolTable.raycastFollower.visible = poolTableData.followerVisible;\n\n                    if (this.poolTable.raycastFollower.visible) {\n                        if (this.poolTable.raycastFollower.getChildByName(\"graphics\")) {\n                            (this.poolTable.raycastFollower.getChildByName(\"graphics\") as Graphics).tint = this.graphColor;\n                        }\n\n                        this.poolTable.raycastFollower.x = poolTableData.followerX;\n                        this.poolTable.raycastFollower.y = poolTableData.followerY;\n                    }\n\n                    this.poolTable.ballPositionCircle.visible = poolTableData.ballPositionCircleVisible;\n\n                    if (this.poolTable.ballPositionCircle.visible) {\n\n                        this.poolTable.ballPositionCircle.x = poolTableData.ballPositionCircleX;\n                        this.poolTable.ballPositionCircle.y = poolTableData.ballPositionCircleY;\n                    }\n\n                    this.poolTable.ballPositionCircleOnRaycast.visible = poolTableData.ballPositionCircleOnRaycastVisible;\n\n                    if (this.poolTable.ballPositionCircleOnRaycast.visible) {\n                        if (this.poolTable.ballPositionCircleOnRaycast.getChildByName(\"graphics\")) {\n                            (this.poolTable.ballPositionCircleOnRaycast.getChildByName(\"graphics\") as Graphics).tint = this.graphColor;\n                        }\n\n                        this.poolTable.ballPositionCircleOnRaycast.x = poolTableData.ballPositionCircleOnRaycastX;\n                        this.poolTable.ballPositionCircleOnRaycast.y = poolTableData.ballPositionCircleOnRaycastY;\n                    }\n\n\n                    if (this.graph) {\n                        if (this.graph.parent)\n                            this.graph.parent.removeChild(this.graph);\n                        this.graph.clear();\n                        this.graph = null;\n                    }\n\n                    this.lineBetweenCirclesVisible = poolTableData.lineBetweenCirclesVisible;\n                    if (this.lineBetweenCirclesVisible) {\n                        this.graph = new Graphics();\n\n                        this.graph.lineStyle(4, this.graphColor);\n\n                        this.graph.moveTo(poolTableData.lineBetweenCirclesPoints[0], poolTableData.lineBetweenCirclesPoints[1]);\n                        this.graph.lineTo(poolTableData.lineBetweenCirclesPoints[2], poolTableData.lineBetweenCirclesPoints[3]);\n                        this.poolTable.addChild(this.graph);\n                    }\n                }\n\n            }\n\n            private ballsArrayContainsBall(ballName: string): boolean {\n                let contains: boolean = false;\n\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    if (ballName == ball.name) {\n                        contains = true;\n                        return;\n                    }\n                });\n\n                return contains;\n            }\n\n            private removeBallFromArray(ballName: string): void {\n\n                _.remove(this.poolTable.balls, (ball: AbstractBall) => {\n                    if (ballName == ball.name) {\n                        P2WorldManager.Instance().world.removeBody(ball.p2Body);\n                        P2WorldManager.Instance().world.removeBody(ball.p2BodyShadow);\n                    }\n                    return ballName == ball.name;\n                });\n\n\n            }\n\n            protected drawRayResult(result, ray) {\n                // console.log(\"aici la 5\");\n\n                result.getHitPoint(this.hitPoint, ray);\n                // Draw hit point\n                if (result.hasHit()) {\n                    let defaultColor: number = 0xffffff;\n                    this.graphColor = defaultColor;\n\n                    // this.graph.tint = defaultColor;\n                    this.poolTable.raycastFollower.visible = true;\n                    if (this.poolTable.raycastFollower.getChildByName(\"graphics\")) {\n                        (this.poolTable.raycastFollower.getChildByName(\"graphics\") as Graphics).tint = defaultColor;\n                    }\n                    if (this.poolTable.ballPositionCircleOnRaycast.getChildByName(\"graphics\")) {\n                        (this.poolTable.ballPositionCircleOnRaycast.getChildByName(\"graphics\") as Graphics).tint = defaultColor;\n                    }\n\n                    let hitPoint: Vector2 = new Vector2(this.hitPoint[0], this.hitPoint[1]);\n                    let rayFrom: Vector2 = new Vector2(ray.from[0], ray.from[1]);\n\n                    //creating the line from white ball to the next target\n\n                    let opposite: number = ray.from[1] - this.hitPoint[1];\n                    let adjacent: number = ray.from[0] - this.hitPoint[0];\n                    let raycastAngle: number = Math.atan2(opposite, adjacent);\n\n                    let rayCastLineStart: Vector2 = new Vector2();\n                    let rayCastLineEnd: Vector2 = new Vector2(Math.cos(raycastAngle), Math.sin(raycastAngle)).multiply(PockeySettings.BALL_RADIUS);\n\n                    rayCastLineEnd.x += hitPoint.x;//this.hitPoint[0];\n                    rayCastLineEnd.y += hitPoint.y;//this.hitPoint[1];\n\n                    rayCastLineStart.x = ray.from[0] - (PockeySettings.BALL_RADIUS + 4) * Math.cos(raycastAngle);\n                    rayCastLineStart.y = ray.from[1] - (PockeySettings.BALL_RADIUS + 4) * Math.sin(raycastAngle);\n                    this.graph.lineStyle(4, defaultColor);\n\n                    this.graph.moveTo(rayCastLineEnd.x, rayCastLineEnd.y);\n                    this.graph.lineTo(rayCastLineStart.x, rayCastLineStart.y);\n                    this.graph.tint = defaultColor;\n\n                    this.lineBetweenCirclesVisible = true;\n                    this.lineBetweenCirclesPoints = [rayCastLineStart.x, rayCastLineStart.y, rayCastLineEnd.x, rayCastLineEnd.y];\n\n                    this.poolTable.raycastFollower.x = hitPoint.x;\n                    this.poolTable.raycastFollower.y = hitPoint.y;\n                    this.poolTable.ballPositionCircleOnRaycast.x = rayFrom.x;\n                    this.poolTable.ballPositionCircleOnRaycast.y = rayFrom.y;\n\n                    this.poolTable.whiteBallReflectionArrow.visible = false;\n                    this.poolTable.otherBallReflectionArrow.visible = false;\n                    this.poolTable.ballPositionCircleOnRaycast.visible = true;\n\n                    //if the follower hits a ball, then show collision directions graphics\n                    if (!_.isNull(result.shape.radius) && !_.isUndefined(result.shape.radius)) {\n\n                        let isOwnBall: boolean = this.checkIfOwnShadow(result.body);\n\n                        if (isOwnBall) {\n                            defaultColor = 0xca384d;\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.ownBallAiming]);\n                        }\n\n                        this.graphColor = defaultColor;\n\n                        let isPuck: boolean = this.checkIfPuck(result.body);\n                        if (isPuck) {\n                            this.onAnimatePuckGoal();\n                            console.log(\"e puck!!!!\");\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.puckAiming]);\n                        }\n                        else {\n                            this.onStopAnimatePuckGoal();\n                            console.log(\"nu e puck!!!!\");\n\n                        }\n                        /*else {\n                            if (this.isFirstShoot) {\n                                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.beginGame]);\n                            }\n                        }*/\n\n                        this.graph.tint = defaultColor;\n                        if (this.poolTable.raycastFollower.getChildByName(\"graphics\")) {\n                            (this.poolTable.raycastFollower.getChildByName(\"graphics\") as Graphics).tint = defaultColor;\n                        }\n                        if (this.poolTable.ballPositionCircleOnRaycast.getChildByName(\"graphics\")) {\n                            (this.poolTable.ballPositionCircleOnRaycast.getChildByName(\"graphics\") as Graphics).tint = defaultColor;\n                        }\n\n                        let startPoint: Vector2;\n                        let endPoint: Vector2;\n                        let dottedLineArrowPoint: Vector2;\n                        let tangentVector: Vector2 = new Vector2();\n\n                        tangentVector.y = -(result.body.position[0] - this.hitPoint[0]);\n                        tangentVector.x = result.body.position[1] - this.hitPoint[1];\n                        tangentVector = tangentVector.normalise();\n\n                        let relativeVelocity: Vector2 = new Vector2(this.hitPoint[0] - result.body.position[0], this.hitPoint[1] - result.body.position[1]);\n\n                        let length: number = tangentVector.dot(relativeVelocity);\n\n                        let cotangentVector: Vector2 = relativeVelocity.substract(tangentVector.multiply(length)).normalise();\n\n                        let directionLength: number = 85;\n                        let distanceToTheOtherBall: number =\n                            new Vector2(this.hitPoint[0] - Math.cos(raycastAngle) * PockeySettings.BALL_RADIUS, this.hitPoint[1] - Math.sin(raycastAngle) * PockeySettings.BALL_RADIUS)\n                                .distanceTo(new Vector2(result.body.position[0], result.body.position[1]));\n\n                        if (distanceToTheOtherBall > PockeySettings.BALL_RADIUS + result.shape.radius / 2) {\n                            distanceToTheOtherBall = PockeySettings.BALL_RADIUS + result.shape.radius / 2;\n                        }\n                        let arrowScaleFactor: number = (1 - ((result.shape.radius / 2) / distanceToTheOtherBall)) / 0.5;\n                        arrowScaleFactor = Math.round(arrowScaleFactor * 1000) / 1000;\n\n                        if (arrowScaleFactor > 0.03 && !isOwnBall) {\n                            //white ball direction graphics\n\n                            // let whiteBallArrowAngleCorrection: number = (tangentVector.x * tangentVector.y < 0) ? -1 : 1;\n\n                            let whiteBallArrowAngleCorrection: number = 1;//(tangentVector.x * tangentVector.y < 0) ? -1 : 1;\n\n                            startPoint = new Vector2(this.hitPoint[0] - (PockeySettings.BALL_RADIUS * whiteBallArrowAngleCorrection * tangentVector.x), this.hitPoint[1] - (PockeySettings.BALL_RADIUS * whiteBallArrowAngleCorrection * tangentVector.y));\n                            let opposedStartPoint: Vector2 = new Vector2(this.hitPoint[0] + (PockeySettings.BALL_RADIUS * whiteBallArrowAngleCorrection * tangentVector.x), this.hitPoint[1] + (PockeySettings.BALL_RADIUS * whiteBallArrowAngleCorrection * tangentVector.y));\n                            // console.log(\"startPoint.distanceTo(rayFrom): \" + startPoint.distanceTo(rayFrom));\n                            // console.log(\"oppStartPoint.distanceTo(rayFrom): \" + opposedStartPoint.distanceTo(rayFrom));\n                            // console.log(\"=====================\");\n\n                            if (startPoint.distanceTo(rayCastLineEnd) <= opposedStartPoint.distanceTo(rayCastLineEnd)) {\n                                startPoint = opposedStartPoint;\n                                whiteBallArrowAngleCorrection = -1;\n                            }\n\n                            directionLength = 68;\n\n                            endPoint = new Vector2(startPoint.x - whiteBallArrowAngleCorrection * tangentVector.x * directionLength / 3 * arrowScaleFactor, startPoint.y - whiteBallArrowAngleCorrection * tangentVector.y * directionLength / 3 * arrowScaleFactor);\n\n                            this.graph.lineStyle(4, 0xffffff);\n                            this.graph.moveTo(startPoint.x, startPoint.y);\n                            this.graph.lineTo(endPoint.x, endPoint.y);\n\n                            startPoint.x = endPoint.x;\n                            startPoint.y = endPoint.y;\n\n\n                            endPoint.x -= whiteBallArrowAngleCorrection * tangentVector.x * directionLength * 2 / 3 * arrowScaleFactor;\n                            endPoint.y -= whiteBallArrowAngleCorrection * tangentVector.y * directionLength * 2 / 3 * arrowScaleFactor;\n\n                            let dottedLineArrowPoint: Vector2 = PixiDashedLine.drawDashedLine(this.graph, startPoint.x, startPoint.y, endPoint.x, endPoint.y, 1, 0, 0xffffff, 4, 1);\n                            directionLength = 85;\n\n                            // let dottedLineArrowPoint: Vector2 = PixiDashedLine.drawDottedLine(this.graph, startPoint.x, startPoint.y, endPoint.x, endPoint.y, 1, 10, 0xffffff, 1);\n\n                            this.poolTable.whiteBallReflectionArrow.x = dottedLineArrowPoint.x;\n                            this.poolTable.whiteBallReflectionArrow.y = dottedLineArrowPoint.y;\n                            this.poolTable.whiteBallReflectionArrow.rotation = Math.atan2(endPoint.y - startPoint.y, endPoint.x - startPoint.x);\n                            this.poolTable.whiteBallReflectionArrow.visible = true;\n                        }\n                        //other ball direction graphics\n\n                        if ((1 - arrowScaleFactor) > 0.02 && !isOwnBall) {\n                            startPoint = new Vector2(this.hitPoint[0] - (PockeySettings.BALL_RADIUS * cotangentVector.x), this.hitPoint[1] - (PockeySettings.BALL_RADIUS * cotangentVector.y));\n\n                            endPoint = new Vector2(startPoint.x - cotangentVector.x * directionLength / 3 * (1 - arrowScaleFactor), startPoint.y - cotangentVector.y * directionLength / 3 * (1 - arrowScaleFactor));\n\n                            this.graph.lineStyle(4, 0xffffff);\n                            this.graph.moveTo(startPoint.x, startPoint.y);\n                            this.graph.lineTo(endPoint.x, endPoint.y);\n\n                            startPoint.x = endPoint.x;\n                            startPoint.y = endPoint.y;\n\n                            endPoint.x -= cotangentVector.x * directionLength * 2 / 3 * (1 - arrowScaleFactor);\n                            endPoint.y -= cotangentVector.y * directionLength * 2 / 3 * (1 - arrowScaleFactor);\n\n                            dottedLineArrowPoint = PixiDashedLine.drawDottedLine(this.graph, startPoint.x, startPoint.y, endPoint.x, endPoint.y, 1, 10, 0xffffff, 1);\n\n                            this.poolTable.otherBallReflectionArrow.x = dottedLineArrowPoint.x;\n                            this.poolTable.otherBallReflectionArrow.y = dottedLineArrowPoint.y;\n                            this.poolTable.otherBallReflectionArrow.rotation = Math.atan2(endPoint.y - startPoint.y, endPoint.x - startPoint.x);\n                            this.poolTable.otherBallReflectionArrow.visible = true;\n\n                        }\n                    }\n\n                    this.poolTable.addChild(this.graph);\n                }\n\n            };\n\n\n            protected ballsAreMoving(): boolean {\n                let areMoving: boolean = false;\n                _.forEach(this.poolTable.balls, (ball: AbstractBall, id: number) => {\n                    if (ball.moving || ball.animationInProgress) {\n\n                        areMoving = true;\n                        return;\n                    }\n                });\n                return areMoving;\n            }\n\n            protected onStartVersusGame() {\n                // console.log(\"%c Pool T Manager: intra la onStartVersusGame\", \"background: red; color: white; font-weight:bold; \");\n                // this.reactivateStick();\n                // if (this.poolTable.poolStick && !this.poolTable.poolStick.isActive) {\n                //     this.poolTable.poolStick.activate(new Point(this.poolTable.poolStick.startPosition.x, this.poolTable.poolStick.startPosition.y));\n                //     // console.log(\"PockeyStateMachine.Instance().fsm.currentState: \" + PockeyStateMachine.Instance().fsm.currentState);\n                //     SignalsManager.DispatchSignal(PockeySignalTypes.POOLSTICK_ACTIVATED);\n                // }\n                // // this.playerTurnStarted = true;\n                //\n                // this.poolTable.poolStick.activate(new Point(this.poolTable.poolStick.startPosition.x, this.poolTable.poolStick.startPosition.y));\n                // this.ticker.start();\n            }\n\n            private reactivateStick() {\n                // console.log(\"%c Pool T Manager: intra la reactivate Stick\", \"background: red; color: white; font-weight:bold; \");\n                // this.playerTurnStarted = true;\n\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    ball.addShadowBody();\n                });\n                this.poolTable.raycastFollower.visible = true;\n                this.poolTable.ballPositionCircleOnRaycast.visible = true;\n\n                this.poolTable.poolStick.activate(this.poolTable.whiteBall.position);\n            }\n\n            private checkIfOwnShadow(body: p2.Body): boolean {\n                let isOwnBall: boolean = false;\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n\n                    if (ball.ballType == GameManager.Instance().currentPlayer.type && ball.p2BodyShadow.id == body.id) {\n                        isOwnBall = true;\n                    }\n\n                });\n                return isOwnBall;\n            }\n\n            private checkIfPuck(body: p2.Body): boolean {\n                let isPuck: boolean = false;\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n\n                    if (ball.ballType == BallType.Puck && ball.p2BodyShadow.id == body.id) {\n                        // console.log(\"ball.p2Body.id, body.id \" + ball.p2Body.id, body.id);\n                        // && ball.p2Body.id == body.id\n                        isPuck = true;\n                    }\n\n                });\n                return isPuck;\n            }\n\n            private checkIfOwnBall(body: p2.Body): boolean {\n                let isOwnBall: boolean = false;\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    if (ball.ballType == GameManager.Instance().currentPlayer.type && ball.p2Body.id == body.id) {\n                        isOwnBall = true;\n                    }\n                });\n                return isOwnBall;\n            }\n        }\n\n\n    }\n}","///<reference path=\"../../../Framework/Utils/touch-handler.ts\"/>\n\n/**\n *  Edgeflow\n *  Copyright 2018 EdgeFlow\n *  All Rights Reserved.\n *\n *  NOTICE: You may not use, distribute or modify this document without the\n *  written permission of its copyright owner\n *\n *  Created by Sandru Andrei on 7/17/2018\n */\n\n\nnamespace Pockey {\n    export module GameModule {\n\n        import SignalsManager = Framework.Signals.SignalsManager;\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\n        import PockeyStates = Pockey.StateMachineModule.PockeyStates;\n        import PockeyStateMachine = Pockey.StateMachineModule.PockeyStateMachine;\n        import Point = PIXI.Point;\n        import Graphics = PIXI.Graphics;\n        import Vector2 = Framework.Utils.Vector2;\n        import TouchHandler = Framework.Utils.TouchHandler;\n        import PockeyStateTexts = Pockey.StateMachineModule.PockeyStateTexts;\n\n        export class PoolTableManagerMobile extends PoolTableManager {\n            private whiteBallPositionConfirmed: boolean = false;\n            private rearrangeStickStarted: boolean = false;\n\n            // private whiteBallPositionConfirmed:boolean = false;\n\n            constructor() {\n                super();\n\n                SignalsManager.AddSignalCallback(PockeySignalTypes.MOBILE_WHITE_BALL_REPOSITION_CONFIRMED, this.onWhiteBallPositionConfirmed.bind(this));\n            }\n\n            private onWhiteBallPositionConfirmed(): void {\n                this.whiteBallPositionConfirmed = true;\n            }\n\n            protected onShoot(): void {\n                super.onShoot();\n\n                this.rearrangeStickStarted = false;\n            }\n\n            protected update(): void {\n\n                if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onRepositionWhiteBall) {\n                    this.onRepositionWhiteBall();\n\n                    return;\n                }\n\n                else if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onShoot) {\n                    if (!this.ballsAreMoving()) {\n\n                        SignalsManager.DispatchSignal(PockeySignalTypes.NEXT_TURN);\n                    }\n                    else {\n                        this.handleCollisions();\n                        this.sendElementsDataToManager();\n\n                    }\n\n                }\n\n                if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onRearrangeStick) {\n\n                    if (this.poolTable.poolStick.rotationEnabled) {\n                        if (this.isFirstShoot) {\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.beginGame]);\n                        }\n                        else {\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.yourTurnToShoot]);\n                        }\n                        this.poolTable.poolStick.x = this.poolTable.whiteBall.x;\n                        this.poolTable.poolStick.y = this.poolTable.whiteBall.y;\n                        // = new Point(this.poolTable.whieBall.position.x, this.poolTable.whiteBall.position.y);\n\n                        // console.log(\"PockeyStateMachine.Instance().fsm.currentState: \" + PockeyStateMachine.Instance().fsm.currentState);\n\n                        // if (!this.poolTable.poolStick.isActive)\n                        // {\n                        //     // this.poolTable.poolStick.activate(new Point(this.poolTable.poolStick.startPosition.x, this.poolTable.poolStick.startPosition.y));\n                        // }\n\n                        if (this.graph) {\n                            if (this.graph.parent)\n                                this.graph.parent.removeChild(this.graph);\n                            this.graph.clear();\n                            this.graph = null;\n\n                        }\n                        this.graph = new Graphics();\n\n                        let localPoint = this.poolTable.toLocal(new Point(TouchHandler.Instance().position.x, TouchHandler.Instance().position.y));\n                        if (!this.rearrangeStickStarted) {\n                            // this.rearrangeStickStarted = true;\n                            localPoint.x = this.poolTable.poolStick.x + 10 * Math.cos(this.poolTable.poolStick.rotation);\n                            localPoint.y = this.poolTable.poolStick.y + 10 * Math.sin(this.poolTable.poolStick.rotation);\n                            /* let salam:Graphics = new Graphics();\n                             salam.beginFill(0xff9900);\n                             salam.drawCircle(localPoint.x, localPoint.y, 20)\n                             salam.endFill();\n                             this.poolTable.addChild(salam)*/\n\n                            // console.log(\"aicisha: \" + this.poolTable.poolStick.rotation * 180 / Math.PI, localPoint.x, localPoint.y);\n                            // this.rearrangeStickStarted = true;\n                        }\n\n                        if (TouchHandler.Instance().isTouchMoving) {\n                            this.rearrangeStickStarted = true;\n                        }\n                        let opposite: number = localPoint.y - this.poolTable.whiteBall.y;\n                        let adjacent: number = localPoint.x - this.poolTable.whiteBall.x;\n                        let rot: number = Math.atan2(opposite, adjacent);\n\n                        let dir: Vector2 = new Vector2(Math.cos(rot), Math.sin(rot)).multiply(1100);\n\n                        this.newPos = new Vector2(this.poolTable.whiteBall.x + dir.x, this.poolTable.whiteBall.y + dir.y);\n                        this.shortestContactDistance = this.newPos.distanceTo(this.poolTable.whiteBall.position);\n                        //===================\n                        this.startRayCastPoint[0] = this.poolTable.whiteBall.x;\n                        this.startRayCastPoint[1] = this.poolTable.whiteBall.y;\n                        this.endRayCastPoint[0] = this.newPos.x;\n                        this.endRayCastPoint[1] = this.newPos.y;\n                        // P2WorldManager.Instance().world.removeBody(this.poolTable.whiteBall.p2Body);\n\n                        p2.vec2.copy(this.rayClosest.from, this.startRayCastPoint);\n                        p2.vec2.copy(this.rayClosest.to, this.endRayCastPoint);\n                        // this.rayClosest.\n                        this.rayClosest.update();\n                        this.raycastResult.reset();\n                        P2WorldManager.Instance().world.raycast(this.raycastResult, this.rayClosest);\n                        this.drawRayResult(this.raycastResult, this.rayClosest);\n                    }\n                    this.sendElementsDataToManager();\n                }\n                /*// this.graph.lineStyle(2, 0xffffff);\n                // this.graph.moveTo(localPoint.x, localPoint.y);\n                if (this.repositionWhiteBallEnabled) {\n                    if (this.graph) {\n                        if (this.graph.parent)\n                            this.graph.parent.removeChild(this.graph);\n                        this.graph.clear();\n                        this.graph = null;\n                    }\n\n                    // if (localPoint.x < this.poolTable.rightLimit &&\n                    //     localPoint.x > this.poolTable.leftLimit &&\n                    //     localPoint.y < this.poolTable.downLimit &&\n                    //     localPoint.y > this.poolTable.upLimit) {\n\n                    let ballPositionCirclePosition: Vector2 = new Vector2(localPoint.x, localPoint.y);\n                    if (ballPositionCirclePosition.x + PockeySettings.BALL_RADIUS > this.poolTable.rightLimit)\n                        ballPositionCirclePosition.x = this.poolTable.rightLimit - PockeySettings.BALL_RADIUS;\n                    if (ballPositionCirclePosition.x - PockeySettings.BALL_RADIUS < this.poolTable.leftLimit)\n                        ballPositionCirclePosition.x = this.poolTable.leftLimit + PockeySettings.BALL_RADIUS;\n\n                    if (ballPositionCirclePosition.y + PockeySettings.BALL_RADIUS > this.poolTable.downLimit)\n                        ballPositionCirclePosition.y = this.poolTable.downLimit - PockeySettings.BALL_RADIUS;\n                    if (ballPositionCirclePosition.y - PockeySettings.BALL_RADIUS < this.poolTable.upLimit)\n                        ballPositionCirclePosition.y = this.poolTable.upLimit + PockeySettings.BALL_RADIUS;\n\n                    let ballPosition: Vector2;// = new Vector2(this.poolTable.ballPositionCircle.x,this.poolTable.ballPositionCircle.y)\n\n                    _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                        ballPosition = new Vector2(ball.x, ball.y);\n                        if (ballPositionCirclePosition.distanceTo(ballPosition) < ball.radius + PockeySettings.BALL_RADIUS) {\n                            let opposite: number = ballPositionCirclePosition.y - ballPosition.y;\n                            let adjacent: number = ballPositionCirclePosition.x - ballPosition.x;\n                            let rotAngle: number = Math.atan2(opposite, adjacent);\n\n                            ballPositionCirclePosition.x = ballPosition.x + (PockeySettings.BALL_RADIUS + ball.radius) * Math.cos(rotAngle);\n                            ballPositionCirclePosition.y = ballPosition.y + (PockeySettings.BALL_RADIUS + ball.radius) * Math.sin(rotAngle);\n                            let isInteresectingWithOthers: boolean = false;\n                            _.forEach(this.poolTable.balls, (ball2: AbstractBall) => {\n                                if (ball2 != ball) {\n                                    let ball2Position: Vector2 = new Vector2(ball2.x, ball2.y);\n                                    if (ball2Position.distanceTo(ballPositionCirclePosition) < PockeySettings.BALL_RADIUS + ball2.radius) {\n                                        isInteresectingWithOthers = true;\n                                        return;\n                                    }\n                                }\n                            });\n\n                            if (isInteresectingWithOthers) {\n                                ballPositionCirclePosition.x = this.lastGoodRepositionPoint.x;\n                                ballPositionCirclePosition.y = this.lastGoodRepositionPoint.y;\n                            }\n                            else {\n                                this.lastGoodRepositionPoint.x = ballPositionCirclePosition.x;\n                                this.lastGoodRepositionPoint.y = ballPositionCirclePosition.y;\n                            }\n                        }\n\n                        TweenMax.to(this.poolTable.ballPositionCircle, 0.1, {\n                            x: ballPositionCirclePosition.x,\n                            y: ballPositionCirclePosition.y\n                        });\n                        this.poolTable.ballPositionCircle.visible = true;\n\n\n                    });\n\n                    if (MouseHandler.Instance().left.pressed) {\n                        // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n                        this.repositionWhiteBallEnabled = false;\n                        this.poolTable.ballPositionCircle.visible = false;\n                        // this.poolTable.whiteBall.canBeRemoved = false;\n                        // this.poolTable.whiteBall.x = ballPositionCirclePosition.x;\n                        // P2WorldManager.Instance().world.addBody(this.poolTable.whiteBall.p2Body);\n                        // this.poolTable.whiteBall.p2Body.velocity[0] = 0;\n                        // this.poolTable.whiteBall.p2Body.velocity[1] = 0;\n                        // this.poolTable.whiteBall.addShadowBody();\n\n                        // this.poolTable.whiteBall.alpha = 1;\n                        this.poolTable.whiteBall.reset();\n                        this.poolTable.whiteBall.ballPosition = ballPositionCirclePosition;\n                        this.poolTable.balls.push(this.poolTable.whiteBall);\n                        this.poolTable.addChild(this.poolTable.whiteBall);\n                        this.repositionStick();\n                        // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n\n                        // this.poolTable.whiteBall.y = ballPositionCirclePosition.y;\n                        // this.ticker.add(this.poolTable.whiteBall.update);\n\n                    }\n\n                    return;\n                }\n                // else {\n                if (this.ballsAreMoving()) {\n                    // console.log(\"aici la 1\");\n                    this.handleCollisions();\n                }\n                else {\n                    if (this.whiteBallInThePocket) {\n                        // console.log(\"aici la 2\");\n\n                        SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_IN_POCKET);\n                        this.whiteBallInThePocket = false;\n\n                        return;\n                    }\n\n\n                    if (this.poolTable.poolStick.rotationEnabled) {\n                        // console.log(\"aici la 4\");\n\n                        if (this.graph) {\n                            if (this.graph.parent)\n                                this.graph.parent.removeChild(this.graph);\n                            this.graph.clear();\n                            this.graph = null;\n\n                        }\n                        this.graph = new Graphics();\n\n                        let localPoint = this.poolTable.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\n\n                        let opposite: number = localPoint.y - this.poolTable.whiteBall.y;\n                        let adjacent: number = localPoint.x - this.poolTable.whiteBall.x;\n                        let rot: number = Math.atan2(opposite, adjacent);\n\n                        let dir: Vector2 = new Vector2(Math.cos(rot), Math.sin(rot)).multiply(1100);\n\n                        this.newPos = new Vector2(this.poolTable.whiteBall.x + dir.x, this.poolTable.whiteBall.y + dir.y);\n                        this.shortestContactDistance = this.newPos.distanceTo(this.poolTable.whiteBall.position);\n                        //===================\n                        this.startRayCastPoint[0] = this.poolTable.whiteBall.x;\n                        this.startRayCastPoint[1] = this.poolTable.whiteBall.y;\n                        this.endRayCastPoint[0] = this.newPos.x;\n                        this.endRayCastPoint[1] = this.newPos.y;\n                        // P2WorldManager.Instance().world.removeBody(this.poolTable.whiteBall.p2Body);\n\n                        p2.vec2.copy(this.rayClosest.from, this.startRayCastPoint);\n                        p2.vec2.copy(this.rayClosest.to, this.endRayCastPoint);\n                        // this.rayClosest.\n                        this.rayClosest.update();\n                        this.raycastResult.reset();\n                        P2WorldManager.Instance().world.raycast(this.raycastResult, this.rayClosest);\n                        this.drawRayResult(this.raycastResult, this.rayClosest);\n\n                    }\n\n                    if (this.ballWasShot && this.playerTurnStarted) {\n                        this.ballWasShot = false;\n                        this.playerTurnStarted = false;\n                        // if (this.playerTurnStarted)\n                        // {\n                        //     this.playerTurnStarted = false;\n                        SignalsManager.DispatchSignal(PockeySignalTypes.NEXT_TURN);\n                        //\n                        // }\n                    }\n                }*/\n\n                // console.log(\"==============\");\n            }\n\n\n            protected onStartVersusGame() {\n                // console.log(\"%c Pool T Manager: intra la onStartVersusGame\", \"background: red; color: white; font-weight:bold; \");\n\n                if (this.poolTable.poolStick && !this.poolTable.poolStick.isActive) {\n                    this.poolTable.poolStick.activate(new Point(this.poolTable.poolStick.initialPosition.x, this.poolTable.poolStick.initialPosition.y));\n                    // console.log(\"PockeyStateMachine.Instance().fsm.currentState: \" + PockeyStateMachine.Instance().fsm.currentState);\n                    SignalsManager.DispatchSignal(PockeySignalTypes.POOLSTICK_ACTIVATED);\n                }\n                // // this.playerTurnStarted = true;\n                //\n                // this.poolTable.poolStick.activate(new Point(this.poolTable.poolStick.startPosition.x, this.poolTable.poolStick.startPosition.y));\n                // this.ticker.start();\n            }\n\n            protected onRepositionWhiteBall(): void {\n                // console.log(\"%c Pool T Manager: intra la onRepositionWhiteBall\", \"background: red; color: white; font-weight:bold; \");\n\n                /*       console.log(\"ball repos started\");\n\n                       this.poolTable.whiteBallReflectionArrow.visible = false;\n                       this.poolTable.otherBallReflectionArrow.visible = false;\n                       this.poolTable.ballPositionCircleOnRaycast.visible = false;\n                       this.poolTable.ballPositionCircle.visible = false;\n                       // let localPoint = this.poolTable.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\n                       // this.poolTable.ballPositionCircle.x = localPoint.x;\n                       // this.poolTable.ballPositionCircle.y = localPoint.y;\n                       this.lastGoodRepositionPoint = new Vector2();\n                       this.repositionWhiteBallEnabled = true;*/\n                if (this.opponentTimeUp) {\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.onOpponentsTimeUp]);\n                }\n                else\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.opponentFault]);\n\n                let localPoint = this.poolTable.toLocal(new Point(TouchHandler.Instance().position.x, TouchHandler.Instance().position.y));\n\n                if (_.isNull(this.lastGoodRepositionPoint) || _.isUndefined(this.lastGoodRepositionPoint)) {\n                    this.lastGoodRepositionPoint = new Vector2();\n                }\n\n                if (this.graph) {\n                    if (this.graph.parent)\n                        this.graph.parent.removeChild(this.graph);\n                    this.graph.clear();\n                    this.graph = null;\n                }\n\n                // if (localPoint.x < this.poolTable.rightLimit &&\n                //     localPoint.x > this.poolTable.leftLimit &&\n                //     localPoint.y < this.poolTable.downLimit &&\n                //     localPoint.y > this.poolTable.upLimit) {\n                //todo vezi ca mouse-ul sa fie in limita tablei de joc\n                //vezi ca daca-i white ball penalty si e la margine, poti sa pui acolo follower-ul. nu-i ok boss\n                let ballPositionCirclePosition: Vector2 = new Vector2(localPoint.x, localPoint.y);\n                if (ballPositionCirclePosition.x + PockeySettings.BALL_RADIUS > this.poolTable.rightLimit)\n                    ballPositionCirclePosition.x = this.poolTable.rightLimit - PockeySettings.BALL_RADIUS;\n                if (ballPositionCirclePosition.x - PockeySettings.BALL_RADIUS < this.poolTable.leftLimit)\n                    ballPositionCirclePosition.x = this.poolTable.leftLimit + PockeySettings.BALL_RADIUS;\n\n                if (ballPositionCirclePosition.y + PockeySettings.BALL_RADIUS > this.poolTable.downLimit)\n                    ballPositionCirclePosition.y = this.poolTable.downLimit - PockeySettings.BALL_RADIUS;\n                if (ballPositionCirclePosition.y - PockeySettings.BALL_RADIUS < this.poolTable.upLimit)\n                    ballPositionCirclePosition.y = this.poolTable.upLimit + PockeySettings.BALL_RADIUS;\n\n                let ballPosition: Vector2;// = new Vector2(this.poolTable.ballPositionCircle.x,this.poolTable.ballPositionCircle.y)\n\n                _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                    ballPosition = new Vector2(ball.x, ball.y);\n                    if (ballPositionCirclePosition.distanceTo(ballPosition) < ball.radius + PockeySettings.BALL_RADIUS) {\n                        let opposite: number = ballPositionCirclePosition.y - ballPosition.y;\n                        let adjacent: number = ballPositionCirclePosition.x - ballPosition.x;\n                        let rotAngle: number = Math.atan2(opposite, adjacent);\n\n                        ballPositionCirclePosition.x = ballPosition.x + (PockeySettings.BALL_RADIUS + ball.radius) * Math.cos(rotAngle);\n                        ballPositionCirclePosition.y = ballPosition.y + (PockeySettings.BALL_RADIUS + ball.radius) * Math.sin(rotAngle);\n                        let isInteresectingWithOthers: boolean = false;\n                        _.forEach(this.poolTable.balls, (ball2: AbstractBall) => {\n                            if (ball2 != ball) {\n                                let ball2Position: Vector2 = new Vector2(ball2.x, ball2.y);\n                                if (ball2Position.distanceTo(ballPositionCirclePosition) < PockeySettings.BALL_RADIUS + ball2.radius) {\n                                    isInteresectingWithOthers = true;\n                                    return;\n                                }\n                            }\n                        });\n\n                        if (isInteresectingWithOthers) {\n                            ballPositionCirclePosition.x = this.lastGoodRepositionPoint.x;\n                            ballPositionCirclePosition.y = this.lastGoodRepositionPoint.y;\n                        }\n                        else {\n                            this.lastGoodRepositionPoint.x = ballPositionCirclePosition.x;\n                            this.lastGoodRepositionPoint.y = ballPositionCirclePosition.y;\n                        }\n                    }\n\n                    TweenMax.to(this.poolTable.ballPositionCircle, 0, {\n                        x: ballPositionCirclePosition.x,\n                        y: ballPositionCirclePosition.y\n                    });\n                    this.poolTable.ballPositionCircle.visible = true;\n\n                });\n\n                if (TouchHandler.Instance().isTouchMoving) {\n                    this.repositionStarted = true;\n                }\n                if (this.repositionStarted && this.whiteBallPositionConfirmed) {\n                    this.repositionStarted = false;\n\n                    // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n                    this.repositionWhiteBallEnabled = false;\n                    this.poolTable.ballPositionCircle.visible = false;\n                    // this.poolTable.whiteBall.canBeRemoved = false;\n                    // this.poolTable.whiteBall.x = ballPositionCirclePosition.x;\n                    // P2WorldManager.Instance().world.addBody(this.poolTable.whiteBall.p2Body);\n                    // this.poolTable.whiteBall.p2Body.velocity[0] = 0;\n                    // this.poolTable.whiteBall.p2Body.velocity[1] = 0;\n                    // this.poolTable.whiteBall.addShadowBody();\n\n                    // this.poolTable.whiteBall.alpha = 1;\n                    this.poolTable.whiteBall.reset();\n                    this.poolTable.whiteBall.ballPosition = ballPositionCirclePosition;\n                    // if(this.poolTable.balls.cont)\n                    this.poolTable.balls.push(this.poolTable.whiteBall);\n                    this.poolTable.addBallToBallsHolder(this.poolTable.whiteBall);\n                    // this.poolTable.whiteBall.alpha = 1;//(this.poolTable.whiteBall);\n                    // this.repositionStick();\n                    // SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n                    this.whiteBallPositionConfirmed = false;\n                    SignalsManager.DispatchSignal(PockeySignalTypes.HIDE_WHITE_BALL_POSITION_CONFIRMER);\n                    SignalsManager.DispatchSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\n\n                    if (!this.poolTable.poolStick.isActive) {\n                        _.forEach(this.poolTable.balls, (ball: AbstractBall) => {\n                            ball.addShadowBody();\n                        });\n                        this.poolTable.raycastFollower.visible = true;\n                        this.poolTable.ballPositionCircleOnRaycast.visible = true;\n\n                        this.poolTable.poolStick.activate(new Point(this.poolTable.whiteBall.x, this.poolTable.whiteBall.y));\n                        // console.log(\"PockeyStateMachine.Instance().fsm.currentState: \" + PockeyStateMachine.Instance().fsm.currentState);\n                    }\n                    // this.poolTable.whiteBall.y = ballPositionCirclePosition.y;\n                    // this.ticker.add(this.poolTable.whiteBall.update);\n\n                }\n            }\n        }\n\n\n    }\n}","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/8/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        import Sprite = PIXI.Sprite;\r\n        import Graphics = PIXI.Graphics;\r\n        import Point = PIXI.Point;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export class MobileStickPower extends Container {\r\n            private stickTexture: Sprite;\r\n            private backgroundGraphics: Sprite;\r\n            private touchGraphics: Container;\r\n            private initialStickY: number = 60;\r\n            private stickMaxY: number = 528;\r\n            private isDown: boolean = false;\r\n            private stickPowerFactor: number = PockeySettings.DELTA * 10;\r\n            private power: number;\r\n\r\n            constructor() {\r\n                super();\r\n                this.visible = false;\r\n\r\n                this.backgroundGraphics = new Sprite(PIXI.Texture.fromFrame(\"power-bg.png\"));\r\n                this.backgroundGraphics.anchor.x = 0.5;\r\n\r\n                this.addChild(this.backgroundGraphics);\r\n\r\n                this.stickTexture = new Sprite(PIXI.Texture.fromFrame(StickType.Default));\r\n                this.stickTexture.anchor.y = 0.5;\r\n                this.stickTexture.anchor.x = 1;\r\n                this.stickTexture.rotation = -90 * Math.PI / 180;\r\n                this.stickTexture.y = this.initialStickY;\r\n\r\n                this.addChild(this.stickTexture);\r\n\r\n                this.touchGraphics = new Container();\r\n                this.touchGraphics.interactive = true;\r\n                let newGr: Graphics = new Graphics();\r\n                newGr.beginFill(0xff9900, 0);\r\n                newGr.drawRect(0, 0, this.backgroundGraphics.width, this.backgroundGraphics.height);\r\n                // newGr.pivot.y = this.stickTexture.anchor.y * newGr.height;\r\n                // newGr.pivot.x = this.stickTexture.anchor.x * newGr.width;\r\n                newGr.x = this.backgroundGraphics.x;\r\n                newGr.y = this.backgroundGraphics.y;\r\n                // newGr.rotation = this.stickTexture.rotation;\r\n                this.touchGraphics.addChild(newGr);\r\n                this.touchGraphics.pivot.x = this.backgroundGraphics.anchor.x * this.touchGraphics.width;\r\n\r\n                this.touchGraphics.on(\"touchstart\", (event) => {\r\n                    this.isDown = true;\r\n                    let localPosition: Point = new Point();\r\n                    event.data.getLocalPosition(this.touchGraphics, localPosition, event.data.global);\r\n                    this.stickTexture.y = localPosition.y;\r\n                    if (this.stickTexture.y < this.initialStickY)\r\n                        this.stickTexture.y = this.initialStickY;\r\n                    else if (this.stickTexture.y > this.stickMaxY)\r\n                        this.stickTexture.y = this.stickMaxY;\r\n                    console.log(\"mobile stick start \");\r\n                    this.power = (this.stickTexture.y - this.initialStickY) * (PockeySettings.STICK_MAX_POWER / (this.stickMaxY - this.initialStickY));\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.STICK_PIVOT_MOBILE_UPDATE, [this.power]);\r\n\r\n                });\r\n\r\n                this.touchGraphics.on(\"touchmove\", (event) => {\r\n                    if (this.isDown) {\r\n\r\n                        let localPosition: Point = new Point();\r\n                        event.data.getLocalPosition(this.touchGraphics, localPosition, event.data.global);\r\n                        this.stickTexture.y = localPosition.y;\r\n                        if (this.stickTexture.y < this.initialStickY)\r\n                            this.stickTexture.y = this.initialStickY;\r\n                        else if (this.stickTexture.y > this.stickMaxY)\r\n                            this.stickTexture.y = this.stickMaxY;\r\n\r\n                        this.power = (this.stickTexture.y - this.initialStickY) * (PockeySettings.STICK_MAX_POWER / (this.stickMaxY - this.initialStickY));\r\n\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.STICK_PIVOT_MOBILE_UPDATE, [this.power]);\r\n\r\n                    }\r\n                });\r\n\r\n                this.touchGraphics.on(\"touchend\", () => {\r\n                    this.isDown = false;\r\n\r\n                    TweenMax.to(this.stickTexture, 0.05, {y: this.initialStickY});\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.STICK_MOBILE_RELEASE, [this.power]);\r\n\r\n                    /*let power: number = (this.stickTexture.y - this.initialStickY) * (PockeySettings.STICK_MAX_POWER / (this.stickMaxY - this.initialStickY));\r\n                    power *= this.stickPowerFactor;*/\r\n                });\r\n\r\n                this.touchGraphics.on(\"touchendoutside\", () => {\r\n                    this.isDown = false;\r\n\r\n                    TweenMax.to(this.stickTexture, 0.05, {y: this.initialStickY});\r\n\r\n                    /*let power: number = (this.stickTexture.y - this.initialStickY) * (PockeySettings.STICK_MAX_POWER / (this.stickMaxY - this.initialStickY));\r\n                    power *= this.stickPowerFactor;*/\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.STICK_MOBILE_RELEASE, [this.power]);\r\n\r\n                });\r\n\r\n                this.addChild(this.touchGraphics);\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.HIDE_STICK_POWER_MOBILE, this.onHide.bind(this))\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SHOW_STICK_POWER_MOBILE, this.onShow.bind(this))\r\n            }\r\n\r\n            private onHide(): void {\r\n                TweenMax.to(this, 0.2, {\r\n                    alpha: 0, onComplete: () => {\r\n                        this.visible = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            private onShow(): void {\r\n                this.visible = true;\r\n                TweenMax.to(this, 0.2, {\r\n                    alpha: 1\r\n                });\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../SignalsModule/pockey-signal-types.ts\"/>\r\n///<reference path=\"../../../Framework/Abstracts/abstract-module.ts\"/>\r\n///<reference path=\"../../../Framework/Signals/signals-manager.ts\"/>\r\n///<reference path=\"../../../Framework/Settings.ts\"/>\r\n///<reference path=\"pool-table-manager.ts\"/>\r\n///<reference path=\"pool-table-manager-mobile.ts\"/>\r\n///<reference path=\"mobile-stick-power.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2017 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/12/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n\r\n        import AbstractModule = Framework.Abstracts.AbstractModule;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n        import Point = PIXI.Point;\r\n        import Settings = Framework.Settings;\r\n        import Graphics = PIXI.Graphics;\r\n        import Sprite = PIXI.Sprite;\r\n\r\n        export class PockeyGameModule extends AbstractModule {\r\n            // private poolTable: PoolTable;\r\n            private levelManager: PoolTableManager;\r\n            public confirmWhiteBallPlacementTexture: Sprite;\r\n            public mobileStickPower: MobileStickPower;\r\n\r\n            private zeroPosition: Graphics;\r\n\r\n            createElements(): void {\r\n\r\n                if (Settings.isMobile) {\r\n                    this.levelManager = new PoolTableManagerMobile();\r\n                }\r\n                else {\r\n                    this.levelManager = new PoolTableManager();\r\n\r\n                }\r\n                this.addChild(this.levelManager.poolTable);\r\n                // this.poolTable = new PoolTable();//todo aici ai putea sa importi level manager (denumit acum game mechanics), hmm\r\n                // this.addChild(this.poolTable);//todo si aici addchild level manager.pooltable care e public\r\n                // this.handleDesktopLandscape();\r\n\r\n                if (Settings.isMobile) {\r\n                    this.confirmWhiteBallPlacementTexture = new Sprite(PIXI.Texture.fromFrame(\"penalty-droppuck.png\"));\r\n                    this.confirmWhiteBallPlacementTexture.anchor.x = 0.5;\r\n                    this.confirmWhiteBallPlacementTexture.anchor.y = 0.5;\r\n                    this.confirmWhiteBallPlacementTexture.visible = false;\r\n                    this.addChild(this.confirmWhiteBallPlacementTexture);\r\n                    this.confirmWhiteBallPlacementTexture.interactive = true;\r\n                    this.confirmWhiteBallPlacementTexture.on(\"tap\", () => {\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.MOBILE_WHITE_BALL_REPOSITION_CONFIRMED);\r\n                    });\r\n\r\n                    this.mobileStickPower = new MobileStickPower();\r\n                    this.addChild(this.mobileStickPower);\r\n\r\n                    SignalsManager.AddSignalCallback(PockeySignalTypes.SHOW_WHITE_BALL_POSITION_CONFIRMER, this.onShowWhiteBallPositionConfirmer.bind(this))\r\n                    SignalsManager.AddSignalCallback(PockeySignalTypes.HIDE_WHITE_BALL_POSITION_CONFIRMER, this.onHideWhiteBallPositionConfirmer.bind(this))\r\n                    // this.mobileStickPower.anchor.y = 0.5;\r\n                    // this.confirmWhiteBallPlacementTexture.visible = false;\r\n                    // this.addChild(this.mobileStickPower);\r\n                }\r\n\r\n                super.createElements();\r\n            }\r\n\r\n            private onShowWhiteBallPositionConfirmer(): void {\r\n                this.confirmWhiteBallPlacementTexture.visible = true;\r\n            }\r\n\r\n            private onHideWhiteBallPositionConfirmer(): void {\r\n                this.confirmWhiteBallPlacementTexture.visible = false;\r\n            }\r\n\r\n            /*protected onResize(params: any[]): void {\r\n                super.onResize(params);\r\n                // console.log(\"orientarea: \" + window.orientation);\r\n\r\n                /!*if (this.zeroPosition) {\r\n                    if (this.zeroPosition.parent)\r\n                        this.zeroPosition.parent.removeChild(this.zeroPosition);\r\n                    this.zeroPosition.clear();\r\n                    this.zeroPosition = null;\r\n                }\r\n\r\n                this.zeroPosition = new Graphics();\r\n                this.zeroPosition.beginFill(0xff9900, 0.6);\r\n                this.zeroPosition.drawCircle(0, 0, 40);\r\n                this.zeroPosition.endFill();\r\n\r\n                this.addChild(this.zeroPosition);*!/\r\n\r\n            }*/\r\n\r\n            protected handleDesktopLandscape(): void {\r\n                super.handleDesktopLandscape();\r\n                // console.log(\"stage width: \" + this.stageWidth);\r\n                // console.log(\"stage height: \" + this.stageHeight);\r\n\r\n                if (this.levelManager && this.levelManager.poolTable) {\r\n\r\n                    this.levelManager.poolTable.poolStick.visible = false;\r\n                    // console.log(\"this.levelManager.poolTable width after: \" + this.levelManager.poolTable.width);\r\n                    this.levelManager.poolTable.height = 0.7 * Settings.stageHeight;\r\n                    let backgroundScaleFactor: number = this.levelManager.poolTable.scale.y;\r\n                    this.levelManager.poolTable.scale.x = backgroundScaleFactor;\r\n\r\n                    this.levelManager.poolTable.x = Settings.stageWidth / 2;\r\n                    this.levelManager.poolTable.y = 0.18 * Settings.stageHeight + this.levelManager.poolTable.height / 2;//\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED, [backgroundScaleFactor, this.levelManager.poolTable.position, this.levelManager.poolTable.rotation, this.levelManager.poolTable.width, this.levelManager.poolTable.height]);\r\n\r\n                    this.levelManager.poolTable.poolStick.visible = true;\r\n\r\n                }\r\n            }\r\n\r\n            protected handleMobileLandscape(): void {\r\n                // console.log(\"stage width: \" + this.stageWidth);\r\n                // console.log(\"stage height: \" + this.stageHeight);\r\n\r\n                if (this.levelManager && this.levelManager.poolTable) {\r\n\r\n                    this.levelManager.poolTable.poolStick.visible = false;\r\n                    // console.log(\"this.levelManager.poolTable width after: \" + this.levelManager.poolTable.width);\r\n                    this.levelManager.poolTable.height = 0.9 * Settings.stageHeight;\r\n                    let backgroundScaleFactor: number = this.levelManager.poolTable.scale.y;\r\n                    this.levelManager.poolTable.scale.x = backgroundScaleFactor;\r\n\r\n                    this.levelManager.poolTable.rotation = 0;\r\n\r\n                    this.levelManager.poolTable.x = Settings.stageWidth / 2;\r\n                    this.levelManager.poolTable.y = 0.05 * Settings.stageHeight + this.levelManager.poolTable.height / 2;//\r\n\r\n                    this.confirmWhiteBallPlacementTexture.rotation = 0;\r\n\r\n                    this.confirmWhiteBallPlacementTexture.scale.x = this.confirmWhiteBallPlacementTexture.scale.y = backgroundScaleFactor;\r\n                    this.confirmWhiteBallPlacementTexture.x = Settings.stageWidth / 4 - this.levelManager.poolTable.width / 4;\r\n                    if (this.confirmWhiteBallPlacementTexture.x < 5 + this.confirmWhiteBallPlacementTexture.width / 2)\r\n                        this.confirmWhiteBallPlacementTexture.x = 5 + this.confirmWhiteBallPlacementTexture.width / 2;\r\n\r\n                    this.confirmWhiteBallPlacementTexture.y = Settings.stageHeight / 2;// - this.levelManager.poolTable.width / 4;//- this.levelManager.poolTable.width) / 2;\r\n\r\n                    this.mobileStickPower.rotation = 0;\r\n                    this.mobileStickPower.scale.x = this.mobileStickPower.scale.y = backgroundScaleFactor;\r\n                    this.mobileStickPower.x = this.confirmWhiteBallPlacementTexture.x;//Settings.stageWidth / 4 - this.levelManager.poolTable.width / 4;\r\n                    // if (this.mobileStickPower.x < 5 + this.mobileStickPower.width / 2)\r\n                    //     this.mobileStickPower.x = 5 + this.mobileStickPower.width / 2;\r\n                    this.mobileStickPower.y = Settings.stageHeight / 2 - this.mobileStickPower.height / 2;// - this.levelManager.poolTable.width / 4;//- this.levelManager.poolTable.width) / 2;\r\n\r\n                    // console.log(\"this.levelManager.poolTable.rotation: \" + this.levelManager.poolTable.rotation);\r\n\r\n                    let newPos: Point = new Point();\r\n                    newPos.x = this.levelManager.poolTable.position.x;\r\n                    newPos.y = this.levelManager.poolTable.position.y + this.levelManager.poolTable.height * 0.019;\r\n\r\n                    this.levelManager.poolTable.poolStick.visible = true;\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED, [backgroundScaleFactor, newPos, this.levelManager.poolTable.rotation])\r\n                }\r\n\r\n            }\r\n\r\n            protected handleMobilePortrait(): void {\r\n                // console.log(\"stage width: \" + this.stageWidth);\r\n                // console.log(\"stage height: \" + this.stageHeight);\r\n\r\n                if (this.levelManager && this.levelManager.poolTable) {\r\n\r\n                    this.levelManager.poolTable.poolStick.visible = false;\r\n                    // console.log(\"this.levelManager.poolTable width after: \" + this.levelManager.poolTable.width);\r\n                    this.levelManager.poolTable.height = 0.9 * Settings.stageWidth;\r\n                    let backgroundScaleFactor: number = this.levelManager.poolTable.scale.y;\r\n                    this.levelManager.poolTable.scale.x = backgroundScaleFactor;\r\n\r\n                    if (this.levelManager.poolTable.width > Settings.stageHeight) {\r\n                        this.levelManager.poolTable.width = Settings.stageHeight;\r\n                    }\r\n                    backgroundScaleFactor = this.levelManager.poolTable.scale.x;\r\n                    this.levelManager.poolTable.scale.y = backgroundScaleFactor;\r\n\r\n                    this.levelManager.poolTable.rotation = 90 * Math.PI / 180;\r\n                    this.levelManager.poolTable.x = 0.5 * Settings.stageWidth;// + this.levelManager.poolTable.height / 2;\r\n                    this.levelManager.poolTable.y = Settings.stageHeight / 2;//\r\n\r\n                    this.confirmWhiteBallPlacementTexture.scale.x = this.confirmWhiteBallPlacementTexture.scale.y = backgroundScaleFactor;\r\n                    this.confirmWhiteBallPlacementTexture.rotation = 90 * Math.PI / 180;\r\n                    this.confirmWhiteBallPlacementTexture.x = Settings.stageWidth / 2;\r\n                    this.confirmWhiteBallPlacementTexture.y = Settings.stageHeight / 4 - this.levelManager.poolTable.width / 4;\r\n                    if (this.confirmWhiteBallPlacementTexture.y < 5 + this.confirmWhiteBallPlacementTexture.width / 2)\r\n                        this.confirmWhiteBallPlacementTexture.y = 5 + this.confirmWhiteBallPlacementTexture.width / 2;\r\n\r\n                    this.mobileStickPower.rotation = 90 * Math.PI / 180;\r\n                    this.mobileStickPower.scale.x = this.mobileStickPower.scale.y = backgroundScaleFactor;\r\n                    this.mobileStickPower.y = this.confirmWhiteBallPlacementTexture.y;//Settings.stageWidth / 4 - this.levelManager.poolTable.width / 4;\r\n                    // if (this.mobileStickPower.x < 5 + this.mobileStickPower.width / 2)\r\n                    //     this.mobileStickPower.x = 5 + this.mobileStickPower.width / 2;\r\n                    this.mobileStickPower.x = Settings.stageWidth / 2 + this.mobileStickPower.height / 2;// - this.levelManager.poolTable.width / 4;//- this.levelManager.poolTable.width) / 2;\r\n\r\n                    let newPos: Point = new Point();\r\n                    newPos.x = this.levelManager.poolTable.position.x - this.levelManager.poolTable.height * 0.019;\r\n                    newPos.y = this.levelManager.poolTable.position.y;// +120;//this.levelManager.poolTable.height * 0.2;\r\n\r\n                    this.levelManager.poolTable.poolStick.visible = true;\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED, [backgroundScaleFactor, newPos, this.levelManager.poolTable.rotation]);\r\n                }\r\n            }\r\n\r\n            // protected onResize(params: any[]): void {\r\n            //     super.onResize(params);\r\n            // }\r\n\r\n            /*protected registerSignals() {\r\n                super.registerSignals();\r\n\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.SHOOT_BALL);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.NEXT_TURN);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.BALL_IN_POCKET);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.WHITE_BALL_IN_POCKET);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.FIRST_BALL_FAULT);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.REPOSITION_WHITE_BALL);\r\n                // SignalsManager.CreateNewSignal(PockeySignalTypes.REPOSITION_STICK);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_BALL_RAY_GRAPHICS);\r\n                SignalsManager.CreateNewSignal(PockeySignalTypes.POOLSTICK_ACTIVATED);\r\n                // SignalsManager.CreateNewSignal(PockeySignalTypes.SHOOTING_ENDED);\r\n            }*/\r\n        }\r\n\r\n    }\r\n}\r\n\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/30/2018\r\n */\r\n\r\nnamespace Pockey {\r\n\r\n    export module GameModule {\r\n\r\n        export class Player {\r\n            public id: string;\r\n            public name: string;\r\n            public type: BallType;\r\n            public score: number;\r\n            public matchesWon: number = 0;\r\n            public color: number;\r\n            public side: string;\r\n\r\n            constructor(id: string, type: BallType) {\r\n                this.id = id;\r\n                this.type = type;\r\n                this.score = PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER;\r\n            }\r\n\r\n            public reset(): void {\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","///<reference path=\"../../../Framework/Signals/signals-manager.ts\"/>\r\n///<reference path=\"../StateMachine/pockey-state-machine.ts\"/>\r\n///<reference path=\"balls/abstract-ball.ts\"/>\r\n///<reference path=\"player.ts\"/>\r\n///<reference path=\"../../../Framework/Signals/signal-types.ts\"/>\r\n///<reference path=\"../StateMachine/pockey-state-texts.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 7/18/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module GameModule {\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import SignalsType = Framework.Signals.SignalsType;\r\n        import PockeyStates = Pockey.StateMachineModule.PockeyStates;\r\n        import ConnectionSignalsType = Framework.Signals.ConnectionSignalsType;\r\n        import PockeyConnectionSignals = Pockey.SignalsModule.PockeyConnectionSignals;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n        import PockeySocketMessages = Pockey.Connection.PockeySocketMessages;\r\n        import Settings = Framework.Settings;\r\n        import PockeyStateMachine = Pockey.StateMachineModule.PockeyStateMachine;\r\n        import PockeyStateTexts = Pockey.StateMachineModule.PockeyStateTexts;\r\n\r\n        export interface PlayerSettings {\r\n            opponentName?: string,\r\n            opponentColor?: number,\r\n            firstToStart?: string\r\n        }\r\n\r\n        export enum WinStatus {\r\n            WIN,\r\n            LOST\r\n        }\r\n\r\n        // export enum PockeyStates {\r\n        //     StartGame,\r\n        //     PlayerTurn,\r\n        //     PlayerTurnFirstBall,\r\n        //     OpponentTurn,\r\n        //     OpponentTurnFirstBall,\r\n        //\r\n        // }\r\n\r\n        export class GameManager {\r\n            private static instance: GameManager;\r\n            private initialized: boolean = false;\r\n            public player: Player = new Player(\"player\", BallType.Player);\r\n            // public playerScore: number = 7;\r\n            public opponent: Player = new Player(\"opponent\", BallType.Opponent);\r\n            // public opponentScore: number = 7;\r\n\r\n            public currentPlayer: Player;\r\n            private whiteBallPenalty: boolean = false;\r\n            private ballsHit: number = 0;\r\n            private ownBallInPocketFault: boolean = false;\r\n\r\n            private gameFinished: boolean = false;\r\n            private winStatus: WinStatus;\r\n            private availableForRestart: boolean = false;\r\n            private timer: NodeJS.Timer;\r\n            private roundTimer: any;\r\n            private timerText: string = \"\";\r\n            private animateOpponentTimer: boolean = false;\r\n            private countdownEnded: boolean = false;\r\n            // private noBallsHitOnWatch: boolean = false;\r\n\r\n            // private lastBallsAdded\r\n            static Instance(): GameManager {\r\n                if (!GameManager.instance) {\r\n                    GameManager.instance = new GameManager();\r\n\r\n                    if (!GameManager.Instance().initialized) {\r\n                        GameManager.Instance().InitializeOthers();\r\n                        GameManager.Instance().registerSignalsHandlers();\r\n                        GameManager.Instance().initialized = true;\r\n                    }\r\n                }\r\n                return GameManager.instance;\r\n            }\r\n\r\n            private InitializeOthers() {\r\n                this.player = new Player(\"player\", BallType.Player);\r\n                this.opponent = new Player(\"opponent\", BallType.Opponent);\r\n\r\n                // this.timer = global.setTimeout(this.startCountdown, 1000);\r\n\r\n            }\r\n\r\n            private registerSignalsHandlers() {\r\n\r\n                SignalsManager.AddSignalCallback(SignalsType.ALL_MODULES_ELEMENTS_CREATED, GameManager.Instance().onAllModuleElementsCreated.bind(this));\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.WHITE_BALL_REPOSITIONED, GameManager.Instance().onWhiteBallRepositioned.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.FIRST_BALL_FAULT, this.onFirstBallFault.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.NEXT_TURN, this.onNextTurn.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SHOOT_BALL, this.onShoot.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.BALL_IN_POCKET, this.onBallInPocket.bind(this));\r\n\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.PUCK_IN_POCKET, this.onBallInPocket.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SEND_ELEMENTS_DATA_TO_MANAGER, this.onSendElementsDataToManager.bind(this));\r\n\r\n                SignalsManager.AddSignalCallback(ConnectionSignalsType.SOCKET_IO_CONNECTION_CREATED, this.onSocketIOConnectionCreated.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.START_GAME, this.onStartGame.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.RESTART_GAME, this.onRestartGame.bind(this));\r\n\r\n                SignalsManager.AddSignalCallback(PockeyConnectionSignals.WATCH, this.onWatch.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeyConnectionSignals.YOUR_TURN, this.onMyTurn.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeyConnectionSignals.OPPONENT_SETTINGS, this.onOpponentSettings.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeyConnectionSignals.OPPONENT_RESTART_GAME, this.onOpponentRestart.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeyConnectionSignals.SCORE_UPDATE, this.onScoreUpdate.bind(this));\r\n                // SignalsManager.AddSignalCallback(PockeyConnectionSignals.OPPONENT, this.onSetOpponent.bind(this));\r\n            }\r\n\r\n            private startCountdown(seconds) {\r\n                let counter = seconds;\r\n\r\n\r\n                // console.log('counter intra la start countdown');\r\n                let counterText: string = \"0:\";\r\n\r\n                // if(counter == PockeySettings.ROUND_DURATION_IN_SECONDS)\r\n                // {\r\n                counterText += (counter >= 10) ? counter.toString() : \"0\" + counter.toString();\r\n                this.timerText = counterText;\r\n                this.animateOpponentTimer = false;\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_CURRENT_PLAYER_TIMER, [counterText, this.currentPlayer.type, false]);\r\n                // }\r\n                this.roundTimer = setInterval(() => {\r\n                    counterText = \"0:\";\r\n\r\n                    // console.log(\"counter : \" + counter);\r\n\r\n                    counter--;\r\n                    counterText += (counter >= 10) ? counter.toString() : \"0\" + counter.toString();\r\n                    this.timerText = counterText;\r\n                    // let animateTimerText: boolean = true;\r\n\r\n                    if (counter <= 5) {\r\n                        this.animateOpponentTimer = true;\r\n                    }\r\n\r\n                    // this.animateOpponentTimer = animateTimerText;\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_CURRENT_PLAYER_TIMER, [counterText, this.currentPlayer.type, this.animateOpponentTimer]);\r\n                    if (counter < 0) {\r\n\r\n                        // The code here will run when\r\n                        // the timer has reached zero.\r\n                        this.stopCountdown();\r\n                        this.countdownEnded = true;\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.RESET_STICK_POWER);\r\n\r\n                        // this.ballsHit = 0;\r\n                        // this.onNextTurn();\r\n                    }\r\n\r\n                }, 1000);\r\n            };\r\n\r\n            private stopCountdown(): void {\r\n                clearInterval(this.roundTimer);\r\n\r\n                this.timerText = \"\";\r\n                // console.log(\"timerText stopcountdown: \" + this.timerText);\r\n                this.animateOpponentTimer = false;\r\n\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_CURRENT_PLAYER_TIMER, [\"\", this.currentPlayer.type, false]);\r\n                console.log('Ding!');\r\n            }\r\n\r\n            private onMyTurn(params: any[]): void {\r\n                // this.noBallsHitOnWatch = false;\r\n                // this.currentPlayer = this.player;\r\n                this.changePlayer();\r\n                let state: PockeyStates = params[0] as PockeyStates;\r\n                console.log(\"currentSTate: \" + PockeyStateMachine.Instance().getCurrentStateName());\r\n                console.log(\"new state: \" + state);\r\n                if (state == PockeyStates.onRearrangeStick) {\r\n\r\n                    if (params[1]) {\r\n                        let balls\r\n                    }\r\n                    // this.startCountdown(PockeySettings.ROUND_DURATION_IN_SECONDS);\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n                    this.startCountdown(PockeySettings.ROUND_DURATION_IN_SECONDS);\r\n                }\r\n                else if (state == PockeyStates.onRepositionWhiteBall) {\r\n\r\n                    // this.startCountdown(PockeySettings.ROUND_DURATION_IN_SECONDS);\r\n\r\n                    // SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n                    this.startCountdown(PockeySettings.ROUND_DURATION_IN_SECONDS);\r\n                    if (Settings.isMobile) {\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_WHITE_BALL_POSITION_CONFIRMER);\r\n                    }\r\n                }\r\n                else if (state == PockeyStates.onGameEnd) {\r\n\r\n                    if (this.player.score <= 0) {\r\n\r\n                        this.winStatus = WinStatus.LOST;\r\n                        this.opponent.matchesWon++;\r\n                        this.gameFinished = true;\r\n                        console.log(\"la ball in pocket: \" + this.winStatus);\r\n                    }\r\n                    else if (this.opponent.score <= 0) {\r\n\r\n                        this.winStatus = WinStatus.WIN;\r\n                        this.player.matchesWon++;\r\n                        this.gameFinished = true;\r\n\r\n                    }\r\n\r\n                    this.onGameFinished();\r\n\r\n                }\r\n\r\n                PockeyStateMachine.Instance().changeState(state);\r\n\r\n\r\n                // if(this.whiteBallPenalty)\r\n                // {\r\n                //\r\n                // }\r\n                // else if(this.ballsHit)\r\n                // {\r\n                //\r\n                // }\r\n            }\r\n\r\n            private onSendElementsDataToManager(params: any[]): void {\r\n                let poolTableData: PoolTableData = params[0] as PoolTableData;\r\n\r\n                poolTableData.playerScore = this.player.score;\r\n                poolTableData.opponentScore = this.opponent.score;\r\n                poolTableData.whiteBallPenalty = this.whiteBallPenalty;\r\n                poolTableData.ballsHit = this.ballsHit;\r\n                poolTableData.opponentState = PockeyStateMachine.Instance().fsm.currentState;\r\n\r\n                poolTableData.opponentTimerText = this.timerText;\r\n                // console.log(\"timerText la send data: \" + this.timerText);\r\n\r\n                poolTableData.opponentTimerAnimate = this.animateOpponentTimer;\r\n                if (this.countdownEnded) {\r\n                    poolTableData.opponentTimeFinished = true;\r\n                    console.log(\"time ended sent\");\r\n                }\r\n\r\n                SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.WATCH, poolTableData]);\r\n\r\n                if (this.countdownEnded) {\r\n                    this.onNextTurn();\r\n                }\r\n            }\r\n\r\n            private onRestartGame(): void {\r\n\r\n                if (Settings.singlePlayer)\r\n                    this.switchSides();\r\n                else {\r\n                    this.availableForRestart = true;\r\n                    this.switchSides();\r\n                    SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.OPPONENT_RESTART_GAME]);\r\n                    // SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.OPPONENT_RESTART]);\r\n                }\r\n\r\n            }\r\n\r\n            private onOpponentRestart(): void {\r\n                if (this.availableForRestart) {\r\n                    this.switchSides();\r\n                }\r\n            }\r\n\r\n            private switchSides(): void {\r\n                this.whiteBallPenalty = false;\r\n                this.ballsHit = 0;\r\n                this.gameFinished = false;\r\n                this.availableForRestart = false;\r\n                this.player.score = PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER;\r\n                this.opponent.score = PockeySettings.BALLS_NUMBER_FOR_EACH_PLAYER;\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.RESET_POOLTABLE);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.RESET_GAME_SCREEN);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.HIDE_WINNING_SCREEN);\r\n\r\n                let orderArray: BallType[] = [];\r\n\r\n                if (this.player.side == \"left\") {\r\n                    if (!Settings.singlePlayer) {\r\n                        PockeyStateMachine.Instance().changeState(PockeyStates.onWatch);\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH, [PockeyStateTexts.opponentsTurn]);\r\n                    }\r\n                    this.opponent.side = \"left\";\r\n                    this.player.side = \"right\";\r\n                    this.setCurrentPlayer(this.opponent);\r\n                    orderArray = [this.opponent.type, this.player.type];\r\n                }\r\n                else {\r\n                    if (!Settings.singlePlayer) {\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n\r\n                        PockeyStateMachine.Instance().changeState(PockeyStates.onRearrangeStick);\r\n                    }\r\n                    this.opponent.side = \"right\";\r\n                    this.player.side = \"left\";\r\n                    this.setCurrentPlayer(this.player);\r\n                    orderArray = [this.player.type, this.opponent.type];\r\n                }\r\n\r\n                if (Settings.singlePlayer) {\r\n                    this.beginPlay();\r\n                    // PockeyStateMachine.Instance().changeState(PockeyStates.onStartVersusGame);\r\n\r\n                }\r\n\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.SET_SIDES_TYPE, orderArray);\r\n                // this.player.side = \"left\";\r\n                // this.opponent.side = \"right\";\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.CHANGE_PLAYER_COLOR, [PockeySettings.PLAYER_COLOR]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.CHANGE_OPPONENT_COLOR, [PockeySettings.OPPONENT_COLOR]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_PLAYER_NAME, [this.player.id]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_OPPONENT_NAME, [this.opponent.id]);\r\n\r\n            }\r\n\r\n            private onStartGame(): void {\r\n                SignalsManager.DispatchSignal(SignalsType.CHANGE_BACKGROUND, [PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME, 0.4]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.HIDE_MAIN_MENU);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_GAME_UI);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_POOLTABLE);\r\n\r\n                if (Settings.singlePlayer) {\r\n\r\n                    this.setCurrentPlayer(this.player);\r\n                    this.beginPlay();\r\n                    // PockeyStateMachine.Instance().changeState(PockeyStates.onStartVersusGame);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.SET_SIDES_TYPE, [this.player.type, this.opponent.type]);\r\n                    this.player.side = \"left\";\r\n                    this.opponent.side = \"right\";\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.CHANGE_PLAYER_COLOR, [PockeySettings.PLAYER_COLOR]);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.CHANGE_OPPONENT_COLOR, [PockeySettings.OPPONENT_COLOR]);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_PLAYER_NAME, [this.player.id]);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_OPPONENT_NAME, [this.opponent.id]);\r\n\r\n                }\r\n                else {\r\n                    PockeyStateMachine.Instance().changeState(PockeyStates.onSearchForPartner);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_SEARCHING_SCREEN);\r\n                    SignalsManager.DispatchSignal(ConnectionSignalsType.CREATE_SOCKET_IO_CONNECTION);\r\n                }\r\n\r\n            }\r\n\r\n            private onWatch(params: any[]): void {\r\n\r\n                if (PockeyStateMachine.Instance().fsm.currentState == PockeyStates.onWatch) {\r\n\r\n                    // console.log(\"gm, sunt eu, clientul in plm: \");\r\n                    let poolTableData: PoolTableData = params[0] as PoolTableData;\r\n\r\n                    // this.timerText = poolTableData.opponentTimerText;\r\n                    // this.animateOpponentTimer = poolTableData.opponentTimerAnimate;\r\n// if()\r\n//                     console.log(\"this.timerText: \" + poolTableData.opponentTimerText);\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_CURRENT_PLAYER_TIMER, [poolTableData.opponentTimerText, this.currentPlayer.type, poolTableData.opponentTimerAnimate]);\r\n\r\n                    //salam\r\n                    this.whiteBallPenalty = poolTableData.whiteBallPenalty;\r\n                    this.ballsHit = poolTableData.ballsHit;\r\n\r\n                    if (this.player.score != poolTableData.opponentScore) {\r\n                        this.player.score = poolTableData.opponentScore;\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_PLAYER_SCORE, [this.player.score]);\r\n                    }\r\n\r\n                    if (this.opponent.score != poolTableData.playerScore) {\r\n                        this.opponent.score = poolTableData.playerScore;\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_OPPONENT_SCORE, [this.opponent.score]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            private onScoreUpdate(params: any[]): void {\r\n                // if (PockeyStateMachine.Instance().fsm.currentState != PockeyStates.onWatch)\r\n                // {\r\n                //     PockeyStateMachine.Instance().changeState(PockeyStates.onWatch);\r\n                //     this.printFsmCurrentState();\r\n                // }\r\n                console.log(\"on score update\");\r\n            }\r\n\r\n            private onBallInPocket(params: any[]): void {\r\n                if (!this.gameFinished) {\r\n                    let ballType: BallType = params[0] as BallType;\r\n                    console.log(\"ballType in pocket: \" + ballType);\r\n                    if (ballType == BallType.White) {\r\n                        this.whiteBallPenalty = true;\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.whiteBallFault]);\r\n\r\n                        console.log(\"%c GameManager -> White ball PENALTY for \" + this.currentPlayer.id.toUpperCase(), \"color: #00bcd4\");\r\n                    }\r\n                    else if (ballType == BallType.Puck) {\r\n                        this.ballsHit++;\r\n                        // this.whiteBallPenalty = true;\r\n                        let goalType: BallType = params[1];\r\n                        if (goalType == this.player.type) {\r\n                            this.player.score -= 2;\r\n                        }\r\n                        else if (goalType == this.opponent.type) {\r\n                            this.opponent.score -= 2;\r\n                        }\r\n\r\n                        if (goalType != this.currentPlayer.type) {\r\n                            console.log(\"aici se face update ce plm\");\r\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.onPuckGoal]);\r\n                        }\r\n                        // console.log(\"intra la puck gol\");\r\n                        // if (params[1] == this.currentPlayer.type) {\r\n                        //     this.currentPlayer.score -= 2;\r\n                        // }\r\n                        // else {\r\n                        //     this.currentPlayer.score -= 2;\r\n                        // }\r\n                    }\r\n                    else if (ballType == this.currentPlayer.type) {\r\n                        this.ballsHit++;\r\n                        this.currentPlayer.score--;\r\n                        this.ownBallInPocketFault = true;\r\n                        if (!this.whiteBallPenalty)\r\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.onOwnBallInPocket]);\r\n                        // if(this.currentPlayer == this.player)\r\n                        // {\r\n                        //     this.playerScore--;\r\n                        // }\r\n                        // else\r\n                        // {\r\n                        //\r\n                        // }\r\n                        /*this.whiteBallPenalty = true;\r\n                        */\r\n                    }\r\n                    else if (ballType != this.currentPlayer.type) {\r\n                        this.ballsHit++;\r\n                        if (this.currentPlayer == this.player) {\r\n                            this.opponent.score--;\r\n                        }\r\n                        else {\r\n                            this.player.score--;\r\n\r\n                        }\r\n                        // this.whiteBallPenalty = true;\r\n                        /*this.ballsHit++;\r\n                        this.opponentScore--;*/\r\n                    }\r\n                    console.log(\"ball in the pocket!!! type: \" + params);\r\n                    console.log(\"score -> player: \" + this.player.score, \" - Opponent: \" + this.opponent.score);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_PLAYER_SCORE, [this.player.score]);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_OPPONENT_SCORE, [this.opponent.score]);\r\n\r\n                    if (this.player.score <= 0) {\r\n\r\n                        // PockeyStateMachine.Instance().changeState(PockeyStates.onGameEnd);\r\n                        this.winStatus = WinStatus.LOST;\r\n                        this.opponent.matchesWon++;\r\n                        this.gameFinished = true;\r\n                        console.log(\"la ball in pocket: \" + this.winStatus);\r\n\r\n\r\n                    }\r\n                    else if (this.opponent.score <= 0) {\r\n                        // SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_WINNING_MESSAGE, [\"you lost!\"]);\r\n                        // SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_WINNING_SCREEN);\r\n\r\n                        this.winStatus = WinStatus.WIN;\r\n                        this.player.matchesWon++;\r\n                        this.gameFinished = true;\r\n                        console.log(\"la ball in pocket: \" + this.winStatus);\r\n\r\n                        // PockeyStateMachine.Instance().changeState(PockeyStates.onGameEnd);\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            private onAllModuleElementsCreated(): void {\r\n                PockeyStateMachine.Instance().changeState(PockeyStates.onMainMenu);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_MAIN_MENU);\r\n                SignalsManager.DispatchSignal(SignalsType.CHANGE_BACKGROUND, [Settings.mainBackgroundName, 4]);\r\n            }\r\n\r\n            private onSocketIOConnectionCreated(params: any[]): void {\r\n                console.log(\"%c GameManager -> socket io connection created\", \"color: #00bcd4\");\r\n                this.player.id = params[0];\r\n                PockeySettings.PLAYER_SOCKET_ID = this.player.id;\r\n                this.opponent.id = params[1];\r\n                PockeySettings.OPPONENT_SOCKET_ID = this.opponent.id;\r\n\r\n                let connectionID: string = params[2];\r\n                if (connectionID.startsWith(this.player.id)) {\r\n                    this.currentPlayer = this.player;\r\n\r\n                    let playerSettings: PlayerSettings = {\r\n                        opponentName: this.player.name,\r\n                        opponentColor: PockeySettings.PLAYER_COLOR\r\n                    };\r\n                    playerSettings.firstToStart = this.player.id;\r\n                    SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.OPPONENT_SETTINGS, playerSettings]);\r\n                    // this.beginPlay();\r\n                }\r\n                /**/\r\n                // else {\r\n                //     playerSettings.firstToStart = this.opponent.id;\r\n                // }\r\n\r\n                // console.log(\"on disptach settings: \" + playerSettings);\r\n                /*\r\n*/\r\n                // SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [playerSettings]);\r\n\r\n                // else {\r\n                //     this.currentPlayer = this.opponent;\r\n                //     // this.onWatch(null);\r\n                // }\r\n\r\n\r\n                // let poolTableData: PoolTableData = {\r\n                //     /*playerName:string,\r\n                //     playerSocketID:any,\r\n                //     playerColor:number,\r\n                //     poolstickPivotX: number,`\r\n                //     poolstickRotation: number,\r\n                //     poolstickPositionX: number,\r\n                //     poolstickPositionY: number*/\r\n                // };\r\n\r\n                // PockeyStateMachine.Instance().changeState(PockeyStates.onRearrangeStick);\r\n                // this.selectPlayer();\r\n                // this.printFsmCurrentState();\r\n                /*this.player.color = PockeySettings.PLAYER_COLOR;\r\n                this.player.id = params[0];\r\n                this.opponent.color = PockeySettings.OPPONENT_COLOR;\r\n                this.opponent.id = params;\r\n                */\r\n            }\r\n\r\n\r\n            private onOpponentSettings(params: any[]): void {\r\n                console.log(\"on opponent settings\");\r\n\r\n                let opponentSettings: PlayerSettings = params[0] as PlayerSettings;\r\n                PockeySettings.OPPONENT_COLOR = opponentSettings.opponentColor;\r\n\r\n                if (opponentSettings.firstToStart == this.player.id) {\r\n                    this.setCurrentPlayer(this.player);\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.SET_SIDES_TYPE, [this.player.type, this.opponent.type]);\r\n                    this.player.side = \"left\";\r\n                    this.opponent.side = \"right\";\r\n\r\n                    this.startCountdown(PockeySettings.ROUND_DURATION_IN_SECONDS);\r\n                    this.beginPlay();\r\n                }\r\n                else {\r\n\r\n                    this.setCurrentPlayer(this.opponent);\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.SET_SIDES_TYPE, [this.opponent.type, this.player.type]);\r\n                    this.player.side = \"right\";\r\n                    this.opponent.side = \"left\";\r\n\r\n                    if (PockeySettings.OPPONENT_COLOR == PockeySettings.PLAYER_COLOR) {\r\n\r\n                        let randNumber: number = Math.round(Math.random() * (PockeySettings.LARGE_COLORS_ARRAY.length - 1));\r\n                        PockeySettings.OPPONENT_COLOR = parseInt(\"0x\"+PockeySettings.LARGE_COLORS_ARRAY[randNumber]);\r\n\r\n                    }\r\n\r\n                    let playerSettings: PlayerSettings = {\r\n                        opponentName: this.player.name,\r\n                        opponentColor: PockeySettings.OPPONENT_COLOR,\r\n                        firstToStart: this.opponent.id\r\n                    };\r\n\r\n                    SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.OPPONENT_SETTINGS, playerSettings]);\r\n\r\n                    // SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_CURRENT_PLAYER_TIMER, [\"0:\" + PockeySettings.ROUND_DURATION_IN_SECONDS, this.currentPlayer.type, false]);\r\n\r\n                    PockeyStateMachine.Instance().changeState(PockeyStates.onWatch);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH, [PockeyStateTexts.opponentsTurn]);\r\n\r\n                }\r\n\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.HIDE_SEARCHING_SCREEN);\r\n\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.CHANGE_PLAYER_COLOR, [PockeySettings.PLAYER_COLOR]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.CHANGE_OPPONENT_COLOR, [PockeySettings.OPPONENT_COLOR]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_PLAYER_NAME, [this.player.id]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_OPPONENT_NAME, [this.opponent.id]);\r\n                /**/\r\n\r\n            }\r\n\r\n            // private on\r\n\r\n            private onShoot(): void {\r\n                // this.selectPlayer();\r\n                this.whiteBallPenalty = false;\r\n                clearInterval(this.roundTimer);\r\n\r\n                this.stopCountdown();\r\n                PockeyStateMachine.Instance().changeState(PockeyStates.onShoot);\r\n\r\n            }\r\n\r\n            private onWhiteBallRepositioned(): void {\r\n                // this.selectPlayer();\r\n                console.log(\"%c GameManager -> White Ball Repositioned\", \"color: #00bcd4\");\r\n\r\n                PockeyStateMachine.Instance().changeState(PockeyStates.onRearrangeStick);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n\r\n            }\r\n\r\n            private onGameFinished(): void {\r\n                if (this.winStatus == WinStatus.WIN) {\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_WINNING_MESSAGE, [\"you won!\"]);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_WINNING_SCREEN);\r\n                } else {\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_WINNING_MESSAGE, [\"you lost!\"]);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_WINNING_SCREEN);\r\n                }\r\n\r\n                if (this.player.side == \"left\") {\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_MATCH_CIRCLES,\r\n                        [this.player.matchesWon, this.opponent.matchesWon]);\r\n                }\r\n                else {\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_MATCH_CIRCLES,\r\n                        [this.opponent.matchesWon, this.player.matchesWon]);\r\n                }\r\n\r\n            }\r\n\r\n            private onNextTurn(): void {\r\n                if (this.countdownEnded) {\r\n\r\n                    this.countdownEnded = false;\r\n                    this.changePlayer();\r\n\r\n                    SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.YOUR_TURN, PockeyStateMachine.Instance().fsm.currentState]);\r\n\r\n                    PockeyStateMachine.Instance().changeState(PockeyStates.onWatch);\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH, [PockeyStateTexts.onTimeUp]);\r\n                    return;\r\n                }\r\n                // this.selectPlayer();\r\n                if (this.gameFinished) {\r\n                    PockeyStateMachine.Instance().changeState(PockeyStates.onGameEnd);\r\n                    // let opponentStatus:WinStatus = (this.winStatus == WinStatus.WIN)? WinStatus.LOST : WinStatus.WIN;\r\n                    console.log(\"la next turn: \" + this.winStatus);\r\n                    SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.YOUR_TURN, PockeyStates.onGameEnd, this.winStatus]);\r\n                    this.onGameFinished();\r\n\r\n                    return;\r\n                }\r\n                else {\r\n                    // console.log(\"inainte de on end turn\");\r\n                    PockeyStateMachine.Instance().changeState(PockeyStates.onEndTurn);\r\n                    // console.log(\"dupa de on end turn\");\r\n\r\n                }\r\n\r\n                console.log(\"%c GameManager -> Checking for next turn...\", \"color: #00bcd4\");\r\n\r\n                if (this.whiteBallPenalty) {\r\n                    console.log(\"%c GameManager -> PENALTY! Round ended for \" + this.currentPlayer.id.toUpperCase(), \"color: #00bcd4\");\r\n                    // this.onWhiteBallInTheHole();\r\n\r\n                    this.changePlayer();\r\n\r\n                    if (!Settings.singlePlayer) {\r\n                        SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.YOUR_TURN, PockeyStates.onRepositionWhiteBall]);\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH, [PockeyStateTexts.whiteBallFault]);\r\n                        PockeyStateMachine.Instance().changeState(PockeyStates.onWatch);\r\n\r\n                        // if (Settings.isMobile) {\r\n                        //     SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_WHITE_BALL_POSITION_CONFIRMER);\r\n                        // }\r\n                    }\r\n                    else {\r\n\r\n                        PockeyStateMachine.Instance().changeState(PockeyStates.onRepositionWhiteBall);\r\n                        if (Settings.isMobile) {\r\n                            SignalsManager.DispatchSignal(PockeySignalTypes.SHOW_WHITE_BALL_POSITION_CONFIRMER);\r\n                        }\r\n                    }\r\n\r\n                    // PockeyStateMachine.Instance().changeState(PockeyStates.onRepositionWhiteBall);\r\n\r\n                    //     SignalsManager.DispatchSignal(PockeySignalTypes.REPOSITION_WHITE_BALL);\r\n                }\r\n                else if (this.ownBallInPocketFault) {\r\n                    console.log(\"%c GameManager -> Fault! Own ball in pocket! \" + this.currentPlayer.id.toUpperCase(), \"color: #00bcd4\");\r\n                    this.changePlayer();\r\n                    this.ownBallInPocketFault = false;\r\n                    if (!Settings.singlePlayer) {\r\n                        PockeyStateMachine.Instance().changeState(PockeyStates.onWatch);\r\n                        SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.YOUR_TURN, PockeyStates.onRearrangeStick]);\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH, [PockeyStateTexts.onOwnBallInPocket]);\r\n\r\n                        // this.noBallsHitOnWatch = true;\r\n\r\n                        // SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.noBallScored]);\r\n                        // this.whiteBall\r\n\r\n                    }\r\n                    else {\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n\r\n                        PockeyStateMachine.Instance().changeState(PockeyStates.onRearrangeStick);\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.ballsHit == 0) {\r\n                        console.log(\"%c GameManager -> No balls hit for \" + this.currentPlayer.id.toUpperCase(), \"color: #00bcd4\");\r\n                        this.changePlayer();\r\n\r\n                        if (!Settings.singlePlayer) {\r\n                            PockeyStateMachine.Instance().changeState(PockeyStates.onWatch);\r\n                            SignalsManager.DispatchSignal(ConnectionSignalsType.PRIVATE_MESSAGE, [PockeySocketMessages.YOUR_TURN, PockeyStates.onRearrangeStick]);\r\n                            SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH, [PockeyStateTexts.noBallScored]);\r\n                            // this.noBallsHitOnWatch = true;\r\n\r\n                            // SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.noBallScored]);\r\n                            // this.whiteBall\r\n\r\n                        }\r\n                        else {\r\n                            SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n\r\n                            PockeyStateMachine.Instance().changeState(PockeyStates.onRearrangeStick);\r\n                        }\r\n                        return;\r\n                    }\r\n                    else {\r\n                        this.ballsHit = 0;\r\n                    }\r\n\r\n                    this.startCountdown(PockeySettings.ROUND_DURATION_IN_SECONDS);\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n                    PockeyStateMachine.Instance().changeState(PockeyStates.onRearrangeStick);\r\n\r\n                }\r\n                // if()\r\n                console.log(\"score -> player: \" + this.player.score, \" - Opponent: \" + this.opponent.score);\r\n\r\n\r\n            }\r\n\r\n            // private onWhiteBallInTheHole(): void {\r\n            //     this.whiteBallPenalty = true;\r\n            //     // this.changePlayer();\r\n            //     // SignalsManager.DispatchSignal(PockeySignalTypes.REPOSITION_WHITE_BALL);\r\n            // }\r\n\r\n            private setCurrentPlayer(player: Player): void {\r\n                // let playersArray: Player[] = [this.player, this.opponent];\r\n                // let rand: number = Math.round(Math.random() * 1);\r\n                // if (this.currentPlayer == this.opponent)\r\n                //     this.currentPlayer = this.player;\r\n                // else\r\n                this.currentPlayer = player;\r\n\r\n                // console.log(\"%c GameManager -> Player changed: \" + this.currentPlayer.id.toUpperCase(), \"color: #00bcd4\");\r\n                console.log(\"%c GameManager -> Current player is: \" + this.currentPlayer.id.toUpperCase(), \"background: red; color: white; font-weight:bold; \");\r\n\r\n                // GameManager.Instance().beginPlay();\r\n\r\n            }\r\n\r\n            private changePlayer(): void {\r\n                // let playersArray: Player[] = [this.player, this.opponent];\r\n                // let rand: number = Math.round(Math.random() * 1);\r\n                /*   if (Settings.singlePlayer) {\r\n                       this.currentPlayer = this.player;\r\n                   }\r\n                   else {*/\r\n                if (this.currentPlayer == this.opponent)\r\n                    this.currentPlayer = this.player;\r\n                else\r\n                    this.currentPlayer = this.opponent;\r\n                // }\r\n\r\n\r\n                // console.log(\"%c GameManager -> Player changed: \" + this.currentPlayer.id.toUpperCase(), \"color: #00bcd4\");\r\n                console.log(\"%c GameManager -> Player changed: \" + this.currentPlayer.id.toUpperCase(), \"background: red; color: white; font-weight:bold; \");\r\n\r\n                // GameManager.Instance().beginPlay();\r\n\r\n            }\r\n\r\n            /* private selectPlayer(): void {\r\n                 let playersArray: Player[] = [this.player, this.opponent];\r\n                 let rand: number = Math.round(Math.random());\r\n                 this.currentPlayer = playersArray[rand];\r\n\r\n                 // console.log(\"%c GameManager -> Selected player: \" + this.currentPlayer.id, \"color: #00bcd4\");\r\n                 console.log(\"%c GameManager -> Selected player: \" + this.currentPlayer.id.toUpperCase(), \"background: red; color: white; font-weight:bold; \");\r\n\r\n\r\n                 GameManager.Instance().beginPlay();\r\n             }*/\r\n\r\n            private onFirstBallFault(): void {\r\n                // console.log(\"ball repos started\");\r\n                this.whiteBallPenalty = true;\r\n                console.log(\"%c GameManager -> First ball fault!\", \"color: #00bcd4\");\r\n\r\n                // let localPoint = this.poolTable.toLocal(new Point(MouseHandler.Instance().position.x, MouseHandler.Instance().position.y));\r\n                // this.poolTable.ballPositionCircle.x = localPoint.x;\r\n                // this.poolTable.ballPositionCircle.y = localPoint.y;\r\n                // this.lastGoodRepositionPoint = new Vector2();\r\n                // this.repositionEnabled = true;\r\n            }\r\n\r\n            private beginPlay(): void {\r\n\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.UPDATE_UI_TEXT, [PockeyStateTexts.beginGame]);\r\n                SignalsManager.DispatchSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n                PockeyStateMachine.Instance().changeState(PockeyStates.onRearrangeStick);\r\n                // PockeyStateMachine.Instance().changeState(PockeyStates.onStartVersusGame);\r\n                // this.printFsmCurrentState();\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","///<reference path=\"../../../Framework/AbstractModules/Background/abstract-background-module.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/8/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module Background {\r\n\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n        import Point = PIXI.Point;\r\n        import AbstractBackgroundModule = Framework.Background.AbstractBackgroundModule;\r\n\r\n        export class PockeyBackgroundModule extends AbstractBackgroundModule {\r\n\r\n            constructor() {\r\n                super();\r\n                // this.bgTextureName = \"pockey_bg-01.png\";\r\n            }\r\n\r\n            protected registerSignalsHandlers(): void {\r\n                super.registerSignalsHandlers();\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED, this.onResizeBackground.bind(this));\r\n            }\r\n\r\n            private onResizeBackground(params: any[]): void {\r\n                if (this.backgrounds[PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME]) {\r\n                    let scaleFactor: number = params[0];\r\n                    let position: Point = params[1] as Point;\r\n                    let rotation: number = params[2];\r\n\r\n                    this.backgrounds[PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME].x = position.x;\r\n                    this.backgrounds[PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME].y = position.y;\r\n                    this.backgrounds[PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME].rotation = rotation;\r\n                    this.backgrounds[PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME].scale.x = scaleFactor;\r\n                    this.backgrounds[PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME].scale.y = scaleFactor;\r\n                }\r\n\r\n            }\r\n\r\n            // protected handleDesktopLandscape(): void {\r\n            //     // // console.log(\"width is higher\");\r\n            //     // this.Layer.rotation = 0;\r\n            //     // let scale: number = this.Layer.scale.y;\r\n            //     // this.Layer.scale.x = scale;\r\n            //     // if (this.Layer.width < this.stageWidth) {\r\n            //     //     this.Layer.width = this.stageWidth;\r\n            //     //     scale = this.Layer.scale.x;\r\n            //     //     this.Layer.scale.y = scale;\r\n            //     // }\r\n            //     //\r\n            //     // this.Layer.x = this.stageWidth / 2;\r\n            //     // this.Layer.y = this.stageHeight / 2;\r\n            // }\r\n        }\r\n    }\r\n\r\n}\r\n","///<reference path=\"../../../Framework/Signals/signals-manager.ts\"/>\r\n///<reference path=\"../../../Framework/Signals/signal-types.ts\"/>\r\n///<reference path=\"../SignalsModule/pockey-signal-types.ts\"/>\r\n///<reference path=\"../../../Framework/AbstractModules/Connection/connection-channels-and-messages.ts\"/>\r\n\r\nnamespace Pockey {\r\n    export module Connection {\r\n\r\n        import SocketClient = Framework.Connection.SocketClient;\r\n        import ConnectionSignalsType = Framework.Signals.ConnectionSignalsType;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import FrameworkSocketMessages = Framework.Connection.FrameworkSocketMessages;\r\n        import PockeyConnectionSignals = Pockey.SignalsModule.PockeyConnectionSignals;\r\n        import FrameworkSocketEvents = Framework.Connection.FrameworkSocketEvents;\r\n\r\n        export class PockeySocketClient extends SocketClient {\r\n\r\n            protected handlePrivateMessage(messageType, messageData): void {\r\n                super.handlePrivateMessage(messageType, messageData);\r\n                switch (messageType) {\r\n\r\n                    case PockeySocketMessages.WATCH: {\r\n                        SignalsManager.DispatchSignal(PockeyConnectionSignals.WATCH, [messageData]);\r\n                        break;\r\n                    }\r\n                    case PockeySocketMessages.OPPONENT_SETTINGS: {\r\n                        SignalsManager.DispatchSignal(PockeyConnectionSignals.OPPONENT_SETTINGS, [messageData]);\r\n                        break;\r\n                    }\r\n                    case PockeySocketMessages.YOUR_TURN: {\r\n                        SignalsManager.DispatchSignal(PockeyConnectionSignals.YOUR_TURN, [messageData]);\r\n                        break;\r\n                    }\r\n                    case PockeySocketMessages.OPPONENT_RESTART_GAME: {\r\n                        SignalsManager.DispatchSignal(PockeyConnectionSignals.OPPONENT_RESTART_GAME, [messageData]);\r\n                        break;\r\n                    }\r\n                    // case PockeySocketMessages.OPPONENT: {\r\n                    //     SignalsManager.DispatchSignal(PockeyConnectionSignals.WATCH, [messageData]);\r\n                    //     break;\r\n                    // }\r\n                    /*case PockeySocketMessages.SCORE_UPDATE: {\r\n                        SignalsManager.DispatchSignal(PockeyConnectionSignals.SCORE_UPDATE);\r\n                        break;\r\n                    }*/\r\n\r\n                    // dispatch signal private message,  watch\r\n                    /* case PockeyS.WA: {\r\n                         // SignalsManager.DispatchSignal(ConnectionSignalsType.SOCKET_IO_CONNECTION_CREATED, [this.partnerID]);\r\n                         break;\r\n                     }*/\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"../../../Framework/AbstractModules/Connection/abstract-connection-module.ts\"/>\r\n///<reference path=\"../../../Framework/AbstractModules/Connection/socket-client.ts\"/>\r\n///<reference path=\"pocket-socket-client.ts\"/>\r\nnamespace Pockey {\r\n    export module Connection {\r\n\r\n        import AbstractConnectionModule = Framework.Connection.AbstractConnectionModule;\r\n        import SocketClient = Framework.Connection.SocketClient;\r\n\r\n        export class PockeyConnectionModule extends AbstractConnectionModule {\r\n\r\n            protected registerSignalsHandlers(): void {\r\n                super.registerSignalsHandlers();\r\n            }\r\n\r\n            protected getSocketIoClient(): SocketClient {\r\n                return new PockeySocketClient();\r\n            }\r\n        }\r\n    }\r\n}","namespace Pockey {\r\n    export module UserInterface {\r\n\r\n\r\n        export class PockeyUiSearchingScreen extends Container {\r\n\r\n            private staggerTimeline: TimelineMax;\r\n            private searchScreen: HTMLDivElement;\r\n\r\n            constructor() {\r\n                super();\r\n                // this.addElements();\r\n                this.searchScreen = document.getElementById(\"SearchingScreen\") as HTMLDivElement;\r\n            }\r\n\r\n            public setVisibleTrue(): void {\r\n                this.killTweens();\r\n\r\n                this.searchScreen.style.display = \"flex\";\r\n\r\n                this.staggerTimeline = new TimelineMax();\r\n\r\n                TweenMax.staggerFrom(\".search\", 2, {\r\n                    backgroundColor: '#36edc9',\r\n                    opacity: 0,\r\n                    scale: 0.2,\r\n                    repeat: -1,\r\n                    ease: SlowMo.ease.config(0.5, 0.4, true)\r\n                }, 0.4);\r\n\r\n                TweenMax.staggerTo(\".search\", 2, {\r\n                    x: 320,\r\n                    backgroundColor: '#43f9f3',\r\n                    repeat: -1,\r\n                    ease: SlowMo.ease.config(0.5, 0.4, false)\r\n                }, 0.4);\r\n            }\r\n\r\n            public setVisibleFalse(): void {\r\n                this.killTweens();\r\n\r\n                this.searchScreen.style.display = \"none\";\r\n\r\n            }\r\n\r\n            private killTweens(): void {\r\n                TweenMax.killTweensOf(\".search\");\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}","namespace Framework {\r\n    export module utils {\r\n        import TextStyleOptions = PIXI.TextStyleOptions;\r\n        import Graphics = PIXI.Graphics;\r\n        import TextStyle = PIXI.TextStyle;\r\n\r\n        export class TextField extends PIXI.Text {\r\n\r\n            private initialScale: number;\r\n\r\n            constructor(text?: string, style?: TextStyle, debug?: boolean) {\r\n\r\n\r\n                super(text, style);\r\n\r\n                if (style)\r\n                    this.setStyle(style);\r\n\r\n                this.updateText();\r\n\r\n                if (debug)\r\n                    this.debug();\r\n            }\r\n\r\n            public setText(text: string): void {\r\n                this.text = text;\r\n                // console.log(\"counter intra textu: \" + text);\r\n                // this.setStyle(this.style);\r\n            }\r\n\r\n            public setStyle(fontStyle: TextStyle) {\r\n                this.scale.x = 1;\r\n                this.scale.y = 1;\r\n\r\n                let style: TextStyle = new TextStyle({});\r\n                style.fontSize = +fontStyle.fontSize;\r\n                style.wordWrapWidth = fontStyle.wordWrapWidth;\r\n                style.wordWrap = fontStyle.wordWrap;\r\n                style.fontFamily = fontStyle.fontFamily;\r\n                style.fill = fontStyle.fill;\r\n                style.dropShadow = fontStyle.dropShadow;\r\n                style.dropShadowColor = fontStyle.dropShadowColor;\r\n                style.dropShadowBlur = fontStyle.dropShadowBlur;\r\n                style.dropShadowAngle = fontStyle.dropShadowAngle;\r\n                style.dropShadowDistance = fontStyle.dropShadowDistance;\r\n\r\n                if (style && !_.isUndefined(style.fontSize) && !_.isNull(style.fontSize)) {\r\n                    let fontSize: number = +style.fontSize;\r\n                    fontSize *= 2;\r\n                    style.fontSize = fontSize;\r\n                }\r\n\r\n                if (style && !_.isUndefined(style.wordWrapWidth) && !_.isNull(style.wordWrapWidth)) {\r\n                    let wordWrapWidth: number = +style.wordWrapWidth;\r\n                    wordWrapWidth *= 2;\r\n                    style.wordWrapWidth = wordWrapWidth;\r\n                }\r\n\r\n                this.style = style;\r\n                // super(text, style);\r\n\r\n                this.scale.y /= 2;\r\n                this.scale.x /= 2;\r\n\r\n                this.initialScale = +this.style.fontSize;\r\n            }\r\n\r\n            public rescale(scaleFactor: number): void {\r\n                let newFontSize: number = scaleFactor * this.initialScale;\r\n                console.log(\"initial font size: \" + this.initialScale);\r\n                console.log(\"new font size: \" + newFontSize);\r\n                // let textStyle: TextStyle = this.style;\r\n                this.style.fontSize = newFontSize;\r\n                //\r\n                // this.setStyle(textStyle);\r\n            }\r\n\r\n            // private checkFontSize(style:TextStyleOptions):void\r\n            // {\r\n            //     st\r\n            // }\r\n            private debug(): void {\r\n                let gr: Graphics = new Graphics();\r\n                gr.beginFill(0xff9900, 0.5);\r\n                gr.drawRect(0, 0, this.width * 2, this.height * 2);\r\n                gr.endFill();\r\n                gr.x = this.x;\r\n                gr.y = this.y;\r\n                this.addChild(gr);\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"text-field.ts\"/>\r\n\r\nnamespace Framework {\r\n    export module UserInterface {\r\n        import ObservablePoint = PIXI.ObservablePoint;\r\n        import TextField = Framework.utils.TextField;\r\n        import TextStyleOptions = PIXI.TextStyleOptions;\r\n        import TextStyle = PIXI.TextStyle;\r\n        import Texture = PIXI.Texture;\r\n        import Vector2 = Framework.Utils.Vector2;\r\n\r\n        export class PixiButton extends PIXI.Sprite {\r\n\r\n            public onMouseOverAnimation: Function;\r\n            public onMouseOutAnimation: Function;\r\n\r\n            private _text: TextField;\r\n\r\n            private _cb: Function;\r\n\r\n            private alignment: string = \"center\";\r\n            private textOffset: Vector2;\r\n            // private leftAlign:boolean = false;\r\n            // private rightAlign:boolean = false;\r\n            // private centerAlign:boolean = false;\r\n            // constructor(width: number, height: number, backgroundColor: number, backgroundAlpha: number) {\r\n            constructor(texture: Texture) {\r\n                super(texture);\r\n\r\n                // generate the texture\r\n\r\n                this.texture = this.texture;\r\n\r\n                this.textOffset = new Vector2();\r\n\r\n                this._text = new TextField('Basic text in pixi');\r\n                this.addChild(this._text);\r\n\r\n                // set the interactivity to true and assign callback functions\r\n                this.interactive = true;\r\n\r\n                this.on(\"mousedown\", () => {\r\n                    this.onDown();\r\n                }, this);\r\n\r\n                this.on(\"mouseup\", () => {\r\n                    this.onUp();\r\n                }, this);\r\n\r\n                this.on(\"mouseover\", () => {\r\n                    this.onHover();\r\n                }, this);\r\n\r\n                this.on(\"mouseout\", () => {\r\n                    this.onOut();\r\n                }, this);\r\n\r\n                //////////////////\r\n                // this.on(\"touchstart\", () => {\r\n                //     this.onDown();\r\n                // }, this);\r\n                this.on(\"tap\", () => {\r\n                    this.onUp();\r\n                }, this);\r\n\r\n            }\r\n\r\n            public setOffset(offset: Vector2): void {\r\n                this.textOffset = offset;\r\n            }\r\n\r\n            public setAlign(align: string): void {\r\n                this.alignment = align;\r\n\r\n                if (align == \"left\") {\r\n                    this._text.x = 0 + this.textOffset.x;//this.width / 2 - this._text.width / 2;\r\n                    this._text.y = 0 + this.textOffset.y;//this.height / 2 - this._text.height / 2;\r\n                }\r\n                else if (align == \"right\") {\r\n                    this._text.x = this.width - this._text.width + this.textOffset.x;\r\n                    this._text.y = this.height - this._text.height + this.textOffset.y;\r\n                }\r\n                else {\r\n                    this._text.x = this.width / 2 - this._text.width / 2 - this.textOffset.x;\r\n                    this._text.y = this.height / 2 - this._text.height / 2 - this.textOffset.x;\r\n                }\r\n            }\r\n\r\n            public setText(val: string, style?: PIXI.TextStyle) {\r\n                // Set text to be the value passed as a parameter\r\n                this._text.text = val;\r\n                // Set style of text to the style passed as a parameter\r\n                this._text.setStyle(style);\r\n                this._text.x = this.width / 2 - this._text.width / 2;\r\n                this._text.y = this.height / 2 - this._text.height / 2;\r\n\r\n                this.setAlign(this.alignment);\r\n            }\r\n\r\n            public getText(): TextField {\r\n                return this._text;\r\n            }\r\n\r\n            private onDown() {\r\n                // console.log('Clicked');\r\n                this.y += 5;\r\n                // this.tint = 0xffffff;\r\n            }\r\n\r\n            private onUp() {\r\n                // console.log('onup');\r\n                if (typeof(this._cb) === 'function') {\r\n                    this._cb();\r\n                }\r\n                this.y -= 5;\r\n                // this.tint = 0xF8A9F9;\r\n            }\r\n\r\n            private onHover() {\r\n                // console.log('On Hover');\r\n                // this.tint = 0xF8A9F9;\r\n                // this.scale.x = 1.2;\r\n                // this.scale.y = 1.2;\r\n                if (this.onMouseOverAnimation) {\r\n                    this.onMouseOverAnimation();\r\n                }\r\n            }\r\n\r\n            private onOut() {\r\n                // console.log('On Out');\r\n                // this.tint = 0xffffff;\r\n                // this.scale.x = 1;\r\n                // this.scale.y = 1;\r\n\r\n                if (this.onMouseOutAnimation) {\r\n                    this.onMouseOutAnimation();\r\n                }\r\n            }\r\n\r\n            public get clicked() {\r\n                return this._cb;\r\n            }\r\n\r\n            public set clicked(cb: Function) {\r\n                this._cb = cb;\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}\r\n","namespace Framework {\r\n    export module Utils {\r\n        export function readCookie(c_name: string): string {\r\n            if (document.cookie.length > 0) {\r\n                let c_start = document.cookie.indexOf(c_name + \"=\");\r\n                if (c_start != -1) {\r\n                    c_start = c_start + c_name.length + 1;\r\n                    let c_end = document.cookie.indexOf(\";\", c_start);\r\n                    if (c_end == -1) {\r\n                        c_end = document.cookie.length;\r\n                    }\r\n                    return (document.cookie.substring(c_start, c_end)).toString();\r\n                }\r\n            }\r\n            return \"\";\r\n        }\r\n\r\n        export function writeCookie(name: string, value: any, days?: number) {\r\n            let expires;\r\n            if (days) {\r\n                let date = new Date();\r\n                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n                expires = \"; expires=\" + date.toUTCString();\r\n            }\r\n            else {\r\n                expires = \"\";\r\n            }\r\n            document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n        }\r\n\r\n        export function removeCookie(name: string) {\r\n            writeCookie(name, \"\", -1);\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../../../../../Framework/Utils/cookie.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/29/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        import Settings = Framework.Settings;\r\n        import writeCookie = Framework.Utils.writeCookie;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export class PlayerColorCustomizer {\r\n\r\n            private previousColorButton: HTMLDivElement;\r\n            private nextColorButton: HTMLDivElement;\r\n            private colorCircle: HTMLDivElement;\r\n            private currentColorCounter: number = 0;\r\n            private colorsArray: number[];\r\n\r\n            constructor() {\r\n\r\n                if (Settings.playerSignedIn) {\r\n                    this.colorsArray = PockeySettings.LARGE_COLORS_ARRAY;\r\n                }\r\n                else {\r\n                    this.colorsArray = PockeySettings.SMALL_COLORS_ARRAY;\r\n                }\r\n\r\n                this.colorCircle = document.getElementById(\"PlayerColorCircle\") as HTMLDivElement;\r\n\r\n                if (PockeySettings.PLAYER_COLOR_ID) {\r\n                    this.currentColorCounter = PockeySettings.PLAYER_COLOR_ID;\r\n                    PockeySettings.PLAYER_COLOR = this.colorsArray[PockeySettings.PLAYER_COLOR_ID];\r\n                }\r\n\r\n                PockeySettings.PLAYER_COLOR_ID = this.currentColorCounter;\r\n                writeCookie(\"PockeyUserColorId\", PockeySettings.PLAYER_COLOR_ID, 30);\r\n\r\n\r\n                this.colorCircle.style.backgroundColor = this.parseColor(this.colorsArray[this.currentColorCounter]);\r\n\r\n                this.previousColorButton = document.getElementById(\"PreviousColorButton\") as HTMLDivElement;\r\n                this.nextColorButton = document.getElementById(\"NextColorButton\") as HTMLDivElement;\r\n\r\n                this.previousColorButton.onclick = () => {\r\n\r\n                    this.currentColorCounter--;\r\n                    if (this.currentColorCounter < 0) {\r\n                        this.currentColorCounter = this.colorsArray.length - 1;\r\n                    }\r\n                    PockeySettings.PLAYER_COLOR_ID = this.currentColorCounter;\r\n                    this.colorCircle.style.backgroundColor = this.parseColor(this.colorsArray[this.currentColorCounter]);\r\n                    writeCookie(\"PockeyUserColorId\", PockeySettings.PLAYER_COLOR_ID, 30);\r\n                };\r\n                this.nextColorButton.onclick = () => {\r\n\r\n                    this.currentColorCounter++;\r\n                    if (this.currentColorCounter > this.colorsArray.length - 1) {\r\n                        this.currentColorCounter = 0;\r\n                    }\r\n                    PockeySettings.PLAYER_COLOR_ID = this.currentColorCounter;\r\n                    this.colorCircle.style.backgroundColor = this.parseColor(this.colorsArray[this.currentColorCounter]);\r\n                    writeCookie(\"PockeyUserColorId\", PockeySettings.PLAYER_COLOR_ID, 30);\r\n\r\n                };\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.PLAYER_SIGNED_IN, this.onPlayerSignedIn.bind(this))\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.PLAYER_SIGNED_OUT, this.onPlayerSignedOut.bind(this))\r\n            }\r\n\r\n            private onPlayerSignedIn(): void {\r\n                this.colorsArray = PockeySettings.LARGE_COLORS_ARRAY;\r\n                // this.currentAvatarCounter = 0;\r\n                // PockeySettings.PLAYER_AVATAR_ID = this.currentAvatarCounter;\r\n                // this.avatarHolder.style.background = \"center / contain no-repeat url(\" + this.avatarsArray[this.currentAvatarCounter] + \")\";\r\n            }\r\n\r\n            private onPlayerSignedOut(): void {\r\n                this.colorsArray = PockeySettings.SMALL_COLORS_ARRAY;\r\n                if (PockeySettings.PLAYER_COLOR_ID > this.colorsArray.length - 1) {\r\n                    this.currentColorCounter = 0;\r\n                    PockeySettings.PLAYER_COLOR_ID = this.currentColorCounter;\r\n                }\r\n\r\n                this.colorCircle.style.backgroundColor = this.parseColor(this.colorsArray[this.currentColorCounter]);\r\n            }\r\n\r\n            private parseColor(color) {\r\n\r\n                if (typeof color === 'number') {\r\n                    //make sure our hexadecimal number is padded out\r\n                    color = '#' + ('00000' + (color | 0).toString(16)).substr(-6);\r\n                }\r\n\r\n                return color;\r\n\r\n            };\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../../../../../Framework/Utils/cookie.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/29/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        import Settings = Framework.Settings;\r\n        import writeCookie = Framework.Utils.writeCookie;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export class PlayerAvatarCustomizer {\r\n\r\n            private previousAvatarButton: HTMLDivElement;\r\n            private nextAvatarButton: HTMLDivElement;\r\n            private avatarHolder: HTMLDivElement;\r\n            private currentAvatarCounter: number = 0;\r\n            private avatarsArray: InventoryVO[];\r\n\r\n            constructor() {\r\n                if (Settings.playerSignedIn) {\r\n                    this.avatarsArray = PockeySettings.LARGE_AVATARS_ARRAY;\r\n                }\r\n                else {\r\n                    this.avatarsArray = PockeySettings.SMALL_AVATARS_ARRAY;\r\n                }\r\n\r\n                if (PockeySettings.PLAYER_AVATAR_ID) {\r\n                    _.forEach(this.avatarsArray, (avatar: InventoryVO, counter: number) => {\r\n                        if (avatar.id == PockeySettings.PLAYER_AVATAR_ID) {\r\n                            this.currentAvatarCounter = counter;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                this.avatarHolder = document.getElementById(\"AvatarImage\") as HTMLDivElement;\r\n\r\n\r\n                PockeySettings.PLAYER_AVATAR_ID = this.avatarsArray[this.currentAvatarCounter].id;\r\n                writeCookie(\"PockeyUserAvatarId\", PockeySettings.PLAYER_AVATAR_ID, 30);\r\n\r\n                this.avatarHolder.style.background = \"center / contain no-repeat #1A4157 url(\" + this.avatarsArray[this.currentAvatarCounter].icon + \")\";\r\n\r\n                //todo writeid\r\n                this.previousAvatarButton = document.getElementById(\"PreviousAvatarButton\") as HTMLDivElement;\r\n                this.nextAvatarButton = document.getElementById(\"NextAvatarButton\") as HTMLDivElement;\r\n\r\n                this.previousAvatarButton.onclick = () => {\r\n\r\n                    this.currentAvatarCounter--;\r\n                    if (this.currentAvatarCounter < 0) {\r\n                        this.currentAvatarCounter = this.avatarsArray.length - 1;\r\n\r\n                    }\r\n                    PockeySettings.PLAYER_AVATAR_ID = this.avatarsArray[this.currentAvatarCounter].id;\r\n\r\n                    this.avatarHolder.style.background = \"center / contain no-repeat #1A4157 url(\" + this.avatarsArray[this.currentAvatarCounter].icon + \")\";\r\n\r\n                    writeCookie(\"PockeyUserAvatarId\", PockeySettings.PLAYER_AVATAR_ID, 30);\r\n                };\r\n                this.nextAvatarButton.onclick = () => {\r\n\r\n                    this.currentAvatarCounter++;\r\n                    if (this.currentAvatarCounter > this.avatarsArray.length - 1) {\r\n                        this.currentAvatarCounter = 0;\r\n                    }\r\n                    PockeySettings.PLAYER_AVATAR_ID = this.avatarsArray[this.currentAvatarCounter].id;\r\n\r\n                    this.avatarHolder.style.background = \"center / contain no-repeat #1A4157 url(\" + this.avatarsArray[this.currentAvatarCounter].icon + \")\";\r\n\r\n                    writeCookie(\"PockeyUserAvatarId\", PockeySettings.PLAYER_AVATAR_ID, 30);\r\n\r\n                    console.log(\"this.currentAvatarCounter: \" + this.currentAvatarCounter);\r\n\r\n                };\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.PLAYER_SIGNED_IN, this.onPlayerSignedIn.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.PLAYER_SIGNED_OUT, this.onPlayerSignedOut.bind(this));\r\n            }\r\n\r\n            private onPlayerSignedOut(): void {\r\n                this.avatarsArray = PockeySettings.SMALL_AVATARS_ARRAY;\r\n                this.currentAvatarCounter = 0;\r\n                PockeySettings.PLAYER_AVATAR_ID = this.avatarsArray[this.currentAvatarCounter].id;\r\n                this.avatarHolder.style.background = \"center / contain no-repeat #1A4157 url(\" + this.avatarsArray[this.currentAvatarCounter].icon + \")\";\r\n            }\r\n\r\n            private onPlayerSignedIn(): void {\r\n                this.avatarsArray = PockeySettings.LARGE_AVATARS_ARRAY;\r\n\r\n                // this.currentAvatarCounter = 0;\r\n                // PockeySettings.PLAYER_AVATAR_ID = this.avatarsArray[this.currentAvatarCounter].id;\r\n                // this.avatarHolder.style.background = \"center / contain no-repeat url(\" + this.avatarsArray[this.currentAvatarCounter] + \")\";\r\n            }\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../../../../../Framework/Utils/cookie.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/30/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        import writeCookie = Framework.Utils.writeCookie;\r\n        import removeCookie = Framework.Utils.removeCookie;\r\n        import Settings = Framework.Settings;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export class LoginHandler {\r\n            private startBtn: HTMLDivElement;\r\n            private googleSignIn: HTMLDivElement;\r\n            private facebookSignIn: HTMLDivElement;\r\n            private signOutBtn: HTMLDivElement;\r\n            private inputText: HTMLTextAreaElement;\r\n            private correctText: HTMLDivElement;\r\n\r\n            constructor() {\r\n\r\n                this.correctText = document.getElementById(\"CorrectText\") as HTMLDivElement;\r\n                this.handleInputText();\r\n                this.handleSignOutButton();\r\n                this.handleStartButton();\r\n                this.handleFacebookButton();\r\n                this.handleGoogleButton();\r\n                this.checkForPlayerSignIn();\r\n            }\r\n\r\n            private handleInputText(): void {\r\n                this.inputText = document.getElementById(\"InputText\") as HTMLTextAreaElement;\r\n                if (PockeySettings.PLAYER_NAME != \"\") {\r\n                    this.inputText.value = PockeySettings.PLAYER_NAME;\r\n                }\r\n                this.inputText.addEventListener('input', this.typeHandler.bind(this));\r\n                this.inputText.addEventListener('propertychange', this.typeHandler.bind(this)) // for IE8\r\n                this.inputText.addEventListener('change', this.typeHandler.bind(this)) // fallback for FireFox\r\n            }\r\n\r\n            private typeHandler(): void {\r\n                // console.log(this.inputText.value);\r\n                if (this.inputText.value != \"\") {\r\n                    this.correctText.style.visibility = \"hidden\";\r\n                }\r\n            }\r\n\r\n            private handleSignOutButton(): void {\r\n                this.signOutBtn = document.getElementById(\"LogoutButton\") as HTMLDivElement;\r\n\r\n                this.signOutBtn.onclick = () => {\r\n                    console.log(\"intra la click\");\r\n                    let pockeyEvent = new Event('PockeyGoogleSignOutEvent');\r\n                    this.signOutBtn.dispatchEvent(pockeyEvent);\r\n                    removeCookie(\"PockeyEmail\");\r\n                    removeCookie(\"PockeyFacebookID\");\r\n                    removeCookie(\"PockeyUserColorId\");\r\n                    removeCookie(\"PockeyUserAvatarId\");\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.PLAYER_SIGNED_OUT);\r\n                };\r\n\r\n                this.signOutBtn.addEventListener('PockeyGoogleSignedOutEvent', (e: CustomEvent) => {\r\n                    this.showSignInButtons();\r\n                });\r\n\r\n                this.signOutBtn.addEventListener('PockeyFacebookSignedOutEvent', (e: CustomEvent) => {\r\n                    this.showSignInButtons();\r\n                });\r\n\r\n            }\r\n\r\n            private showSignInButtons(): void {\r\n                this.googleSignIn.style.display = \"block\";\r\n                this.facebookSignIn.style.display = \"block\";\r\n                this.signOutBtn.style.display = \"none\";\r\n\r\n                document.getElementById(\"MainMenuPlayerRankingsHolder\").style.display = \"none\";\r\n\r\n            }\r\n\r\n            private hideSignInButtons(): void {\r\n                this.googleSignIn.style.display = \"none\";\r\n                this.facebookSignIn.style.display = \"none\";\r\n                this.signOutBtn.style.display = \"block\";\r\n                document.getElementById(\"MainMenuPlayerRankingsHolder\").style.display = \"flex\";\r\n            }\r\n\r\n            private handleStartButton(): void {\r\n                this.startBtn = document.getElementById(\"StartGameButtonHolder\") as HTMLDivElement;\r\n                this.startBtn.onclick = () => {\r\n                    if (this.inputText.value == \"\") {\r\n                        this.correctText.style.visibility = \"visible\";\r\n\r\n                        TweenMax.to(this.inputText, .2, {css: {borderColor: \"#e92c5a\"}, yoyo: true, repeat: 3});\r\n                    }\r\n                    else {\r\n                        SignalsManager.DispatchSignal(PockeySignalTypes.START_GAME);\r\n                        writeCookie('PockeyUsername', this.inputText.value, 30);\r\n                    }\r\n\r\n                };\r\n            }\r\n\r\n            private handleGoogleButton(): void {\r\n                this.googleSignIn = document.getElementById(\"GoogleSignInButtonHolder\") as HTMLDivElement;\r\n\r\n                this.googleSignIn.addEventListener('PockeyGoogleSignInEvent', (e: CustomEvent) => {\r\n                    // e.target matches elem\r\n                    writeCookie('PockeyEmail', e.detail.toString(), 30);\r\n\r\n                    this.hideSignInButtons();\r\n\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.PLAYER_SIGNED_IN);\r\n\r\n                    // this.googleSign\r\n                }, false);\r\n            }\r\n\r\n            private handleFacebookButton(): void {\r\n                this.facebookSignIn = document.getElementById(\"FacebookSignInButtonHolder\") as HTMLDivElement;\r\n\r\n                this.facebookSignIn.addEventListener(\"PockeyFacebookSignedIn\", (e: CustomEvent) => {\r\n                    if (!_.isNull(e.detail[\"email\"]) && !_.isUndefined(e.detail[\"email\"])) {\r\n                        writeCookie('PockeyEmail', e.detail[\"email\"].toString(), 30);\r\n                    }\r\n                    if (!_.isNull(e.detail[\"id\"]) && !_.isUndefined(e.detail[\"id\"])) {\r\n                        writeCookie('PockeyFacebookID', e.detail[\"id\"].toString(), 30);\r\n                    }\r\n                    // console.log(\"s-a semnat cu fb-ul: \" + e.detail);\r\n\r\n                    // writeCookie('PockeyEmail', e.detail.toString(), 30);\r\n\r\n                    this.hideSignInButtons();\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.PLAYER_SIGNED_IN);\r\n\r\n                });\r\n            }\r\n\r\n            private checkForPlayerSignIn(): void {\r\n                if (Settings.playerSignedIn) {\r\n                    this.hideSignInButtons();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/31/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        export class TutorialMenu {\r\n            private howToPlayButton: HTMLDivElement;\r\n            private howToButtonClicked: boolean = false;\r\n            private howToPlayImage: HTMLDivElement;\r\n\r\n            constructor() {\r\n                this.howToPlayButton = document.getElementById(\"HowToPlayButtonHolder\") as HTMLDivElement;\r\n                this.howToPlayImage = document.getElementById(\"HowToPlayImage\") as HTMLDivElement;\r\n                let buttonBg: HTMLDivElement = this.howToPlayButton.querySelector('.normalButtonBackground') as HTMLDivElement;\r\n                console.log(\"how to clicked la constructor: \" + this.howToButtonClicked);\r\n\r\n                this.howToPlayButton.onclick = () => {\r\n                    this.howToButtonClicked = (!this.howToButtonClicked);\r\n                    console.log(\"how to clicked la click: \" + this.howToButtonClicked);\r\n                    if (this.howToButtonClicked) {\r\n                        this.howToPlayButton.style.borderColor = \"#ffffff\";\r\n                        buttonBg.style.backgroundColor = \"#ffffff\";\r\n                        buttonBg.style.color = \"#2D899D\";\r\n\r\n\r\n                        this.howToPlayImage.style.background = \"none\";\r\n                        let random: number = Math.random() * 50;\r\n\r\n                        this.howToPlayImage.style.background = \"url(Assets/Desktop/Images/howtoplay.gif?v=\" + random.toString() + \")  center center / 97% no-repeat\";\r\n\r\n                        document.getElementById(\"HowToPlayImage\").style.display = \"block\";\r\n                        document.getElementById(\"FbTwitterPromoHolder\").style.display = \"none\";\r\n                        document.getElementById(\"ShareButtonsHolder\").style.display = \"none\";\r\n                    }\r\n                    else {\r\n                        this.howToPlayButton.style.borderColor = \"\";\r\n                        buttonBg.style.backgroundColor = \"\";\r\n                        buttonBg.style.color = \"\";\r\n                        this.howToPlayImage.style.background = \"none\";\r\n\r\n                        document.getElementById(\"HowToPlayImage\").style.display = \"none\";\r\n                        document.getElementById(\"FbTwitterPromoHolder\").style.display = \"flex\";\r\n                        document.getElementById(\"ShareButtonsHolder\").style.display = \"block\";\r\n                    }\r\n                };\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"player-color-customizer.ts\"/>\r\n///<reference path=\"player-avatar-customizer.ts\"/>\r\n///<reference path=\"login-handler.ts\"/>\r\n///<reference path=\"tutorial-menu.ts\"/>\r\n\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/29/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        export class PlayGameMenu {\r\n\r\n\r\n            private playerColorCustomizer: PlayerColorCustomizer;\r\n            private playerAvatarCustomizer: PlayerAvatarCustomizer;\r\n            private loginHandler: LoginHandler;\r\n            private tutorialMenu: TutorialMenu;\r\n\r\n            constructor() {\r\n                this.loginHandler = new LoginHandler();\r\n                this.playerColorCustomizer = new PlayerColorCustomizer();\r\n                this.playerAvatarCustomizer = new PlayerAvatarCustomizer();\r\n                this.tutorialMenu = new TutorialMenu();\r\n            }\r\n        }\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 11/1/2018\r\n */\r\n\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        import Settings = Framework.Settings;\r\n\r\n        export class InventoryButton {\r\n\r\n            private button: HTMLDivElement;\r\n            private clicked: boolean;\r\n            public id: string;\r\n            public onShowCategoryCallback: Function;\r\n            public onHideCategoryCallback: Function;\r\n\r\n            public category: string;\r\n            private categoryElements: any[];\r\n\r\n            constructor(btnDiv: HTMLDivElement, showCategoryCallback: Function, hideCategoryCallback: Function) {\r\n                this.button = btnDiv;\r\n                this.id = this.button.id;\r\n                this.onShowCategoryCallback = showCategoryCallback;\r\n                this.onHideCategoryCallback = hideCategoryCallback;\r\n                this.category = this.id.replace(\"Inventory\", \"\");\r\n                console.log(\"categoryElements name: \" + this.category);\r\n                let inventoryButtonLogo = this.button.querySelector('.inventoryButtonLogo') as HTMLDivElement;\r\n\r\n                if (Settings.playerSignedIn) {\r\n                    this.categoryElements = PockeySettings[\"LARGE_\" + this.category.toUpperCase() + \"_ARRAY\"];\r\n                }\r\n                else {\r\n                    this.categoryElements = PockeySettings[\"SMALL_\" + this.category.toUpperCase() + \"_ARRAY\"];\r\n                }\r\n\r\n                this.clicked = false;\r\n\r\n                this.button.onclick = () => {\r\n                    this.clicked = !this.clicked;\r\n\r\n                    if (this.clicked) {\r\n\r\n                        /////////////////\r\n                        inventoryButtonLogo.style.background = \"center / contain no-repeat url(Assets/Desktop/Images/minus-sign-white.png)\";\r\n                        // this.button.style.borderColor = \"\";\r\n                        this.button.style.color = \"white\";\r\n\r\n                        this.onShowCategoryCallback(this.categoryElements);\r\n                    }\r\n                    else {\r\n\r\n                        ////////////////\r\n                        inventoryButtonLogo.style.background = \"center / contain no-repeat url(Assets/Desktop/Images/plus-sign-white.png)\";\r\n                        // this.button.style.borderColor = \"\";\r\n                        this.button.style.color = \"\";\r\n\r\n                        this.onHideCategoryCallback(this.categoryElements);\r\n                    }\r\n                };\r\n\r\n                this.button.onmouseover = () => {\r\n                    if (this.clicked) {\r\n                        inventoryButtonLogo.style.background = \"center / contain no-repeat url(Assets/Desktop/Images/minus-sign-white.png)\";\r\n                        this.button.style.borderColor = \"\";\r\n                        this.button.style.backgroundColor = \"\";\r\n\r\n                        this.button.style.color = \"white\";\r\n                    }\r\n\r\n                };\r\n\r\n                this.button.onmouseout = () => {\r\n                    if (this.clicked) {\r\n                        inventoryButtonLogo.style.background = \"center / contain no-repeat url(Assets/Desktop/Images/minus-sign-color.png)\";\r\n                        this.button.style.borderColor = \"white\";\r\n                        this.button.style.backgroundColor = \"white\";\r\n                        this.button.style.color = \"#2d889c\";\r\n                    }\r\n                    else {\r\n                        inventoryButtonLogo.style.background = \"\";\r\n                    }\r\n                };\r\n            }\r\n\r\n            public onSignedIn(): void {\r\n                if (this.clicked) {\r\n                    this.onHideCategoryCallback(this.categoryElements);\r\n                    this.categoryElements = PockeySettings[\"LARGE_\" + this.category.toUpperCase() + \"_ARRAY\"];\r\n                    this.onShowCategoryCallback(this.categoryElements);\r\n                }\r\n                else {\r\n                    this.categoryElements = PockeySettings[\"LARGE_\" + this.category.toUpperCase() + \"_ARRAY\"];\r\n                }\r\n            }\r\n\r\n            public onSignedOut(): void {\r\n                if (this.clicked) {\r\n                    this.onHideCategoryCallback(this.categoryElements);\r\n                    this.categoryElements = PockeySettings[\"SMALL_\" + this.category.toUpperCase() + \"_ARRAY\"];\r\n                    this.onShowCategoryCallback(this.categoryElements);\r\n                }\r\n                else {\r\n                    this.categoryElements = PockeySettings[\"SMALL_\" + this.category.toUpperCase() + \"_ARRAY\"];\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 11/1/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        export class InventoryBox {\r\n            public imageDiv: HTMLDivElement;\r\n            public iconDiv: HTMLDivElement;\r\n            // public id: string;\r\n            public occupied: boolean = false;\r\n            // public category: string = \"\";\r\n            // private icon: string = \"\";\r\n            public clicked: boolean = false;\r\n            public inventoryVO:InventoryVO;\r\n\r\n            private borderAnimation: TweenMax;\r\n\r\n            constructor(imgDiv: HTMLDivElement, clickFunction: Function) {\r\n                this.imageDiv = imgDiv;\r\n                this.iconDiv = this.imageDiv.querySelector(\".inventoryItemBoxBackground\") as HTMLDivElement;\r\n\r\n                this.imageDiv.onmouseover = () => {\r\n                    if (this.occupied) {\r\n                        this.imageDiv.style.cursor = \"pointer\";\r\n                        this.imageDiv.style.borderColor = \"white\";\r\n                    }\r\n                    else {\r\n                        this.imageDiv.style.cursor = \"\";\r\n                        this.imageDiv.style.borderColor = \"\";\r\n                    }\r\n                };\r\n\r\n                this.imageDiv.onmouseout = () => {\r\n                    if (!this.clicked)\r\n                        this.imageDiv.style.borderColor = \"\";\r\n                };\r\n\r\n                this.imageDiv.onclick = () => {\r\n\r\n                    this.clicked = !this.clicked;\r\n\r\n                    if (this.clicked) {\r\n                        this.imageDiv.style.borderColor = \"white\";\r\n                        this.imageDiv.style.borderWidth = \"4px\";\r\n                    }\r\n\r\n                    if (this.occupied)\r\n                        clickFunction(this.inventoryVO);\r\n                }\r\n            }\r\n\r\n            public click():void\r\n            {\r\n                this.clicked = true;\r\n                this.imageDiv.style.borderColor = \"white\";\r\n                this.imageDiv.style.borderWidth = \"4px\";\r\n            }\r\n\r\n            public unClick():void\r\n            {\r\n                this.stopAnimation();\r\n                this.imageDiv.style.borderColor = \"\";\r\n                this.imageDiv.style.borderWidth = \"\";\r\n                this.clicked = false;\r\n            }\r\n\r\n            public addVO(inventoryVO: InventoryVO): void {\r\n                this.clearVO();\r\n\r\n                this.occupied = true;\r\n                this.inventoryVO = inventoryVO;\r\n                this.iconDiv.style.background = \"center / contain no-repeat #062f38 url(\" + this.inventoryVO.icon + \")\";\r\n                // this.category = inventoryVO.category;\r\n                // this.icon = inventoryVO.icon;\r\n            }\r\n\r\n            public clearVO(): void {\r\n                this.stopAnimation();\r\n                this.unClick();\r\n\r\n                // this.icon = \"\";\r\n                this.occupied = false;\r\n                this.iconDiv.style.background = \"center / contain no-repeat #062f38 url('')\";\r\n                this.inventoryVO = null;\r\n\r\n                (this.iconDiv.querySelector(\".inventoryItemBoxSelected\") as HTMLDivElement).style.display = \"\";\r\n                (this.iconDiv.querySelector(\".inventoryItemBoxLocked\") as HTMLDivElement).style.display = \"\";\r\n                // this.category = \"\";\r\n            }\r\n\r\n            private stopAnimation(): void {\r\n                if (this.borderAnimation && this.borderAnimation.isActive()) {\r\n                    this.borderAnimation.kill();\r\n                    this.borderAnimation = null;\r\n                }\r\n\r\n                this.imageDiv.style.borderColor = \"\";\r\n                this.imageDiv.style.borderWidth = \"\";\r\n            }\r\n\r\n            public animate(): void {\r\n\r\n                this.stopAnimation();\r\n\r\n                this.borderAnimation = TweenMax.to(this.imageDiv, 0.3, {\r\n                    css: {borderColor: \"white\", borderWidth: \"5px\"},\r\n                    yoyo: true,\r\n                    repeat: 1\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 11/8/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        export class InventoryItemsHolderButton {\r\n            public button: HTMLDivElement;\r\n            private bg: HTMLDivElement;\r\n            private iconBg: any;\r\n\r\n            constructor(btn: HTMLDivElement) {\r\n                this.button = btn;\r\n\r\n                let iconBgID: string = (this.button.getElementsByClassName(\"buttonArrow\")[0] as HTMLDivElement).id;\r\n                this.iconBg = document.getElementById(iconBgID);\r\n                let iconStyle = this.iconBg.currentStyle || window.getComputedStyle(this.iconBg);\r\n\r\n                // let initialBackground:string = iconBg.style.background;\r\n                let mouseOverBackground: string = iconStyle.background.toString().replace(\".svg\", \"-reg.svg\");\r\n\r\n                this.bg = this.button.getElementsByClassName(\"normalButtonBackground\")[0] as HTMLDivElement;\r\n\r\n                this.button.setAttribute(\"isActive\", \"true\");\r\n                this.button.onmouseover = () => {\r\n                    if (this.button.getAttribute(\"isActive\") == \"true\") {\r\n                        this.bg.style.background = \"white\";\r\n                        // bg.style.color = \"#2d899d\";\r\n                        this.iconBg.style.background = mouseOverBackground;\r\n                        /* cursor: pointer; */\r\n                    }\r\n                    else {\r\n                        this.bg.style.background = \"\";\r\n                        // bg.style.color = \"\";\r\n                        this.iconBg.style.background = \"\";\r\n                        /* cursor: pointer; */\r\n                    }\r\n                };\r\n\r\n                this.button.onmouseout = () => {\r\n                    // if (arrow.getAttribute(\"isActive\") == \"true\") {\r\n                    this.bg.style.background = \"\";\r\n                    // bg.style.color = \"#\";\r\n                    this.iconBg.style.background = \"\";\r\n\r\n                    /* cursor: pointer; */\r\n                    // }\r\n                };\r\n\r\n                this.disable();\r\n            }\r\n\r\n            public disable(): void {\r\n                this.button.style.opacity = \"0.5\";\r\n                this.button.style.cursor = \"default\";\r\n                this.button.setAttribute(\"isActive\", \"false\");\r\n                this.bg.style.background = \"\";\r\n                this.iconBg.style.background = \"\";\r\n\r\n            }\r\n\r\n            public enable(): void {\r\n                this.button.style.opacity = \"\";\r\n                this.button.style.cursor = \"\";\r\n                this.button.setAttribute(\"isActive\", \"true\");\r\n            }\r\n\r\n            /////\r\n\r\n            /////\r\n\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"inventory-button.ts\"/>\r\n///<reference path=\"inventory-box.ts\"/>\r\n///<reference path=\"inventory-items-holder-buttons.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/31/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n\r\n        import InventoryVO = Pockey.InventoryVO;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export class PockeyInventoryMenu {\r\n            private inventoryButtonsHolder: HTMLDivElement;\r\n            private inventoryButtons: InventoryButton[];\r\n\r\n            private boxesHolder: HTMLDivElement;\r\n            private holderTween: TweenMax;\r\n            private boxesHolderWrapper: HTMLDivElement;\r\n            private boxes: InventoryBox[];\r\n            private itemsArray: InventoryVO[];\r\n\r\n            private currentColumnIndex: number = 0;\r\n            private columnsNumber: number = 0;\r\n\r\n            private nextColumnBtn: InventoryItemsHolderButton;\r\n            private prevColumnBtn: InventoryItemsHolderButton;\r\n\r\n            private equipBtn: HTMLDivElement;\r\n\r\n            private bigAvatar: HTMLDivElement;\r\n            private itemNameDiv: HTMLDivElement;\r\n\r\n            private currentActiveItem: InventoryVO;\r\n            private columnWidth: number = 0;\r\n            private columnPadding: number = 0;\r\n            private offsetLimit: number;\r\n\r\n            constructor() {\r\n                this.itemsArray = [];\r\n                this.handleItemDescriptionPanel();\r\n                this.handleInventoryBoxes();\r\n                this.handleInventoryButtons();\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.PLAYER_SIGNED_IN, this.onPlayerSignedIn.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.PLAYER_SIGNED_OUT, this.onPlayerSignedOut.bind(this));\r\n            }\r\n\r\n            private onPlayerSignedIn(): void {\r\n                _.forEach(this.inventoryButtons, (button: InventoryButton) => {\r\n                    button.onSignedIn();\r\n                })\r\n            }\r\n\r\n            private onPlayerSignedOut(): void {\r\n                _.forEach(this.inventoryButtons, (button: InventoryButton) => {\r\n                    button.onSignedOut();\r\n                })\r\n            }\r\n\r\n            private handleItemDescriptionPanel(): void {\r\n                this.bigAvatar = document.getElementById(\"InventoryBigAvatar\") as HTMLDivElement;\r\n                this.itemNameDiv = document.getElementById(\"ItemNameText\") as HTMLDivElement;\r\n            }\r\n\r\n            private handleInventoryBoxes(): void {\r\n                this.boxesHolder = document.getElementById(\"ItemsHolder\") as HTMLDivElement;\r\n                this.boxesHolderWrapper = document.getElementById(\"ItemsHolderWrapper\") as HTMLDivElement;\r\n                this.boxesHolderWrapper.classList.add(\"inventoryRightSideMask\");\r\n                this.boxes = [];\r\n\r\n                /* var x = this.boxesHolder.querySelector('.itemsColumn');\r\n                 var initialWidth = x.clientWidth;\r\n                 console.log(\"initialWidth : \" + initialWidth);\r\n\r\n                this.columnWidth = (this.boxesHolder.children[0] as HTMLDivElement).offsetWidth;\r\n                 console.log(\"offset width: \" + this.columnWidth);\r\n                 // console.log(\"outer width: \" + column.outerWidth);\r\n                 this.columnWidth = (this.boxesHolder.children[0] as HTMLDivElement).scrollWidth;\r\n                 console.log(\"scroll width: \" + this.columnWidth);*/\r\n\r\n                let counter: number = 0;\r\n                _.forEach(this.boxesHolder.children, (column: HTMLDivElement) => {\r\n                    this.columnsNumber++;\r\n\r\n                    this.columnPadding = +((column.style.marginRight).replace(\"px\", \"\"));\r\n                    // console.log(\"offset width: \" + column.);\r\n                    // // console.log(\"outer width: \" + column.outerWidth);\r\n                    // console.log(\"scroll width: \" + column.scrollWidth);\r\n                    // console.log(\"parent node width: \" + column.parentNode.);\r\n                    _.forEach(column.children, (item: HTMLDivElement) => {\r\n                        let box: InventoryBox = new InventoryBox(item, this.showItemDescription.bind(this));\r\n                        this.boxes.push(box);\r\n                        counter++;\r\n                    });\r\n                });\r\n\r\n                TweenMax.delayedCall(0.5, () => {\r\n                    if (this.columnWidth == 0) {\r\n                        this.columnWidth = this.boxesHolder.offsetWidth / this.boxesHolder.children.length;\r\n                    }\r\n                });\r\n\r\n\r\n                // holderWidth = holderWidth.replace(\"px\", \"\");\r\n\r\n\r\n                console.log(\"curr col index: \" + this.currentColumnIndex);\r\n            }\r\n\r\n            private showCategory(category: InventoryVO[]): void {\r\n\r\n                _.forEach(category, (inventoryVO: InventoryVO, counter) => {\r\n                    _.remove(this.itemsArray, (item: InventoryVO) => {\r\n                        return item.id == inventoryVO.id;\r\n                    });\r\n\r\n                    this.itemsArray.push(inventoryVO);\r\n                });\r\n\r\n                this.reorderItemsArray();\r\n\r\n                let neededColumns: number = Math.round(this.itemsArray.length / 3);\r\n                let columnsNo: number = this.boxesHolder.children.length;\r\n\r\n                if (neededColumns > columnsNo) {\r\n                    // Get the last <li> element (\"Milk\") of <ul> with id=\"myList2\"\r\n                    let itm = this.boxesHolder.children[0];\r\n\r\n                    _.forEach(_.range(neededColumns - columnsNo), () => {\r\n                        let newColumn = itm.cloneNode(true);\r\n                        this.boxesHolder.appendChild(newColumn);\r\n                    });\r\n\r\n                    this.boxes = [];\r\n\r\n                    _.forEach(this.boxesHolder.children, (column: HTMLDivElement) => {\r\n                        // this.columnsNumber++;\r\n                        _.forEach(column.children, (item: HTMLDivElement) => {\r\n                            let box: InventoryBox = new InventoryBox(item, this.showItemDescription.bind(this));\r\n                            this.boxes.push(box);\r\n                        });\r\n                    });\r\n                }\r\n\r\n                // this.getNewColumnIndexOnShow(category[0].category);\r\n                this.updateBoxes(this.itemsArray, category[0].category);\r\n\r\n\r\n                let columnIndex = this.getNewColumnIndexOnShow(category[0].category);\r\n                let newOffset: number = columnIndex * this.columnWidth;\r\n                this.moveHolderToOffset(newOffset);\r\n                /*\r\n                this.updateBoxes(this.itemsToBeDisplayed, category[0].category);*/\r\n            }\r\n\r\n            private getNewColumnIndexOnShow(categoryName: string): number {\r\n\r\n                let firstItemIndex: number = -1;\r\n                let lastItemIndex: number = 0;\r\n\r\n                _.forEach(this.itemsArray, (item: InventoryVO, counter: number) => {\r\n                    if (item.category == categoryName) {\r\n\r\n                        if (firstItemIndex == -1) {\r\n\r\n                            firstItemIndex = counter;\r\n                            lastItemIndex = firstItemIndex - 1;\r\n\r\n                        }\r\n\r\n                        lastItemIndex++;\r\n                    }\r\n                });\r\n\r\n                // console.log(\"first and last item: \" + firstItemIndex, lastItemIndex);\r\n\r\n                let columnIndex: number = Math.floor(firstItemIndex / 3);\r\n                let maxColumns: number = this.boxesHolder.children.length;\r\n\r\n                if (columnIndex > maxColumns) {\r\n                    columnIndex = maxColumns;\r\n                }\r\n\r\n                /* if (tempColumnIndex < this.columnsNumber) {\r\n                     tempColumnIndex = this.columnsNumber;\r\n                 }*/\r\n\r\n                // this.currentColumnIndex = tempColumnIndex;\r\n\r\n\r\n                // console.log(\"tempColumnIndex: \" + tempColumnIndex);\r\n                // console.log(\"max columns: \" + maxColumns);\r\n                // console.log(\"itemsArray length: \" + this.itemsArray.length);\r\n\r\n                //\r\n\r\n                console.log(\"current columns index: \" + this.currentColumnIndex);\r\n                return columnIndex;\r\n            }\r\n\r\n            private reorderItemsArray(): void {\r\n                let newArr: InventoryVO[] = [];\r\n\r\n                _.forEach(this.inventoryButtons, (button: InventoryButton) => {\r\n                    _.forEach(this.itemsArray, (item: InventoryVO) => {\r\n                        if (item.category.toUpperCase() == button.category.toUpperCase()) {\r\n                            newArr.push(item);\r\n                        }\r\n                    });\r\n                });\r\n\r\n                this.itemsArray = newArr;\r\n\r\n            }\r\n\r\n            private hideCategory(category: InventoryVO[]): void {\r\n\r\n                // let neededColumns: number = Math.round(this.itemsArray.length / 3);\r\n                // let columnsNo:number = document.getElementById(\"ItemsHolder\").children.length;\r\n\r\n\r\n                // let tempCurrentColumn: number = this.currentColumnIndex;\r\n\r\n                _.forEach(category, (inventoryVO: InventoryVO, counter) => {\r\n                    _.remove(this.itemsArray, (item: InventoryVO) => {\r\n                        if (item.id == inventoryVO.id) {\r\n\r\n                        }\r\n                        return item.id == inventoryVO.id;\r\n                    });\r\n                });\r\n                this.reorderItemsArray();\r\n\r\n\r\n                let neededColumns: number = Math.round(this.itemsArray.length / 3);\r\n                if (neededColumns < this.columnsNumber) {\r\n                    neededColumns = this.columnsNumber;\r\n                }\r\n                let columnsNo: number = this.boxesHolder.children.length;\r\n                if (columnsNo > neededColumns) {\r\n                    // console.log(\"intra la columnsNo > neededColumns\");\r\n                    console.log(\"children inainate de remove: \" + this.boxesHolder.children.length);\r\n\r\n                    let boxes: HTMLCollection = this.boxesHolder.children;\r\n                    for (let i = boxes.length - 1; i >= neededColumns; i--) {\r\n                        this.boxesHolder.removeChild(boxes[i]);\r\n                    }\r\n\r\n\r\n                    /*_.forEach(_.range(document.getElementById(\"ItemsHolder\").children.length), (counter:number) => {\r\n                        if(counter >= neededColumns - 1)\r\n                        {\r\n                            // var elem = document.getElementById(id);\r\n                            // this.boxesHolder.removeChild(this.boxesHolder.childNodes[counter]);\r\n                            // removech\r\n                            // this.boxesHolder.removeChild(this.boxesHolder.childNodes[counter]);\r\n                        }\r\n                    });*/\r\n                    console.log(\"children dupa remove: \" + this.boxesHolder.children.length);\r\n\r\n                    // var element = document.getElementById(elementId);\r\n                    // element.parentNode.removeChild(element);\r\n                    // while (document.getElementById(\"ItemsHolder\").children.length > neededColumns) {\r\n                    //     document.getElementById(\"ItemsHolder\").parentNode.removeChild(document.getElementById(\"ItemsHolder\").parentNode.children[0]);\r\n                    // }\r\n\r\n                    // let itm = document.getElementById(\"ItemsHolder\").children[0];\r\n                    /*\r\n                                        _.forEach(_.range(neededColumns - columnsNo), () => {\r\n                                            let newColumn = itm.cloneNode(true);\r\n                                            document.getElementById(\"ItemsHolder\").appendChild(newColumn);\r\n                                        });\r\n\r\n                                        this.boxes = [];\r\n\r\n                                        _.forEach(this.boxesHolder.children, (column: HTMLDivElement) => {\r\n                                            this.columnsNumber++;\r\n                                            _.forEach(column.children, (item: HTMLDivElement) => {\r\n                                                let box: InventoryBox = new InventoryBox(item, this.showItemDescription.bind(this));\r\n                                                this.boxes.push(box);\r\n                                            });\r\n                                        });*/\r\n                }\r\n                // let maxColumns: number = Math.round(this.itemsArray.length / 3);\r\n                // if (tempCurrentColumn > maxColumns)\r\n                //     tempCurrentColumn = maxColumns;\r\n                // if (tempCurrentColumn < this.columnsNumber)\r\n                //     tempCurrentColumn = this.columnsNumber;\r\n                //\r\n                // let itemsArrayIncludesClickedBoxID: boolean = false;\r\n                //\r\n                // _.forEach(this.itemsArray, (item: InventoryVO, counter: number) => {\r\n                //     if (this.currentActiveItem.id && item.id == this.currentActiveItem.id) {\r\n                //         itemsArrayIncludesClickedBoxID = true;\r\n                //         return true;\r\n                //     }\r\n                // });\r\n                //\r\n                // if (!itemsArrayIncludesClickedBoxID) {\r\n                //     //todo in caz ca ai unul selectat dintr-o categorie care a ramas sa ramana ala activ chiar daca in alt box vezi clicked id vezi clickedID\r\n                //     this.resetItemDescription();\r\n                // }\r\n                //\r\n                // this.currentColumnIndex = tempCurrentColumn;\r\n\r\n\r\n                this.updateBoxes(this.itemsArray);\r\n\r\n                let currentRight: string = this.boxesHolder.style.right;\r\n                currentRight = currentRight.replace(\"px\", \"\");\r\n\r\n                let newOffset: number = +currentRight;\r\n\r\n\r\n                if (this.itemsArray.length == 0) {\r\n                    this.disableEquipBtn(false);\r\n                    this.moveHolderToOffset(0);\r\n                }\r\n                else {\r\n                    if (this.itemsArray.length < 21) {\r\n                        this.moveHolderToOffset(0, true);\r\n                    }\r\n                    else {\r\n                        this.moveHolderToOffset(newOffset, true);\r\n                    }\r\n                }\r\n            }\r\n\r\n            private handleInventoryButtons(): void {\r\n                this.nextColumnBtn = new InventoryItemsHolderButton(document.getElementById(\"ItemsNextButton\") as HTMLDivElement);\r\n                // this.handleArrowBtn(this.nextColumnBtn);\r\n                this.nextColumnBtn.button.onclick = () => {\r\n                    if (this.nextColumnBtn.button.getAttribute(\"isActive\") == \"true\") {\r\n                        // if (this.columnWidth == 0) {\r\n                        //     this.columnWidth = this.boxesHolder.scrollWidth / this.boxesHolder.children.length;\r\n                        // }\r\n                        let currentRight: string = this.boxesHolder.style.right;\r\n                        currentRight = currentRight.replace(\"px\", \"\");\r\n\r\n                        let newOffset: number = +currentRight + this.columnWidth * 2;\r\n\r\n                        this.moveHolderToOffset(newOffset);\r\n                    }\r\n\r\n\r\n                };\r\n\r\n                this.prevColumnBtn = new InventoryItemsHolderButton(document.getElementById(\"ItemsPrevButton\") as HTMLDivElement);\r\n                // this.handleArrowBtn(this.prevColumnBtn);\r\n                this.prevColumnBtn.button.onclick = () => {\r\n                    if (this.prevColumnBtn.button.getAttribute(\"isActive\") == \"true\") {\r\n                        // if (this.columnWidth == 0) {\r\n                        //     this.columnWidth = this.boxesHolder.scrollWidth / this.boxesHolder.children.length;\r\n                        // }\r\n                        let currentRight: string = this.boxesHolder.style.right;\r\n                        currentRight = currentRight.replace(\"px\", \"\");\r\n\r\n                        let newOffset: number = +currentRight - this.columnWidth * 2;\r\n                        this.moveHolderToOffset(newOffset);\r\n                    }\r\n\r\n                };\r\n\r\n                this.inventoryButtonsHolder = document.getElementById(\"InventoryButtonsHolder\") as HTMLDivElement;\r\n\r\n                this.inventoryButtons = [];\r\n\r\n                _.forEach(this.inventoryButtonsHolder.children, (button: HTMLDivElement) => {\r\n                    // for (let i = 0; i < doc.childNodes.length; i++) {\r\n                    if (button.className == \"inventoryButton\") {\r\n                        let inventoryButton: InventoryButton = new InventoryButton(button, this.showCategory.bind(this), this.hideCategory.bind(this));\r\n                        this.inventoryButtons.push(inventoryButton);\r\n\r\n\r\n                    }\r\n                });\r\n\r\n                this.equipBtn = document.getElementById(\"EquipButtonHolder\") as HTMLDivElement;\r\n                this.equipBtn.style.opacity = \"0.5\";\r\n                this.equipBtn.setAttribute('clicked', 'false');\r\n\r\n                this.equipBtn.onclick = () => {\r\n                    if (this.equipBtn.getAttribute(\"enabled\") == \"true\") {\r\n                        let clicked: string = (this.equipBtn.getAttribute('clicked') == \"true\") ? \"false\" : \"true\";\r\n                        this.equipBtn.setAttribute('clicked', clicked);\r\n\r\n                        console.log(\"equip: \" + this.equipBtn.getAttribute('clicked'));\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            private moveHolderToOffset(offset: number, fast?: boolean): void {\r\n                this.offsetLimit = this.boxesHolder.offsetWidth;\r\n\r\n                if (offset >= this.boxesHolder.scrollWidth - this.boxesHolder.offsetWidth) {\r\n                    offset = this.boxesHolder.scrollWidth - this.boxesHolder.offsetWidth;\r\n                    this.boxesHolderWrapper.classList.remove(\"inventoryMask\");\r\n                    this.boxesHolderWrapper.classList.remove(\"inventoryRightSideMask\");\r\n                    this.boxesHolderWrapper.classList.add(\"inventoryLeftSideMask\");\r\n                    this.nextColumnBtn.disable();\r\n                    this.prevColumnBtn.enable();\r\n\r\n                    // this.disableArrow(this.nextColumnBtn);\r\n                    // this.nextColumnBtn.classList.add(\"disabledInventoryBtn\");\r\n                    // this.prevColumnBtn.classList.remove(\"disabledInventoryBtn\");\r\n                }\r\n                else if (offset <= 0) {\r\n                    offset = 0;\r\n                    this.boxesHolderWrapper.classList.remove(\"inventoryMask\");\r\n                    this.boxesHolderWrapper.classList.remove(\"inventoryLeftSideMask\");\r\n                    this.boxesHolderWrapper.classList.add(\"inventoryRightSideMask\");\r\n                    this.nextColumnBtn.enable();\r\n                    this.prevColumnBtn.disable();\r\n\r\n                    // this.nextColumnBtn.classList.remove(\"disabledInventoryBtn\");\r\n                    // this.prevColumnBtn.classList.add(\"disabledInventoryBtn\");\r\n                }\r\n                else {\r\n                    this.boxesHolderWrapper.classList.remove(\"inventoryLeftSideMask\");\r\n                    this.boxesHolderWrapper.classList.remove(\"inventoryRightSideMask\");\r\n                    this.boxesHolderWrapper.classList.add(\"inventoryMask\");\r\n                    this.nextColumnBtn.enable();\r\n                    this.prevColumnBtn.enable();\r\n\r\n                    // this.nextColumnBtn.classList.remove(\"disabledInventoryBtn\");\r\n                    // this.prevColumnBtn.classList.remove(\"disabledInventoryBtn\");\r\n                }\r\n\r\n                if (this.itemsArray.length == 0) {\r\n                    this.nextColumnBtn.disable();\r\n                    this.prevColumnBtn.disable();\r\n                }\r\n\r\n                if (this.holderTween && this.holderTween.isActive()) {\r\n                    this.holderTween.kill();\r\n                }\r\n\r\n                let tweenTime: number = 0.2;\r\n                if (fast)\r\n                    tweenTime = 0;\r\n\r\n                this.holderTween = TweenMax.to(this.boxesHolder, tweenTime, {css: {\"right\": offset.toString() + \"px\"}});\r\n                // this.boxesHolder.style.right = offset.toString() + \"px\";\r\n            }\r\n\r\n            /*private disableArrowButton(btn: HTMLDivElement): void {\r\n                btn.style.opacity = \"0.5\";\r\n                btn.style.cursor = \"default\";\r\n                btn.setAttribute(\"isActive\", \"false\");\r\n                let bg: HTMLDivElement = btn.getElementsByClassName(\"normalButtonBackground\")[0] as HTMLDivElement;\r\n                bg.style.background = \"#2d899d\";\r\n                // bg.style.zIndex = \"-10\";\r\n            }\r\n\r\n            private enableArrowBtn(btn: HTMLDivElement): void {\r\n                btn.style.opacity = \"\";\r\n                btn.style.cursor = \"\";\r\n                btn.setAttribute(\"isActive\", \"true\");\r\n            }*/\r\n\r\n            private updateBoxes(itemsToBeDisplayed: InventoryVO[], categoryToAnimate?: string) {\r\n                let maxLength: number = (this.boxes.length <= itemsToBeDisplayed.length) ? this.boxes.length : itemsToBeDisplayed.length;\r\n\r\n                _.forEach(this.boxes, (box: InventoryBox) => {\r\n                    box.clearVO();\r\n                });\r\n\r\n                _.forEach(_.range(maxLength), (counter: number) => {\r\n                    this.boxes[counter].addVO(itemsToBeDisplayed[counter]);\r\n\r\n                    if (this.currentActiveItem && this.boxes[counter].inventoryVO.id == this.currentActiveItem.id) {\r\n                        this.boxes[counter].click();\r\n                    }\r\n                    else {\r\n                        this.boxes[counter].unClick();\r\n                    }\r\n\r\n                    if (this.boxes[counter].inventoryVO.level > PockeySettings.PLAYER_LEVEL) {\r\n                        (this.boxes[counter].iconDiv.querySelector(\".inventoryItemBoxLocked\") as HTMLDivElement).style.display = \"block\";\r\n                    }\r\n                    else {\r\n                        (this.boxes[counter].iconDiv.querySelector(\".inventoryItemBoxLocked\") as HTMLDivElement).style.display = \"\";\r\n                    }\r\n\r\n                    if (categoryToAnimate && this.boxes[counter].inventoryVO.category.toUpperCase() == categoryToAnimate.toUpperCase()) {\r\n                        this.boxes[counter].animate();\r\n                    }\r\n\r\n                    if (this.boxes[counter].inventoryVO.id == PockeySettings.PLAYER_AVATAR_ID\r\n                        || this.boxes[counter].inventoryVO.id == PockeySettings.PLAYER_DECAL_ID\r\n                        || this.boxes[counter].inventoryVO.id == PockeySettings.PLAYER_CUE_ID) {\r\n                        (this.boxes[counter].iconDiv.querySelector(\".inventoryItemBoxSelected\") as HTMLDivElement).style.display = \"block\";\r\n                    }\r\n                    else {\r\n                        (this.boxes[counter].iconDiv.querySelector(\".inventoryItemBoxSelected\") as HTMLDivElement).style.display = \"\";\r\n\r\n                    }\r\n                });\r\n\r\n            }\r\n\r\n            private showItemDescription(inventoryVO: InventoryVO): void {\r\n                this.bigAvatar.style.background = \"center / contain no-repeat #062f38 url(\" + inventoryVO.icon + \")\";\r\n                this.itemNameDiv.innerHTML = inventoryVO.id;\r\n\r\n                _.forEach(this.boxes, (box: InventoryBox) => {\r\n                    if (box.occupied) {\r\n                        if (box.inventoryVO.id != inventoryVO.id) {\r\n                            box.unClick();\r\n                        }\r\n                    }\r\n                });\r\n\r\n                this.currentActiveItem = inventoryVO;\r\n\r\n                this.checkIfCurrentItemCanBeUsed();\r\n            }\r\n\r\n            private checkIfCurrentItemCanBeUsed(): void {\r\n\r\n                if (this.currentActiveItem.level > PockeySettings.PLAYER_LEVEL) {\r\n                    this.disableEquipBtn(false);\r\n                    return;\r\n                }\r\n\r\n                switch (this.currentActiveItem.category) {\r\n\r\n                    case \"AVATARS\": {\r\n                        // _.forEach(PockeySettings.LARGE_AVATARS_ARRAY)\r\n                        if (PockeySettings.PLAYER_AVATAR_ID != this.currentActiveItem.id) {\r\n                            this.enableEquipBtn();\r\n                        }\r\n                        else {\r\n                            this.disableEquipBtn();\r\n                        }\r\n                        return;\r\n                    }\r\n                    case \"CUES\": {\r\n                        if (PockeySettings.PLAYER_CUE_ID != this.currentActiveItem.id) {\r\n                            this.enableEquipBtn();\r\n                        }\r\n                        else {\r\n                            this.disableEquipBtn();\r\n                        }\r\n                        return;\r\n                    }\r\n                    case \"DECALS\": {\r\n                        if (PockeySettings.PLAYER_DECAL_ID != this.currentActiveItem.id) {\r\n                            this.enableEquipBtn();\r\n                        }\r\n                        else {\r\n                            this.disableEquipBtn();\r\n                        }\r\n                        return;\r\n                    }\r\n                    case \"GOALIES\": {\r\n                        return;\r\n                    }\r\n                    case \"MISC\": {\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            private enableEquipBtn(): void {\r\n                this.equipBtn.setAttribute(\"enabled\", \"true\");\r\n                this.equipBtn.style.opacity = \"1\";\r\n                this.equipBtn.querySelector(\".normalButtonBackground\").innerHTML = \"EQUIP\";\r\n                this.equipBtn.style.cursor = \"pointer\";\r\n                // let equipBtnBackground:HTMLDivElement = this.equipBtn.querySelector(\".normalButtonBackground\") as HTMLDivElement;\r\n            }\r\n\r\n            private disableEquipBtn(changeText: boolean = true): void {\r\n                this.equipBtn.setAttribute(\"enabled\", \"false\");\r\n                this.equipBtn.style.opacity = \"0.5\";\r\n                if (changeText)\r\n                    this.equipBtn.querySelector(\".normalButtonBackground\").innerHTML = \"EQUIPPED\";\r\n                else {\r\n                    this.equipBtn.querySelector(\".normalButtonBackground\").innerHTML = \"EQUIP\";\r\n                }\r\n                this.equipBtn.style.cursor = \"\";\r\n            }\r\n\r\n            private resetItemDescription(): void {\r\n                this.bigAvatar.style.background = \"center / contain no-repeat #062f38 url('')\";\r\n                this.itemNameDiv.innerHTML = \"Item Name\";\r\n\r\n                /*_.forEach(this.boxes, (box:InventoryBox) => {\r\n                    if(box.occupied)\r\n                    {\r\n                        if(box.inventoryVO.id != inventoryVO.id)\r\n                        {\r\n                            box.unClick();\r\n                        }\r\n                    }\r\n                });*/\r\n            }\r\n\r\n            /* private handleArrowBtn(arrow: HTMLDivElement): void {\r\n                 //center url(\"Assets/Desktop/Images/icon_arrow1-left-reg.svg\")\r\n                 let iconBgID: string = (arrow.getElementsByClassName(\"buttonArrow\")[0] as HTMLDivElement).id;\r\n                 let iconBg: any = document.getElementById(iconBgID);\r\n                 let iconStyle = iconBg.currentStyle || window.getComputedStyle(iconBg);\r\n\r\n                 // let initialBackground:string = iconBg.style.background;\r\n                 let mouseOverBackground: string = iconStyle.background.toString().replace(\".svg\", \"-reg.svg\");\r\n\r\n                 let bg: HTMLDivElement = arrow.getElementsByClassName(\"normalButtonBackground\")[0] as HTMLDivElement;\r\n\r\n                 arrow.setAttribute(\"isActive\", \"true\");\r\n                 arrow.onmouseover = () => {\r\n                     if (arrow.getAttribute(\"isActive\") == \"true\") {\r\n                         bg.style.background = \"white\";\r\n                         // bg.style.color = \"#2d899d\";\r\n                         iconBg.style.background = mouseOverBackground;\r\n                         /!* cursor: pointer; *!/\r\n                     }\r\n                     else {\r\n                         bg.style.background = \"\";\r\n                         // bg.style.color = \"\";\r\n                         iconBg.style.background = \"\";\r\n                         /!* cursor: pointer; *!/\r\n                     }\r\n                 };\r\n\r\n                 arrow.onmouseout = () => {\r\n                     // if (arrow.getAttribute(\"isActive\") == \"true\") {\r\n                     bg.style.background = \"\";\r\n                     // bg.style.color = \"#\";\r\n                     iconBg.style.background = \"\";\r\n\r\n                     /!* cursor: pointer; *!/\r\n                     // }\r\n                 };\r\n\r\n\r\n                 /!* let arrowBg:HTMLDivElement = arrow.getElementsByClassName(\"buttonArrow\")[0] as HTMLDivElement;\r\n                  if(!arrow.getAttribute(\"initialBg\"))\r\n                  {\r\n                     arrow.setAttribute(\"initialBg\", arrowBg.style.background)\r\n                  }\r\n\r\n                  // arrow.classList.remove(\"hover\");\r\n                  arrow.style.opacity = \"0.5\";\r\n                  arrow.onmouseover = () => {\r\n                      arrow.style.cursor = \"default\";\r\n                      // arrowBg.style.cursor = \"default\";\r\n                      arrowBg.style.background = arrow.getAttribute(\"initialBg\");\r\n                  }*!/\r\n\r\n             }*/\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../../../../../Framework/Utils/pixi-button.ts\"/>\r\n///<reference path=\"play-game-menu.ts\"/>\r\n///<reference path=\"inventory-menu.ts\"/>\r\n\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n\r\n        export class PockeyUiMainScreen   {\r\n\r\n            private mainMenuElementsHolder: HTMLDivElement;\r\n\r\n            private playGameButton: HTMLDivElement;\r\n            private inventoryButton: HTMLDivElement;\r\n            private inviteFriendButton: HTMLDivElement;\r\n            private leaderboardButton: HTMLDivElement;\r\n            private mainMenuButtons: HTMLDivElement[];\r\n\r\n            private loginMenu: HTMLDivElement;\r\n            private leftSideLoginMenu: HTMLDivElement;\r\n            private leaderboardMenu: HTMLDivElement;\r\n            private inviteMenu: HTMLDivElement;\r\n            private tutorialAndShareButtonsMenu: HTMLDivElement;\r\n            private inventoryScreen: HTMLDivElement;\r\n\r\n            private playGameMenu: PlayGameMenu;\r\n            private inventoryMenu: PockeyInventoryMenu;\r\n\r\n            constructor() {\r\n                this.defineElements();\r\n            }\r\n\r\n            private defineElements(): void {\r\n                ////////////\r\n                this.loginMenu = document.getElementById(\"LoginScreen\") as HTMLDivElement;\r\n                this.playGameMenu = new PlayGameMenu();\r\n                this.hideElement(this.loginMenu);\r\n\r\n                this.inventoryMenu = new PockeyInventoryMenu();\r\n                // jQuery(this.loginMenu.id).hide();\r\n\r\n                this.leftSideLoginMenu = document.getElementById(\"LeftSide\") as HTMLDivElement;\r\n                this.leaderboardMenu = document.getElementById(\"LeaderBoardScreen\") as HTMLDivElement;\r\n                this.hideElement(this.leaderboardMenu);\r\n\r\n                this.inviteMenu = document.getElementById(\"InviteElementsHolder\") as HTMLDivElement;\r\n                this.hideElement(this.inviteMenu);\r\n\r\n                this.tutorialAndShareButtonsMenu = document.getElementById(\"TutorialAndShareButtonsHolder\") as HTMLDivElement;\r\n                // this.hideElement(this.tutorialAndShareButtonsMenu);\r\n\r\n                this.inventoryScreen = document.getElementById(\"InventoryScreen\") as HTMLDivElement;\r\n                // this.hideElement(this.inventoryScreen);\r\n\r\n                this.mainMenuElementsHolder = document.getElementById(\"MainMenuElementsHolder\") as HTMLDivElement;\r\n\r\n                /////////////////\r\n                this.mainMenuButtons = [];\r\n\r\n                this.playGameButton = document.getElementById(\"PlayGameButton\") as HTMLDivElement;\r\n                this.mainMenuButtons.push(this.playGameButton);\r\n\r\n                this.inventoryButton = document.getElementById(\"InventoryButton\") as HTMLDivElement;\r\n                this.mainMenuButtons.push(this.inventoryButton);\r\n\r\n                this.inviteFriendButton = document.getElementById(\"InviteFriendsButton\") as HTMLDivElement;\r\n                this.mainMenuButtons.push(this.inviteFriendButton);\r\n\r\n                this.leaderboardButton = document.getElementById(\"LeaderboardButton\") as HTMLDivElement;\r\n                this.mainMenuButtons.push(this.leaderboardButton);\r\n\r\n\r\n                _.forEach(this.mainMenuButtons, (element: HTMLDivElement) => {\r\n                        element.setAttribute('clicked', 'false');\r\n                        element.onclick = () => {\r\n                            element.setAttribute(\"clicked\", \"true\");\r\n                            this.setMainButtonStyleOnClick(element);\r\n\r\n                            switch (element.id) {\r\n                                case this.playGameButton.id: {\r\n                                    this.showPlayGameMenu();\r\n                                    break;\r\n                                }\r\n\r\n                                case this.inventoryButton.id: {\r\n                                    this.showInventoryMenu();\r\n                                    break;\r\n\r\n                                }\r\n\r\n                                case this.inviteFriendButton.id: {\r\n                                    this.showInviteMenu();\r\n                                    break;\r\n\r\n                                }\r\n\r\n                                case this.leaderboardButton.id: {\r\n                                    this.showLeaderboardMenu();\r\n                                    break;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                            _.forEach(this.mainMenuButtons, (otherElement: HTMLDivElement) => {\r\n                                if (otherElement != element) {\r\n                                    otherElement.setAttribute(\"clicked\", \"false\");\r\n                                    this.resetMainButtonStyleOnClick(otherElement);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n\r\n            private showElement(element: HTMLDivElement): void {\r\n                element.style.display = \"flex\";\r\n            }\r\n\r\n            private hideElement(element: HTMLDivElement): void {\r\n                element.style.display = \"none\";\r\n\r\n            }\r\n\r\n            private showPlayGameMenu(): void {\r\n                console.log(\"intra la show play\");\r\n                this.showElement(this.loginMenu);\r\n                this.showElement(this.tutorialAndShareButtonsMenu);\r\n                this.hideElement(this.inventoryScreen);\r\n                this.hideElement(this.leaderboardMenu);\r\n                this.hideElement(this.inviteMenu);\r\n                // this.showElement(this.tutorialAndShareButtonsMenu);\r\n            }\r\n\r\n            private showInventoryMenu(): void {\r\n                console.log(\"intra la show inventory\");\r\n\r\n                this.hideElement(this.loginMenu);\r\n                this.hideElement(this.leaderboardMenu);\r\n                this.showElement(this.inventoryScreen);\r\n            }\r\n\r\n            private showLeaderboardMenu(): void {\r\n                console.log(\"intra la show leaderboard\");\r\n\r\n                this.hideElement(this.loginMenu);\r\n                this.hideElement(this.inventoryScreen);\r\n                this.showElement(this.leaderboardMenu);\r\n            }\r\n\r\n            private showInviteMenu(): void {\r\n                console.log(\"intra la show invite\");\r\n\r\n                this.showElement(this.loginMenu);\r\n                this.showElement(this.inviteMenu);\r\n                this.hideElement(this.tutorialAndShareButtonsMenu);\r\n                this.hideElement(this.leaderboardMenu);\r\n                this.hideElement(this.inventoryScreen);\r\n            }\r\n\r\n            private setMainButtonStyleOnClick(element: HTMLDivElement) {\r\n                element.classList.add('simpleBtnOnClick');\r\n\r\n                let arrowDiv = element.querySelector('.simpleBtnArrow');\r\n                arrowDiv.classList.add('simpleBtnArrowOnClick');\r\n\r\n                let btnHighlight = element.querySelector('.simpleBtnHighlight');\r\n                btnHighlight.classList.add('simpleBtnHighlightOnClick');\r\n            }\r\n\r\n            private resetMainButtonStyleOnClick(element: HTMLDivElement) {\r\n                element.classList.remove('simpleBtnOnClick');\r\n\r\n                let arrowDiv = element.querySelector('.simpleBtnArrow');\r\n                arrowDiv.classList.remove('simpleBtnArrowOnClick');\r\n\r\n                let btnHighlight = element.querySelector('.simpleBtnHighlight');\r\n                btnHighlight.classList.remove('simpleBtnHighlightOnClick');\r\n            }\r\n\r\n            public setVisibleTrue(): void {\r\n                this.mainMenuElementsHolder.style.display = \"block\";\r\n            }\r\n\r\n            public setVisibleFalse(): void {\r\n                this.mainMenuElementsHolder.style.display = \"none\";\r\n            }\r\n\r\n        }\r\n    }\r\n}","namespace Pockey\r\n{\r\n    export module UserInterface\r\n    {\r\n        import Sprite = PIXI.Sprite;\r\n        import Graphics = PIXI.Graphics;\r\n\r\n\r\n        export class PockeyUiInGameAvatar extends Container\r\n        {\r\n            private backgroundGraphics:Graphics;\r\n            private rectangleSize:number = 92;\r\n            private borderSpacing: number = 3;\r\n            public avatarWidth:number;\r\n            constructor()\r\n            {\r\n                super();\r\n\r\n                let firstRect:Graphics = new Graphics();\r\n                // let firstRect: Graphics = new Graphics();\r\n                firstRect.beginFill(0x000000, 0.7);\r\n                firstRect.drawRoundedRect(0, 0, this.rectangleSize, this.rectangleSize, this.borderSpacing * 2);\r\n                this.addChild(firstRect);\r\n\r\n                let secondRect: Graphics = new Graphics();\r\n                secondRect.beginFill(0xffffff);\r\n                secondRect.drawRoundedRect(0, 0, this.rectangleSize - this.borderSpacing, this.rectangleSize - 2, 4);\r\n                secondRect.x = firstRect.x + firstRect.width / 2 - secondRect.width / 2;\r\n                this.addChild(secondRect);\r\n\r\n                let thirdRect: Graphics = new Graphics();\r\n                thirdRect.beginFill(0x000000);\r\n                thirdRect.drawRoundedRect(0, 0, secondRect.width - this.borderSpacing * 2, secondRect.height - this.borderSpacing * 2, 4);\r\n                thirdRect.x = secondRect.x + secondRect.width / 2 - thirdRect.width / 2;\r\n                thirdRect.y = secondRect.y + secondRect.height / 2 - thirdRect.height / 2;\r\n                this.addChild(thirdRect);\r\n                // this.backgroundGraphics\r\n                // this.addChild(this.backgroundGraphics);\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n}","namespace Pockey {\r\n\r\n    export module UserInterface {\r\n\r\n        import Sprite = PIXI.Sprite;\r\n        import Graphics = PIXI.Graphics;\r\n\r\n        export class PockeyLifeBar extends Container {\r\n            private playerLifeGraphicsWidth: number = 256;\r\n            private playerLifeGraphicsHeight: number = 28;\r\n            public lifeUnits: Graphics[];\r\n\r\n            constructor() {\r\n                super();\r\n\r\n                this.createLifeBar();\r\n            }\r\n\r\n            // public updateScoreGraphics(score: number): void {\r\n            //     _.forEach(_.range(0, this.lifeUnits.length), (lifeUnit: Graphics, id:number) => {\r\n            //        if(id > score)\r\n            //        {\r\n            //            lifeUnit.alpha = 0.4;\r\n            //        }\r\n            //     });\r\n            // }\r\n\r\n            private createLifeBar(): void {\r\n                // let sprite: Sprite = new Sprite();\r\n                let spacing: number = 3;\r\n\r\n                let firstRect: Graphics = new Graphics();\r\n                firstRect.beginFill(0x000000, 0.7);\r\n                firstRect.drawRoundedRect(0, 0, this.playerLifeGraphicsWidth, this.playerLifeGraphicsHeight, spacing * 2);\r\n                this.addChild(firstRect);\r\n\r\n                let secondRect: Graphics = new Graphics();\r\n                secondRect.beginFill(0xffffff);\r\n                secondRect.drawRoundedRect(0, 0, this.playerLifeGraphicsWidth - spacing, this.playerLifeGraphicsHeight - 2, 4);\r\n                secondRect.x = firstRect.x + firstRect.width / 2 - secondRect.width / 2;\r\n                this.addChild(secondRect);\r\n\r\n                let thirdRect: Graphics = new Graphics();\r\n                thirdRect.beginFill(0x000000);\r\n                thirdRect.drawRoundedRect(0, 0, secondRect.width - spacing * 2, secondRect.height - spacing * 2, 4);\r\n                thirdRect.x = secondRect.x + secondRect.width / 2 - thirdRect.width / 2;\r\n                thirdRect.y = secondRect.y + secondRect.height / 2 - thirdRect.height / 2;\r\n                this.addChild(thirdRect);\r\n\r\n\r\n                // let gr: Graphics = new Graphics();\r\n                // gr.beginFill(0x000000, 1);\r\n                // gr.drawRoundedRect(0, 0, this.playerLifeGraphicsWidth, this.playerLifeGraphicsHeight, 6);\r\n\r\n\r\n                // gr.lineStyle(spacing, 0xffffff);\r\n                // gr.drawRoundedRect(spacing, 0, this.playerLifeGraphicsWidth - spacing * 2, this.playerLifeGraphicsHeight - spacing, 2);\r\n                //\r\n                // sprite.addChild(gr);\r\n                //\r\n                //\r\n                let remainingWidth: number = thirdRect.width - 8 * (spacing + 1);\r\n                let unitWidth: number = remainingWidth / 7;\r\n                let unitHeight: number = thirdRect.height - 2 * (spacing + 1);\r\n                // //\r\n                let unitY: number = thirdRect.y + thirdRect.height / 2 - unitHeight / 2;\r\n                let unitStartX: number = thirdRect.x + spacing + 1;\r\n                // //\r\n                // //\r\n                // // let currx:number = unitStartX;\r\n\r\n                this.lifeUnits = [];\r\n                _.forEach(_.range(0, 7), (counter: number) => {\r\n                    let lifeUnit: Graphics = new Graphics();\r\n                    lifeUnit.beginFill(0xffffff);\r\n                    lifeUnit.drawRoundedRect(0, 0, unitWidth, unitHeight, 2);\r\n                    // lifeUnit.tint = PockeySettings.PLAYER_COLOR;\r\n\r\n                    lifeUnit.x = unitStartX + counter * (unitWidth + spacing + 1);\r\n                    // currx += unitWidth + 3;\r\n                    lifeUnit.y = unitY;\r\n\r\n                    this.addChild(lifeUnit);\r\n                    this.lifeUnits.push(lifeUnit);\r\n\r\n                });\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"../../GameModule/balls/abstract-ball.ts\"/>\n///<reference path=\"pockey-ui-in-game-avatar.ts\"/>\n///<reference path=\"../../../../Framework/Utils/text-field.ts\"/>\n///<reference path=\"pockey-life-bar.ts\"/>\nnamespace Pockey {\n    export module UserInterface {\n        import BallType = Pockey.GameModule.BallType;\n        import TextField = Framework.utils.TextField;\n        import Graphics = PIXI.Graphics;\n        import TextStyle = PIXI.TextStyle;\n\n        export class PockeyUserGameGraphics extends Container {\n            private userAvatar: PockeyUiInGameAvatar;\n            private userLifeBar: PockeyLifeBar;\n            private userNameTextField: TextField;\n            private timerText: TextField;\n            private timerTween: TweenMax;\n\n            public type: BallType;\n            private side: string;\n\n            constructor(side: string) {\n                super();\n                this.side = side;\n\n\n                let style = new PIXI.TextStyle({\n                    fontFamily: 'troika',\n                    fontSize: 22,\n                    fill: 0xffffff,\n\n                    // fontStyle: 'italic',\n                    // fontWeight: 'bold',\n                    // fill: ['#ffffff', '#00ff99'], // gradient\n                    stroke: '#ffffff',\n                    // strokeThickness: 5,\n                    dropShadow: true,\n                    dropShadowColor: '#000000',\n                    dropShadowBlur: 1,\n                    dropShadowAngle: Math.PI / 3,\n                    dropShadowDistance: 10,\n                    // wordWrap: true,\n                    // wordWrapWidth: 440\n                });\n                let timerTextStyle: TextStyle = style.clone();\n                timerTextStyle.fontSize = 28;\n\n                this.userAvatar = new PockeyUiInGameAvatar();\n                this.userLifeBar = new PockeyLifeBar();\n                this.timerText = new TextField(\"0:\" + PockeySettings.ROUND_DURATION_IN_SECONDS.toString(), timerTextStyle);\n                this.timerText.visible = false;\n\n                if (this.side == \"left\") {\n                    this.userNameTextField = new TextField(\"Player\", style);\n                    this.userLifeBar.x = this.userAvatar.width + 76;\n                    this.userNameTextField.x = this.userLifeBar.x;\n\n                    this.timerText.x = this.userLifeBar.x;\n                }\n                else {\n                    this.userNameTextField = new TextField(\"Opponent\", style);\n                    this.userAvatar.x = this.userLifeBar.width + 76;// this.userAvatar.width - 60;\n                    this.userNameTextField.x = this.userLifeBar.width - this.userNameTextField.width;\n                    this.timerText.x = this.userLifeBar.width - this.timerText.width;\n                }\n\n\n                this.userLifeBar.y = this.userAvatar.height - this.userLifeBar.height;\n                this.userNameTextField.y = this.userLifeBar.y - this.userNameTextField.height + 4;\n\n                this.timerText.y = this.userNameTextField.y - this.timerText.height + 4;\n\n\n                this.addChild(this.userAvatar);\n                this.addChild(this.userLifeBar);\n                this.addChild(this.userNameTextField);\n                this.addChild(this.timerText);\n\n            }\n\n            public resetTimer(): void {\n                this.timerText.visible = false;\n                this.timerText.style.fill = 0xffffff;\n                this.timerText.setText(\"0:\" + PockeySettings.ROUND_DURATION_IN_SECONDS.toString());\n            }\n\n            public updateTimer(timeText: string) {\n\n                if (timeText == \"\") {\n                    this.resetTimer();\n                }\n                else {\n                    this.timerText.visible = true;\n                    this.timerText.style.fill = 0xffffff;\n                    this.timerText.setText(timeText);\n                    if (this.side == \"right\")\n                        this.timerText.x = this.userLifeBar.width - this.timerText.width;\n\n                }\n            }\n\n            public updateUsername(text: string): void {\n                this.userNameTextField.setText(text);\n                if (this.side == \"right\") {\n                    // this.userNameTextField = new TextField(\"Opponent\", style);\n                    // this.userAvatar.x = this.userLifeBar.width + 76;// this.userAvatar.width - 60;\n                    this.userNameTextField.x = this.userLifeBar.width - this.userNameTextField.width;\n                }\n                // if (type == BallType.Op) {\n                //     this.userNameTextField = new TextField(\"Player\", style);\n                //     this.userLifeBar.x = this.userAvatar.width + 76;\n                //     this.userNameTextField.x = this.userLifeBar.x;\n                // }\n                // else {\n                //     this.userNameTextField = new TextField(\"Opponent\", style);\n                //     this.userAvatar.x = this.userLifeBar.width + 76;// this.userAvatar.width - 60;\n                //     this.userNameTextField.x = this.userLifeBar.width - this.userNameTextField.width;\n                //\n                // }\n            }\n\n            public reset(): void {\n                _.forEach(this.userLifeBar.lifeUnits, (lifeUnit: Graphics, id: number) => {\n                    lifeUnit.alpha = 1;\n                });\n            }\n\n            public updateScore(score: number) {\n                _.forEach(this.userLifeBar.lifeUnits, (lifeUnit: Graphics, id: number) => {\n                    if (this.side == \"left\") {\n                        if (id >= score) {\n                            lifeUnit.alpha = 0.5;\n                        }\n                    } else {\n                        if (id < 7 - score) {\n                            lifeUnit.alpha = 0.5;\n                        }\n                    }\n\n                });\n            }\n\n            public tint(color: number): void {\n                _.forEach(this.userLifeBar.lifeUnits, (lifeUnit: Graphics, id: number) => {\n                    lifeUnit.tint = color;\n\n                });\n                this.userNameTextField.tint = color;\n            }\n\n            public setTimerColor(tintColor: number): void {\n                if (this.timerText.style.fill = tintColor) {\n                    return;\n                }\n                else {\n                    this.timerText.style.fill = tintColor;\n                }\n            }\n\n            public animateTimer(): void {\n                this.setTimerColor(0xFF0000);\n                // this.timerText.style.dropShadowColor = 0xffffff;//0xCA4A5C);\n                // this.timerText.style.dropShadowDistance = 6;//0xCA4A5C);\n\n                /* if (this.timerTween && this.timerTween.isActive()) {\n                     this.timerTween.kill();\n                 }\n\n                 let scaleFactor:number = this.timerText.scale.x + this.timerText.scale.x / 12;\n                 this.timerTween = TweenMax.to(this.timerText.scale, 0.2, {x: scaleFactor, y: scaleFactor, yoyo:true, repeat:1});*/\n                // }\n                // let tweenM\n            }\n        }\n    }\n}","namespace Pockey {\r\n\r\n    export module UserInterface {\r\n\r\n        import Graphics = PIXI.Graphics;\r\n\r\n        export class PockeyUiMatchCircle extends Container {\r\n            private firstCircleGraphics: Graphics;\r\n            private secondCircleGraphics: Graphics;\r\n\r\n            constructor() {\r\n                super();\r\n\r\n                this.createMatchCircle();\r\n            }\r\n\r\n            private createMatchCircle(): void {\r\n                this.firstCircleGraphics = new Graphics();\r\n                this.firstCircleGraphics.lineStyle(5, 0xffffff);\r\n                this.firstCircleGraphics.tint = 0x639db5;\r\n                this.firstCircleGraphics.drawCircle(0, 0, 12);\r\n                this.addChild(this.firstCircleGraphics);\r\n\r\n                this.secondCircleGraphics = new Graphics();\r\n                this.secondCircleGraphics.beginFill(0xffffff);\r\n                this.secondCircleGraphics.tint = 0x426d7e;\r\n                this.secondCircleGraphics.drawCircle(0, 0, 6);\r\n                this.secondCircleGraphics.endFill();\r\n                this.addChild(this.secondCircleGraphics);\r\n            }\r\n\r\n            public activate(color: number): void {\r\n                this.firstCircleGraphics.tint = 0xffffff;\r\n                this.secondCircleGraphics.tint = color;\r\n            }\r\n\r\n            public reset(color: number): void {\r\n                this.secondCircleGraphics.tint = 0x426d7e;\r\n                this.firstCircleGraphics.tint = 0x639db5;\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"pockey-ui-match-circle.ts\"/>\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        import Sprite = PIXI.Sprite;\r\n        import Graphics = PIXI.Graphics;\r\n        import Settings = Framework.Settings;\r\n\r\n        export class PockeyUiVersusGraphics extends Container {\r\n            public leftSideMatchCircles: PockeyUiMatchCircle[];\r\n            private leftSideMatchCirclesContainer: Container;\r\n            public rightSideMatchCircles: PockeyUiMatchCircle[];\r\n            private rightSideMatchCirclesContainer: Container;\r\n            private versusGraphics: Sprite;\r\n\r\n            constructor() {\r\n                super();\r\n                this.versusGraphics = new Sprite(PIXI.Texture.fromFrame(\"vs.png\"));\r\n                this.addChild(this.versusGraphics);\r\n                if(Settings.isMobile)\r\n                {\r\n                    // this.versusGraphics.visible = false;\r\n                }\r\n\r\n                this.leftSideMatchCirclesContainer = new Container();\r\n                this.addChild(this.leftSideMatchCirclesContainer);\r\n                this.leftSideMatchCircles = [];\r\n                this.rightSideMatchCirclesContainer = new Container();\r\n                this.addChild(this.rightSideMatchCirclesContainer);\r\n                this.rightSideMatchCircles = [];\r\n\r\n                let circle1: PockeyUiMatchCircle = new PockeyUiMatchCircle();\r\n                let circle2: PockeyUiMatchCircle = new PockeyUiMatchCircle();\r\n                circle1.x = circle2.width + 10;\r\n                this.leftSideMatchCirclesContainer.addChild(circle1);\r\n                this.leftSideMatchCirclesContainer.addChild(circle2);\r\n                this.leftSideMatchCirclesContainer.y = this.versusGraphics.height / 2 + 6;\r\n                this.leftSideMatchCirclesContainer.x = circle1.width;\r\n                this.leftSideMatchCircles.push(circle1);\r\n                this.leftSideMatchCircles.push(circle2);\r\n\r\n                let circle3: PockeyUiMatchCircle = new PockeyUiMatchCircle();\r\n                let circle4: PockeyUiMatchCircle = new PockeyUiMatchCircle();\r\n                circle4.x = circle3.width + 10;\r\n                this.rightSideMatchCirclesContainer.addChild(circle3);\r\n                this.rightSideMatchCirclesContainer.addChild(circle4);\r\n                this.rightSideMatchCirclesContainer.y = this.leftSideMatchCirclesContainer.y;\r\n                this.rightSideMatchCirclesContainer.x = this.versusGraphics.width - this.rightSideMatchCirclesContainer.width + 2;\r\n                this.rightSideMatchCircles.push(circle3);\r\n                this.rightSideMatchCircles.push(circle4);\r\n            }\r\n        }\r\n    }\r\n}","/*original class: https://github.com/tleunen/pixi-multistyle-text*/\r\n/*created by https://github.com/tleunen*/\r\n\r\nnamespace Framework{\r\n    export module Utils\r\n    {\r\n        export interface ExtendedTextStyle extends PIXI.TextStyleOptions {\r\n            valign?: \"top\" | \"middle\" | \"bottom\" | \"baseline\" | number;\r\n            debug?: boolean;\r\n        }\r\n\r\n        export interface TextStyleSet {\r\n            [key: string]: ExtendedTextStyle;\r\n        }\r\n\r\n        export interface FontProperties {\r\n            ascent: number;\r\n            descent: number;\r\n            fontSize: number;\r\n        }\r\n\r\n        export interface TextData {\r\n            text: string;\r\n            style: ExtendedTextStyle;\r\n            width: number;\r\n            height: number;\r\n            fontProperties: FontProperties;\r\n            tag: TagData;\r\n        }\r\n\r\n        export interface TextDrawingData {\r\n            text: string;\r\n            style: ExtendedTextStyle;\r\n            x: number;\r\n            y: number;\r\n            width: number;\r\n            ascent: number;\r\n            descent: number;\r\n            tag: TagData;\r\n        }\r\n\r\n        export interface MstDebugOptions {\r\n            spans: {\r\n                enabled?: boolean;\r\n                baseline?: string;\r\n                top?: string;\r\n                bottom?: string;\r\n                bounding?: string;\r\n                text?: boolean;\r\n            };\r\n            objects: {\r\n                enabled?: boolean;\r\n                bounding?: string;\r\n                text?: boolean;\r\n            }\r\n        }\r\n\r\n        export interface TagData {\r\n            name: string;\r\n            properties: { [key: string]: string };\r\n        }\r\n\r\n        export interface MstInteractionEvent extends PIXI.interaction.InteractionEvent {\r\n            targetTag: TagData;\r\n        }\r\n\r\n        export const INTERACTION_EVENTS = [\r\n            \"pointerover\",\r\n            \"pointerenter\",\r\n            \"pointerdown\",\r\n            \"pointermove\",\r\n            \"pointerup\",\r\n            \"pointercancel\",\r\n            \"pointerout\",\r\n            \"pointerleave\",\r\n            \"gotpointercapture\",\r\n            \"lostpointercapture\",\r\n            \"mouseover\",\r\n            \"mouseenter\",\r\n            \"mousedown\",\r\n            \"mousemove\",\r\n            \"mouseup\",\r\n            \"mousecancel\",\r\n            \"mouseout\",\r\n            \"mouseleave\",\r\n            \"touchover\",\r\n            \"touchenter\",\r\n            \"touchdown\",\r\n            \"touchmove\",\r\n            \"touchup\",\r\n            \"touchcancel\",\r\n            \"touchout\",\r\n            \"touchleave\"\r\n        ];\r\n\r\n        export class MultiStyleText extends PIXI.Text {\r\n            private static DEFAULT_TAG_STYLE: ExtendedTextStyle = {\r\n                align: \"left\",\r\n                breakWords: false,\r\n                // debug intentionally not included\r\n                dropShadow: false,\r\n                dropShadowAngle: Math.PI / 6,\r\n                dropShadowBlur: 0,\r\n                dropShadowColor: \"#000000\",\r\n                dropShadowDistance: 5,\r\n                fill: \"black\",\r\n                fillGradientType: PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,\r\n                fontFamily: \"Arial\",\r\n                fontSize: 26,\r\n                fontStyle: \"normal\",\r\n                fontVariant: \"normal\",\r\n                fontWeight: \"normal\",\r\n                letterSpacing: 0,\r\n                lineHeight: 0,\r\n                lineJoin: \"miter\",\r\n                miterLimit: 10,\r\n                padding: 0,\r\n                stroke: \"black\",\r\n                strokeThickness: 0,\r\n                textBaseline: \"alphabetic\",\r\n                valign: \"baseline\",\r\n                wordWrap: false,\r\n                wordWrapWidth: 100\r\n            };\r\n\r\n            public static debugOptions: MstDebugOptions = {\r\n                spans: {\r\n                    enabled: false,\r\n                    baseline: \"#44BB44\",\r\n                    top: \"#BB4444\",\r\n                    bottom: \"#4444BB\",\r\n                    bounding: \"rgba(255, 255, 255, 0.1)\",\r\n                    text: true\r\n                },\r\n                objects: {\r\n                    enabled: false,\r\n                    bounding: \"rgba(255, 255, 255, 0.05)\",\r\n                    text: true\r\n                }\r\n            };\r\n\r\n            private textStyles: TextStyleSet;\r\n\r\n            private hitboxes: { tag: TagData, hitbox: PIXI.Rectangle }[];\r\n\r\n            constructor(text: string, styles: TextStyleSet) {\r\n                super(text);\r\n\r\n                this.styles = styles;\r\n\r\n                INTERACTION_EVENTS.forEach((event) => {\r\n                    this.on(event, (e: PIXI.interaction.InteractionEvent) => this.handleInteraction(e));\r\n                });\r\n            }\r\n\r\n            private handleInteraction(e: PIXI.interaction.InteractionEvent) {\r\n                let ev = e as MstInteractionEvent;\r\n\r\n                let localPoint = e.data.getLocalPosition(this);\r\n                let targetTag = this.hitboxes.reduce((prev, hitbox) => prev !== undefined ? prev : (hitbox.hitbox.contains(localPoint.x, localPoint.y) ? hitbox : undefined), undefined);\r\n                ev.targetTag = targetTag === undefined ? undefined : targetTag.tag;\r\n            }\r\n\r\n            public set styles(styles: TextStyleSet) {\r\n                this.textStyles = {};\r\n\r\n                this.textStyles[\"default\"] = this.assign({}, MultiStyleText.DEFAULT_TAG_STYLE);\r\n\r\n                for (let style in styles) {\r\n                    if (style === \"default\") {\r\n                        this.assign(this.textStyles[\"default\"], styles[style]);\r\n                    } else {\r\n                        this.textStyles[style] = this.assign({}, styles[style]);\r\n                    }\r\n                }\r\n\r\n                this._style = new PIXI.TextStyle(this.textStyles[\"default\"]);\r\n                this.dirty = true;\r\n            }\r\n\r\n            public setStyle(style: PIXI.TextStyle) {\r\n                this.scale.x = 1;\r\n                this.scale.y = 1;\r\n\r\n                if (style && !_.isUndefined(style.fontSize) && !_.isNull(style.fontSize)) {\r\n                    let fontSize: number = +style.fontSize;\r\n                    fontSize *= 2;\r\n                    style.fontSize = fontSize;\r\n                }\r\n\r\n                // if (style && !_.isUndefined(style.wordWrapWidth) && !_.isNull(style.wordWrapWidth)) {\r\n                //     let wordWrapWidth: number = +style.wordWrapWidth;\r\n                //     wordWrapWidth *= 2;\r\n                //     style.wordWrapWidth = wordWrapWidth;\r\n                // }\r\n\r\n                // this.style = style;\r\n                // super(text, style);\r\n\r\n                // this.scale.y /= 2;\r\n                // this.scale.x /= 2;\r\n\r\n                // this.initialScale = +this.style.fontSize;\r\n            }\r\n\r\n            public setTagStyle(tag: string, style: ExtendedTextStyle): void {\r\n                if (tag in this.textStyles) {\r\n                    this.assign(this.textStyles[tag], style);\r\n                } else {\r\n                    this.textStyles[tag] = this.assign({}, style);\r\n                }\r\n\r\n                this._style = new PIXI.TextStyle(this.textStyles[\"default\"]);\r\n                this.dirty = true;\r\n            }\r\n\r\n            public deleteTagStyle(tag: string): void {\r\n                if (tag === \"default\") {\r\n                    this.textStyles[\"default\"] = this.assign({}, MultiStyleText.DEFAULT_TAG_STYLE);\r\n                } else {\r\n                    delete this.textStyles[tag];\r\n                }\r\n\r\n                this._style = new PIXI.TextStyle(this.textStyles[\"default\"]);\r\n                this.dirty = true;\r\n            }\r\n\r\n            private getTagRegex(captureName: boolean, captureMatch: boolean): RegExp {\r\n                let tagAlternation = Object.keys(this.textStyles).join(\"|\");\r\n\r\n                if (captureName) {\r\n                    tagAlternation = `(${tagAlternation})`;\r\n                } else {\r\n                    tagAlternation = `(?:${tagAlternation})`;\r\n                }\r\n\r\n                let reStr = `<${tagAlternation}(?:\\\\s+[A-Za-z0-9_\\\\-]+=(?:\"(?:[^\"]+|\\\\\\\\\")*\"|'(?:[^']+|\\\\\\\\')*'))*\\\\s*>|</${tagAlternation}\\\\s*>`;\r\n\r\n                if (captureMatch) {\r\n                    reStr = `(${reStr})`;\r\n                }\r\n\r\n                return new RegExp(reStr, \"g\");\r\n            }\r\n\r\n            private getPropertyRegex(): RegExp {\r\n                return new RegExp(`([A-Za-z0-9_\\\\-]+)=(?:\"((?:[^\"]+|\\\\\\\\\")*)\"|'((?:[^']+|\\\\\\\\')*)')`, \"g\");\r\n            }\r\n\r\n            private _getTextDataPerLine(lines: string[]) {\r\n                let outputTextData: TextData[][] = [];\r\n                let re = this.getTagRegex(true, false);\r\n\r\n                let styleStack = [this.assign({}, this.textStyles[\"default\"])];\r\n                let tagStack: TagData[] = [{name: \"default\", properties: {}}];\r\n\r\n                // determine the group of word for each line\r\n                for (let i = 0; i < lines.length; i++) {\r\n                    let lineTextData: TextData[] = [];\r\n\r\n                    // find tags inside the string\r\n                    let matches: RegExpExecArray[] = [];\r\n                    let matchArray: RegExpExecArray;\r\n\r\n                    while (matchArray = re.exec(lines[i])) {\r\n                        matches.push(matchArray);\r\n                    }\r\n\r\n                    // if there is no match, we still need to add the line with the default style\r\n                    if (matches.length === 0) {\r\n                        lineTextData.push(this.createTextData(lines[i], styleStack[styleStack.length - 1], tagStack[tagStack.length - 1]));\r\n                    }\r\n                    else {\r\n                        // We got a match! add the text with the needed style\r\n                        let currentSearchIdx = 0;\r\n                        for (let j = 0; j < matches.length; j++) {\r\n                            // if index > 0, it means we have characters before the match,\r\n                            // so we need to add it with the default style\r\n                            if (matches[j].index > currentSearchIdx) {\r\n                                lineTextData.push(this.createTextData(\r\n                                    lines[i].substring(currentSearchIdx, matches[j].index),\r\n                                    styleStack[styleStack.length - 1],\r\n                                    tagStack[tagStack.length - 1]\r\n                                ));\r\n                            }\r\n\r\n                            if (matches[j][0][1] === \"/\") { // reset the style if end of tag\r\n                                if (styleStack.length > 1) {\r\n                                    styleStack.pop();\r\n                                    tagStack.pop();\r\n                                }\r\n                            } else { // set the current style\r\n                                styleStack.push(this.assign({}, styleStack[styleStack.length - 1], this.textStyles[matches[j][1]]));\r\n\r\n                                let properties: { [key: string]: string } = {};\r\n                                let propertyRegex = this.getPropertyRegex();\r\n                                let propertyMatch: RegExpMatchArray;\r\n\r\n                                //@ts-ignore\r\n                                while (propertyMatch = propertyRegex.exec(matches[j][0])) {\r\n                                    properties[propertyMatch[1]] = propertyMatch[2] || propertyMatch[3];\r\n                                }\r\n\r\n                                tagStack.push({name: matches[j][1], properties});\r\n                            }\r\n\r\n                            // update the current search index\r\n                            currentSearchIdx = matches[j].index + matches[j][0].length;\r\n                        }\r\n\r\n                        // is there any character left?\r\n                        if (currentSearchIdx < lines[i].length) {\r\n                            lineTextData.push(this.createTextData(\r\n                                lines[i].substring(currentSearchIdx),\r\n                                styleStack[styleStack.length - 1],\r\n                                tagStack[tagStack.length - 1]\r\n                            ));\r\n                        }\r\n                    }\r\n\r\n                    outputTextData.push(lineTextData);\r\n                }\r\n\r\n                return outputTextData;\r\n            }\r\n\r\n            private getFontString(style: ExtendedTextStyle): string {\r\n                return new PIXI.TextStyle(style).toFontString();\r\n            }\r\n\r\n            private createTextData(text: string, style: ExtendedTextStyle, tag: TagData): TextData {\r\n                return {\r\n                    text,\r\n                    style,\r\n                    width: 0,\r\n                    height: 0,\r\n                    fontProperties: undefined,\r\n                    tag\r\n                };\r\n            }\r\n\r\n            private getDropShadowPadding(): number {\r\n                let maxDistance = 0;\r\n                let maxBlur = 0;\r\n\r\n                Object.keys(this.textStyles).forEach((styleKey) => {\r\n                    let {dropShadowDistance, dropShadowBlur} = this.textStyles[styleKey];\r\n                    maxDistance = Math.max(maxDistance, dropShadowDistance || 0);\r\n                    maxBlur = Math.max(maxBlur, dropShadowBlur || 0);\r\n                });\r\n\r\n                return maxDistance + maxBlur;\r\n            }\r\n\r\n            public updateText(): void {\r\n                if (!this.dirty) {\r\n                    return;\r\n                }\r\n\r\n                this.hitboxes = [];\r\n\r\n                this.texture.baseTexture.resolution = this.resolution;\r\n                let textStyles = this.textStyles;\r\n                let outputText = this.text;\r\n\r\n                if (this._style.wordWrap) {\r\n                    outputText = this.wordWrap(this.text);\r\n                }\r\n\r\n                // split text into lines\r\n                let lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\r\n\r\n                // get the text data with specific styles\r\n                let outputTextData = this._getTextDataPerLine(lines);\r\n\r\n                // calculate text width and height\r\n                let lineWidths: number[] = [];\r\n                let lineYMins: number[] = [];\r\n                let lineYMaxs: number[] = [];\r\n                let baselines: number[] = [];\r\n                let maxLineWidth = 0;\r\n\r\n                for (let i = 0; i < lines.length; i++) {\r\n                    let lineWidth = 0;\r\n                    let lineYMin = 0;\r\n                    let lineYMax = 0;\r\n                    let baseline = 0;\r\n                    for (let j = 0; j < outputTextData[i].length; j++) {\r\n                        let sty = outputTextData[i][j].style;\r\n\r\n                        this.context.font = this.getFontString(sty);\r\n\r\n                        // save the width\r\n                        outputTextData[i][j].width = this.context.measureText(outputTextData[i][j].text).width;\r\n\r\n                        if (outputTextData[i][j].text.length === 0) {\r\n                            outputTextData[i][j].width += (outputTextData[i][j].text.length - 1) * sty.letterSpacing;\r\n\r\n                            if (j > 0) {\r\n                                lineWidth += sty.letterSpacing / 2; // spacing before first character\r\n                            }\r\n\r\n                            if (j < outputTextData[i].length - 1) {\r\n                                lineWidth += sty.letterSpacing / 2; // spacing after last character\r\n                            }\r\n                        }\r\n\r\n                        lineWidth += outputTextData[i][j].width;\r\n\r\n                        // save the font properties\r\n                        outputTextData[i][j].fontProperties = PIXI.TextMetrics.measureFont(this.context.font);\r\n\r\n                        // save the height\r\n                        outputTextData[i][j].height =\r\n                            outputTextData[i][j].fontProperties.fontSize + outputTextData[i][j].style.strokeThickness;\r\n\r\n                        if (typeof sty.valign === \"number\") {\r\n                            lineYMin = Math.min(lineYMin, sty.valign - outputTextData[i][j].fontProperties.descent);\r\n                            lineYMax = Math.max(lineYMax, sty.valign + outputTextData[i][j].fontProperties.ascent);\r\n                        } else {\r\n                            lineYMin = Math.min(lineYMin, -outputTextData[i][j].fontProperties.descent);\r\n                            lineYMax = Math.max(lineYMax, outputTextData[i][j].fontProperties.ascent);\r\n                        }\r\n                    }\r\n\r\n                    lineWidths[i] = lineWidth;\r\n                    lineYMins[i] = lineYMin;\r\n                    lineYMaxs[i] = lineYMax;\r\n                    maxLineWidth = Math.max(maxLineWidth, lineWidth);\r\n                }\r\n\r\n                // transform styles in array\r\n                let stylesArray = Object.keys(textStyles).map((key) => textStyles[key]);\r\n\r\n                let maxStrokeThickness = stylesArray.reduce((prev, cur) => Math.max(prev, cur.strokeThickness || 0), 0);\r\n\r\n                let dropShadowPadding = this.getDropShadowPadding();\r\n\r\n                let totalHeight = lineYMaxs.reduce((prev, cur) => prev + cur, 0) - lineYMins.reduce((prev, cur) => prev + cur, 0);\r\n\r\n                // define the right width and height\r\n                let width = maxLineWidth + maxStrokeThickness + 2 * dropShadowPadding;\r\n                let height = totalHeight + 2 * dropShadowPadding;\r\n\r\n                this.canvas.width = (width + this.context.lineWidth) * this.resolution;\r\n                this.canvas.height = height * this.resolution;\r\n\r\n                this.context.scale(this.resolution, this.resolution);\r\n\r\n                this.context.textBaseline = \"alphabetic\";\r\n                this.context.lineJoin = \"round\";\r\n\r\n                let basePositionY = dropShadowPadding;\r\n\r\n                let drawingData: TextDrawingData[] = [];\r\n\r\n                // Compute the drawing data\r\n                for (let i = 0; i < outputTextData.length; i++) {\r\n                    let line = outputTextData[i];\r\n                    let linePositionX: number;\r\n\r\n                    switch (this._style.align) {\r\n                        case \"left\":\r\n                            linePositionX = dropShadowPadding;\r\n                            break;\r\n\r\n                        case \"center\":\r\n                            linePositionX = dropShadowPadding + (maxLineWidth - lineWidths[i]) / 2;\r\n                            break;\r\n\r\n                        case \"right\":\r\n                            linePositionX = dropShadowPadding + maxLineWidth - lineWidths[i];\r\n                            break;\r\n                    }\r\n\r\n                    for (let j = 0; j < line.length; j++) {\r\n                        let {style, text, fontProperties, width, height, tag} = line[j];\r\n\r\n                        linePositionX += maxStrokeThickness / 2;\r\n\r\n                        let linePositionY = maxStrokeThickness / 2 + basePositionY + fontProperties.ascent;\r\n\r\n                        switch (style.valign) {\r\n                            case \"top\":\r\n                                // no need to do anything\r\n                                break;\r\n\r\n                            case \"baseline\":\r\n                                linePositionY += lineYMaxs[i] - fontProperties.ascent;\r\n                                break;\r\n\r\n                            case \"middle\":\r\n                                linePositionY += (lineYMaxs[i] - lineYMins[i] - fontProperties.ascent - fontProperties.descent) / 2;\r\n                                break;\r\n\r\n                            case \"bottom\":\r\n                                linePositionY += lineYMaxs[i] - lineYMins[i] - fontProperties.ascent - fontProperties.descent;\r\n                                break;\r\n\r\n                            default:\r\n                                // A number - offset from baseline, positive is higher\r\n                                linePositionY += lineYMaxs[i] - fontProperties.ascent - style.valign;\r\n                                break;\r\n                        }\r\n\r\n                        if (style.letterSpacing === 0) {\r\n                            drawingData.push({\r\n                                text,\r\n                                style,\r\n                                x: linePositionX,\r\n                                y: linePositionY,\r\n                                width,\r\n                                ascent: fontProperties.ascent,\r\n                                descent: fontProperties.descent,\r\n                                tag\r\n                            });\r\n\r\n                            linePositionX += line[j].width;\r\n                        } else {\r\n                            this.context.font = this.getFontString(line[j].style);\r\n\r\n                            for (let k = 0; k < text.length; k++) {\r\n                                if (k > 0 || j > 0) {\r\n                                    linePositionX += style.letterSpacing / 2;\r\n                                }\r\n\r\n                                drawingData.push({\r\n                                    text: text.charAt(k),\r\n                                    style,\r\n                                    x: linePositionX,\r\n                                    y: linePositionY,\r\n                                    width,\r\n                                    ascent: fontProperties.ascent,\r\n                                    descent: fontProperties.descent,\r\n                                    tag\r\n                                });\r\n\r\n                                linePositionX += this.context.measureText(text.charAt(k)).width;\r\n\r\n                                if (k < text.length - 1 || j < line.length - 1) {\r\n                                    linePositionX += style.letterSpacing / 2;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        linePositionX -= maxStrokeThickness / 2;\r\n                    }\r\n\r\n                    basePositionY += lineYMaxs[i] - lineYMins[i];\r\n                }\r\n\r\n                this.context.save();\r\n\r\n                // First pass: draw the shadows only\r\n                drawingData.forEach(({style, text, x, y}) => {\r\n                    if (!style.dropShadow) {\r\n                        return; // This text doesn't have a shadow\r\n                    }\r\n\r\n                    this.context.font = this.getFontString(style);\r\n\r\n                    let dropFillStyle = style.dropShadowColor;\r\n                    if (typeof dropFillStyle === \"number\") {\r\n                        dropFillStyle = PIXI.utils.hex2string(dropFillStyle);\r\n                    }\r\n                    this.context.shadowColor = dropFillStyle;\r\n                    this.context.shadowBlur = style.dropShadowBlur;\r\n                    this.context.shadowOffsetX = Math.cos(style.dropShadowAngle) * style.dropShadowDistance * this.resolution;\r\n                    this.context.shadowOffsetY = Math.sin(style.dropShadowAngle) * style.dropShadowDistance * this.resolution;\r\n\r\n                    this.context.fillText(text, x, y);\r\n                });\r\n\r\n                this.context.restore();\r\n\r\n                // Second pass: draw strokes and fills\r\n                drawingData.forEach(({style, text, x, y, width, ascent, descent, tag}) => {\r\n                    this.context.font = this.getFontString(style);\r\n\r\n                    let strokeStyle = style.stroke;\r\n                    if (typeof strokeStyle === \"number\") {\r\n                        strokeStyle = PIXI.utils.hex2string(strokeStyle);\r\n                    }\r\n\r\n                    this.context.strokeStyle = strokeStyle;\r\n                    this.context.lineWidth = style.strokeThickness;\r\n\r\n                    // set canvas text styles\r\n                    let fillStyle = style.fill;\r\n                    if (typeof fillStyle === \"number\") {\r\n                        fillStyle = PIXI.utils.hex2string(fillStyle);\r\n                    } else if (Array.isArray(fillStyle)) {\r\n                        for (let i = 0; i < fillStyle.length; i++) {\r\n                            let fill = fillStyle[i];\r\n                            if (typeof fill === \"number\") {\r\n                                fillStyle[i] = PIXI.utils.hex2string(fill);\r\n                            }\r\n                        }\r\n                    }\r\n                    this.context.fillStyle = this._generateFillStyle(new PIXI.TextStyle(style), [text]) as string | CanvasGradient;\r\n                    // Typecast required for proper typechecking\r\n\r\n                    if (style.stroke && style.strokeThickness) {\r\n                        this.context.strokeText(text, x, y);\r\n                    }\r\n\r\n                    if (style.fill) {\r\n                        this.context.fillText(text, x, y);\r\n                    }\r\n\r\n                    let offset = -this._style.padding - this.getDropShadowPadding();\r\n\r\n                    this.hitboxes.push({\r\n                        tag,\r\n                        hitbox: new PIXI.Rectangle(x + offset, y - ascent + offset, width, ascent + descent)\r\n                    });\r\n\r\n                    let debugSpan = style.debug === undefined\r\n                        ? MultiStyleText.debugOptions.spans.enabled\r\n                        : style.debug;\r\n\r\n                    if (debugSpan) {\r\n                        this.context.lineWidth = 1;\r\n\r\n                        if (MultiStyleText.debugOptions.spans.bounding) {\r\n                            this.context.fillStyle = MultiStyleText.debugOptions.spans.bounding;\r\n                            this.context.strokeStyle = MultiStyleText.debugOptions.spans.bounding;\r\n                            this.context.beginPath();\r\n                            this.context.rect(x, y - ascent, width, ascent + descent);\r\n                            this.context.fill();\r\n                            this.context.stroke();\r\n                            this.context.stroke(); // yes, twice\r\n                        }\r\n\r\n                        if (MultiStyleText.debugOptions.spans.baseline) {\r\n                            this.context.strokeStyle = MultiStyleText.debugOptions.spans.baseline;\r\n                            this.context.beginPath();\r\n                            this.context.moveTo(x, y);\r\n                            this.context.lineTo(x + width, y);\r\n                            this.context.closePath();\r\n                            this.context.stroke();\r\n                        }\r\n\r\n                        if (MultiStyleText.debugOptions.spans.top) {\r\n                            this.context.strokeStyle = MultiStyleText.debugOptions.spans.top;\r\n                            this.context.beginPath();\r\n                            this.context.moveTo(x, y - ascent);\r\n                            this.context.lineTo(x + width, y - ascent);\r\n                            this.context.closePath();\r\n                            this.context.stroke();\r\n                        }\r\n\r\n                        if (MultiStyleText.debugOptions.spans.bottom) {\r\n                            this.context.strokeStyle = MultiStyleText.debugOptions.spans.bottom;\r\n                            this.context.beginPath();\r\n                            this.context.moveTo(x, y + descent);\r\n                            this.context.lineTo(x + width, y + descent);\r\n                            this.context.closePath();\r\n                            this.context.stroke();\r\n                        }\r\n\r\n                        if (MultiStyleText.debugOptions.spans.text) {\r\n                            this.context.fillStyle = \"#ffffff\";\r\n                            this.context.strokeStyle = \"#000000\";\r\n                            this.context.lineWidth = 2;\r\n                            this.context.font = \"8px monospace\";\r\n                            this.context.strokeText(tag.name, x, y - ascent + 8);\r\n                            this.context.fillText(tag.name, x, y - ascent + 8);\r\n                            this.context.strokeText(`${width.toFixed(2)}x${(ascent + descent).toFixed(2)}`, x, y - ascent + 16);\r\n                            this.context.fillText(`${width.toFixed(2)}x${(ascent + descent).toFixed(2)}`, x, y - ascent + 16);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (MultiStyleText.debugOptions.objects.enabled) {\r\n                    if (MultiStyleText.debugOptions.objects.bounding) {\r\n                        this.context.fillStyle = MultiStyleText.debugOptions.objects.bounding;\r\n                        this.context.beginPath();\r\n                        this.context.rect(0, 0, width, height);\r\n                        this.context.fill();\r\n                    }\r\n\r\n                    if (MultiStyleText.debugOptions.objects.text) {\r\n                        this.context.fillStyle = \"#ffffff\";\r\n                        this.context.strokeStyle = \"#000000\";\r\n                        this.context.lineWidth = 2;\r\n                        this.context.font = \"8px monospace\";\r\n                        this.context.strokeText(`${width.toFixed(2)}x${height.toFixed(2)}`, 0, 8, width);\r\n                        this.context.fillText(`${width.toFixed(2)}x${height.toFixed(2)}`, 0, 8, width);\r\n                    }\r\n                }\r\n\r\n                this.updateTexture();\r\n            }\r\n\r\n            protected wordWrap(text: string): string {\r\n                // Greedy wrapping algorithm that will wrap words as the line grows longer than its horizontal bounds.\r\n                let result = \"\";\r\n                let re = this.getTagRegex(true, true);\r\n\r\n                const lines = text.split(\"\\n\");\r\n                const wordWrapWidth = this._style.wordWrapWidth;\r\n                let styleStack = [this.assign({}, this.textStyles[\"default\"])];\r\n                this.context.font = this.getFontString(this.textStyles[\"default\"]);\r\n\r\n                for (let i = 0; i < lines.length; i++) {\r\n                    let spaceLeft = wordWrapWidth;\r\n                    const tagSplit = lines[i].split(re);\r\n                    let firstWordOfLine = true;\r\n\r\n                    for (let j = 0; j < tagSplit.length; j++) {\r\n                        if (re.test(tagSplit[j])) {\r\n                            result += tagSplit[j];\r\n                            if (tagSplit[j][1] === \"/\") {\r\n                                j += 2;\r\n                                styleStack.pop();\r\n                            } else {\r\n                                j++;\r\n                                styleStack.push(this.assign({}, styleStack[styleStack.length - 1], this.textStyles[tagSplit[j]]));\r\n                                j++;\r\n                            }\r\n                            this.context.font = this.getFontString(styleStack[styleStack.length - 1]);\r\n                        } else {\r\n                            const words = tagSplit[j].split(\" \");\r\n\r\n                            for (let k = 0; k < words.length; k++) {\r\n                                const wordWidth = this.context.measureText(words[k]).width;\r\n\r\n                                if (this._style.breakWords && wordWidth > spaceLeft) {\r\n                                    // Part should be split in the middle\r\n                                    const characters = words[k].split('');\r\n\r\n                                    if (k > 0) {\r\n                                        result += \" \";\r\n                                        spaceLeft -= this.context.measureText(\" \").width;\r\n                                    }\r\n\r\n                                    for (let c = 0; c < characters.length; c++) {\r\n                                        const characterWidth = this.context.measureText(characters[c]).width;\r\n\r\n                                        if (characterWidth > spaceLeft) {\r\n                                            result += `\\n${characters[c]}`;\r\n                                            spaceLeft = wordWrapWidth - characterWidth;\r\n                                        } else {\r\n                                            result += characters[c];\r\n                                            spaceLeft -= characterWidth;\r\n                                        }\r\n                                    }\r\n                                } else if (this._style.breakWords) {\r\n                                    result += words[k];\r\n                                    spaceLeft -= wordWidth;\r\n                                } else {\r\n                                    const paddedWordWidth =\r\n                                        wordWidth + (k > 0 ? this.context.measureText(\" \").width : 0);\r\n\r\n                                    if (paddedWordWidth > spaceLeft) {\r\n                                        // Skip printing the newline if it's the first word of the line that is\r\n                                        // greater than the word wrap width.\r\n                                        if (!firstWordOfLine) {\r\n                                            result += \"\\n\";\r\n                                        }\r\n\r\n                                        result += words[k];\r\n                                        spaceLeft = wordWrapWidth - wordWidth;\r\n                                    } else {\r\n                                        spaceLeft -= paddedWordWidth;\r\n\r\n                                        if (k > 0) {\r\n                                            result += \" \";\r\n                                        }\r\n\r\n                                        result += words[k];\r\n                                    }\r\n                                }\r\n                                firstWordOfLine = false;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (i < lines.length - 1) {\r\n                        result += '\\n';\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            protected updateTexture() {\r\n                const texture = this._texture;\r\n\r\n                let dropShadowPadding = this.getDropShadowPadding();\r\n\r\n                texture.baseTexture.hasLoaded = true;\r\n                texture.baseTexture.resolution = this.resolution;\r\n\r\n                texture.baseTexture.realWidth = this.canvas.width;\r\n                texture.baseTexture.realHeight = this.canvas.height;\r\n                texture.baseTexture.width = this.canvas.width / this.resolution;\r\n                texture.baseTexture.height = this.canvas.height / this.resolution;\r\n                texture.trim.width = texture.frame.width = this.canvas.width / this.resolution;\r\n                texture.trim.height = texture.frame.height = this.canvas.height / this.resolution;\r\n\r\n                texture.trim.x = -this._style.padding - dropShadowPadding;\r\n                texture.trim.y = -this._style.padding - dropShadowPadding;\r\n\r\n                texture.orig.width = texture.frame.width - (this._style.padding + dropShadowPadding) * 2;\r\n                texture.orig.height = texture.frame.height - (this._style.padding + dropShadowPadding) * 2;\r\n\r\n                // call sprite onTextureUpdate to update scale if _width or _height were set\r\n                this._onTextureUpdate();\r\n\r\n                texture.baseTexture.emit('update', texture.baseTexture);\r\n\r\n                this.dirty = false;\r\n            }\r\n\r\n            // Lazy fill for Object.assign\r\n            private assign(destination: any, ...sources: any[]): any {\r\n                for (let source of sources) {\r\n                    for (let key in source) {\r\n                        destination[key] = source[key];\r\n                    }\r\n                }\r\n\r\n                return destination;\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","///<reference path=\"../DesignElements/pockey-user-game-graphics.ts\"/>\r\n///<reference path=\"../DesignElements/pockey-ui-versus-graphics.ts\"/>\r\n///<reference path=\"../../StateMachine/pockey-state-texts.ts\"/>\r\n///<reference path=\"../../../../Framework/Utils/pixi-multistyle-text.ts\"/>\r\n///<reference path=\"../../../../Framework/Settings.ts\"/>\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n\r\n        import BallType = Pockey.GameModule.BallType;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n        import TextField = Framework.utils.TextField;\r\n        import MultiStyleText = Framework.Utils.MultiStyleText;\r\n        import TextStyle = PIXI.TextStyle;\r\n        import Settings = Framework.Settings;\r\n\r\n        export class PockeyUiGameScreen extends Container {\r\n\r\n            private leftGameGraphics: PockeyUserGameGraphics;\r\n            private rightGameGraphics: PockeyUserGameGraphics;\r\n            private playerGameGraphics: PockeyUserGameGraphics;\r\n            private opponentGameGraphics: PockeyUserGameGraphics;\r\n\r\n            private versus: PockeyUiVersusGraphics;\r\n\r\n            private multilineText: MultiStyleText;\r\n            private tipText: TextField;\r\n            private tipTextContainer: Container;\r\n\r\n            private graphicsContainer: Container;\r\n            private tipTextWidth: number = 934;\r\n\r\n            private poolTableScaleFactor: number = 1;\r\n\r\n            private defaultTextStyle: TextStyle;\r\n            private warningTextStyle: TextStyle;\r\n            private opponentTextStyle: TextStyle;\r\n            private textFontSize: number;\r\n\r\n            constructor() {\r\n                super();\r\n\r\n                this.subscribeToSignals();\r\n                this.defineTextStyles();\r\n                this.addElements();\r\n\r\n                // this.playerGameGraphics = new PockeyUserGameGraphics(\"left\");\r\n                // this.opponentGameGraphics = new PockeyUserGameGraphics(\"right\");\r\n            }\r\n\r\n            private subscribeToSignals(): void {\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED, this.onPoolTableResize.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SET_SIDES_TYPE, this.onSetSides.bind(this));\r\n\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_PLAYER_NAME, this.onUpdatePlayerName.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_PLAYER_SCORE, this.onUpdatePlayerScore.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.CHANGE_PLAYER_COLOR, this.onChangePlayerColor.bind(this));\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_OPPONENT_NAME, this.onUpdateOpponentName.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_OPPONENT_SCORE, this.onUpdateOpponentScore.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.CHANGE_OPPONENT_COLOR, this.onChangeOpponentColor.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.RESET_GAME_SCREEN, this.onReset.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_CURRENT_PLAYER_TIMER, this.onUpdateCurrentPlayerTimer.bind(this));\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_MATCH_CIRCLES, this.onUpdateMatchCircles.bind(this));\r\n\r\n\r\n                // SignalsManager.DispatchSignal(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED, [backgroundScaleFactor, newPos, this.levelManager.poolTable.rotation]);\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_OPPONENT_NAME, this.onUpdateOpponentName.bind(this));\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.CHANGE_OPPONENT_COLOR, this.onChangeOpponentColor.bind(this));\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_OPPONENT_SCORE, this.onUpdateOpponentScore.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED, this.onResizeBackground.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_UI_TEXT, this.onUpdateUIText.bind(this));\r\n            }\r\n\r\n            private onUpdateMatchCircles(params: any[]) {\r\n                let leftSideColor: number;\r\n                let rightSideColor: number;\r\n\r\n                if (this.leftGameGraphics.type == BallType.Player) {\r\n                    leftSideColor = PockeySettings.PLAYER_COLOR;\r\n                    rightSideColor = PockeySettings.OPPONENT_COLOR;\r\n                }\r\n                else {\r\n                    leftSideColor = PockeySettings.OPPONENT_COLOR;\r\n                    rightSideColor = PockeySettings.PLAYER_COLOR;\r\n                }\r\n\r\n                let leftSideMatchesWon: number = params[0];\r\n                let rightSideMatchesWon: number = params[1];\r\n\r\n                _.forEach(_.range(leftSideMatchesWon), (i: number) => {\r\n                    this.versus.leftSideMatchCircles[i].activate(leftSideColor);\r\n                });\r\n\r\n                _.forEach(_.range(rightSideMatchesWon), (i: number) => {\r\n                    this.versus.rightSideMatchCircles[i].activate(rightSideColor);\r\n                });\r\n            }\r\n\r\n            private onUpdateUIText(params: any[]) {\r\n                let text: string = params[0];\r\n                if (text.includes(\"{opponent\"))\r\n                    text = text.replace(\"{opponent}\", PockeySettings.OPPONENT_SOCKET_ID);\r\n                // if (text != this.tipText.text) {\r\n                if (text != this.multilineText.text) {\r\n                    this.multilineText.text = text;\r\n                    if (!Settings.isMobile)\r\n                        this.multilineText.x = -this.multilineText.width;\r\n                    else {\r\n                        this.multilineText.x = -this.multilineText.width / 2;\r\n                    }\r\n                    /*this.tipText.setText(text);\r\n                    this.tipText.x = -this.tipText.width;*/\r\n                }\r\n            }\r\n\r\n            private onUpdateCurrentPlayerTimer(params: any[]) {\r\n                let time: string = params[0];\r\n                let playerType: BallType = params[1];\r\n                let animateText: boolean = params[2];\r\n\r\n                if (this.leftGameGraphics.type == playerType) {\r\n                    this.leftGameGraphics.updateTimer(time);\r\n                    // this.leftGameGraphics.setTimerColor(tintColor);\r\n                    if (animateText)\r\n                        this.leftGameGraphics.animateTimer();// = this.leftGameGraphics;\r\n                    // this.opponentGameGraphics = this.rightGameGraphics;\r\n                }\r\n                else {\r\n                    this.rightGameGraphics.updateTimer(time);\r\n                    if (animateText)\r\n                        this.rightGameGraphics.animateTimer();\r\n                    // this.playerGameGraphics = this.rightGameGraphics;\r\n                    // this.opponentGameGraphics = this.leftGameGraphics;\r\n                }\r\n\r\n            }\r\n\r\n            private onResizeBackground(params: any[]): void {\r\n\r\n                // if (this.backgrounds[PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME]) {\r\n                this.poolTableScaleFactor = params[0];\r\n                // let position: Point = params[1] as Point;\r\n                // let rotation: number = params[2];\r\n            }\r\n\r\n            private onReset(param: any[]): void {\r\n                this.leftGameGraphics.reset();\r\n                this.rightGameGraphics.reset();\r\n            }\r\n\r\n            private onSetSides(params: any) {\r\n                // let leftSide:BallType = params[0] as BallType;\r\n                this.leftGameGraphics.type = params[0] as BallType;\r\n                this.rightGameGraphics.type = params[1] as BallType;\r\n                if (this.leftGameGraphics.type == BallType.Player) {\r\n                    this.playerGameGraphics = this.leftGameGraphics;\r\n                    this.opponentGameGraphics = this.rightGameGraphics;\r\n                }\r\n                else {\r\n                    this.playerGameGraphics = this.rightGameGraphics;\r\n                    this.opponentGameGraphics = this.leftGameGraphics;\r\n                }\r\n            }\r\n\r\n            private onUpdatePlayerScore(score: number) {\r\n                if (this.playerGameGraphics)\r\n                    this.playerGameGraphics.updateScore(score);\r\n            }\r\n\r\n            public onUpdatePlayerName(name: string): void {\r\n                if (this.playerGameGraphics)\r\n                    this.playerGameGraphics.updateUsername(name);\r\n            }\r\n\r\n            public onChangePlayerColor(color: number): void {\r\n                if (this.playerGameGraphics)\r\n                    this.playerGameGraphics.tint(color);\r\n            }\r\n\r\n            private onUpdateOpponentScore(score: number) {\r\n                if (this.opponentGameGraphics)\r\n                    this.opponentGameGraphics.updateScore(score);\r\n            }\r\n\r\n            public onUpdateOpponentName(name: string): void {\r\n                if (this.opponentGameGraphics)\r\n                    this.opponentGameGraphics.updateUsername(name);\r\n            }\r\n\r\n            public onChangeOpponentColor(color: number): void {\r\n                if (this.opponentGameGraphics) {\r\n                    this.opponentGameGraphics.tint(color);\r\n\r\n                    // this.opponentTextStyle.fill = color;\r\n                }\r\n                this.opponentTextStyle = new TextStyle({\r\n                    fontFamily: 'troika',\r\n                    fontSize: this.textFontSize,\r\n                    fill: color,\r\n                    dropShadow: true,\r\n                    dropShadowColor: '#000000',\r\n                    dropShadowBlur: 1,\r\n                    dropShadowAngle: Math.PI / 3,\r\n                    dropShadowDistance: 8\r\n                });\r\n                this.multilineText.styles =\r\n                    {\r\n                        \"default\": this.defaultTextStyle,\r\n                        \"warning\": this.warningTextStyle,\r\n                        \"opponent\": this.opponentTextStyle\r\n                    };\r\n            }\r\n\r\n\r\n            // public onChangeColors(COLORS: number[]): void {\r\n            //     this.leftGameGraphics.tint(COLORS[0]);\r\n            //     this.rightGameGraphics.tint(COLORS[1]);\r\n            //     // if(this.leftGameGraphics.type == BallType.Opponent)\r\n            //     // {\r\n            //     //     this.leftGameGraphics.tint(color);\r\n            //     // }\r\n            //     // else\r\n            //     // {\r\n            //     //     this.rightGameGraphics.tint(color);\r\n            //     // }\r\n            // }\r\n\r\n            // public onUpdateScore(score:number[]): void {\r\n            //     this.leftGameGraphics.updateScore(score[0]);\r\n            //     this.rightGameGraphics.updateScore(score[1]);\r\n            // }\r\n            //\r\n            // public onUpdateOpponentScore(score: number): void {\r\n            //     this.rightGameGraphics.updateScore(score);\r\n            // }\r\n            //\r\n            //\r\n            //\r\n            // public onUpdateOpponentName(name: string): void {\r\n            // }\r\n\r\n            public handleDesktopLandscape(): void {\r\n                this.graphicsContainer.height = 0.11 * Settings.stageHeight;\r\n                this.graphicsContainer.scale.x = this.graphicsContainer.scale.y;\r\n\r\n                this.graphicsContainer.x = Settings.stageWidth / 2;\r\n                this.graphicsContainer.y = 0.05 * Settings.stageHeight;\r\n\r\n                this.tipTextContainer.scale.x = this.tipTextContainer.scale.y = this.poolTableScaleFactor;\r\n                this.tipTextContainer.y = Settings.stageHeight - Settings.stageHeight * 0.1;\r\n                this.tipTextContainer.x = Settings.stageWidth / 2 + (this.tipTextWidth / 2) * this.poolTableScaleFactor;\r\n\r\n                this.multilineText.x = -this.multilineText.width;\r\n            }\r\n\r\n            public onResizeMobileLandscape(): void {\r\n                this.rotation = 0;\r\n\r\n                this.tipTextContainer.height = 0.046 * Settings.stageHeight;\r\n                this.tipTextContainer.scale.x = this.tipTextContainer.scale.y;\r\n                this.tipTextContainer.y = Settings.stageHeight - Settings.stageHeight * 0.0452;\r\n                this.tipTextContainer.x = Settings.stageWidth / 2;// + (this.tipTextWidth / 2) * this.poolTableScaleFactor;\r\n\r\n                this.multilineText.x = -this.multilineText.width / 2;\r\n\r\n                this.graphicsContainer.height = 0.13 * Settings.stageHeight;\r\n                this.graphicsContainer.scale.x = this.graphicsContainer.scale.y;\r\n                this.graphicsContainer.x = Settings.stageWidth / 2;\r\n                this.graphicsContainer.y = Settings.stageHeight * 0.008;\r\n                // this.graphicsContainer.x = Settings.stageWidth / 2 - this.graphicsContainer.width / 2;\r\n            }\r\n\r\n            public onResizeMobilePortrait(): void {\r\n                this.rotation = 90 * Math.PI / 180;\r\n                this.tipTextContainer.height = 0.0448 * Settings.stageWidth;\r\n                this.tipTextContainer.scale.x = this.tipTextContainer.scale.y;\r\n\r\n                this.tipTextContainer.x = Settings.stageHeight / 2;\r\n                this.tipTextContainer.y = -Settings.stageWidth * 0.046;\r\n\r\n                this.multilineText.x = -this.multilineText.width / 2;\r\n\r\n                /*this.tipText.height = 0.046 * Settings.stageWidth;\r\n                this.tipText.scale.x = this.tipText.scale.y;\r\n\r\n                this.tipText.y = /!*-Settings.stageWidth * 0.05;*!/\r\n                    -this.tipText.height + 0.002 * Settings.stageWidth;\r\n                this.tipText.x = Settings.stageHeight / 2 - this.tipText.width / 2 + Settings.stageHeight * 0.0024;\r\n*/\r\n                this.graphicsContainer.height = 0.13 * Settings.stageWidth;\r\n                this.graphicsContainer.scale.x = this.graphicsContainer.scale.y;\r\n                this.graphicsContainer.x = Settings.stageHeight / 2;\r\n                this.graphicsContainer.y = -Settings.stageWidth + 0.008 * Settings.stageWidth;\r\n                // console.log(\"la resize mobile: \" + Settings.stageWidth, Settings.stageHeight);\r\n                // this.tipText.rotation = 90 * Math.PI / 180;\r\n                // this.tipText.height = 0.05 * this.stageHeight;\r\n                // this.tipText.scale.x = this.tipText.scale.y;\r\n\r\n                // this.tipText.x = this.stageWidth / 2;\r\n                // this.tipText.y = this.stageHeight / 2;// + this.tipText.height / 2;//\r\n\r\n                // this.tipText.x = this.stageWidth / 2 + this.stageWidth * 0.3 - this.tipText.width;\r\n                // this.tipText.x = 450;//this.stageHeight /*- this.stageHeight * 0.1*/ - this.tipText.height;\r\n                // this.tipText.y = 450;//this.stageHeight /*- this.stageHeight * 0.1*/ - this.tipText.height;\r\n                // this.tipText.x = this.stageWidth / 2 + (this.tipTextWidth / 2) * this.tipText.scale.x - this.tipText.width;\r\n            }\r\n\r\n            private defineTextStyles(): void {\r\n                this.textFontSize = 56.4;\r\n                if (Settings.isMobile) {\r\n                    this.textFontSize = 28;\r\n                }\r\n                this.defaultTextStyle = new TextStyle({\r\n                    fontFamily: 'troika',\r\n                    fontSize: this.textFontSize,\r\n                    fill: 0xffffff,\r\n                    dropShadow: true,\r\n                    dropShadowColor: '#000000',\r\n                    dropShadowBlur: 1,\r\n                    dropShadowAngle: Math.PI / 3,\r\n                    dropShadowDistance: 8\r\n                });\r\n                this.warningTextStyle = new TextStyle({\r\n                    fontFamily: 'troika',\r\n                    fontSize: this.textFontSize,\r\n                    fill: 0xff0000,\r\n                    dropShadow: true,\r\n                    dropShadowColor: '#000000',\r\n                    dropShadowBlur: 1,\r\n                    dropShadowAngle: Math.PI / 3,\r\n                    dropShadowDistance: 8\r\n                });\r\n                this.opponentTextStyle = new TextStyle({});\r\n\r\n            }\r\n\r\n            private addElements(): void {\r\n                // this.usersUIHolder = new Container();\r\n                this.graphicsContainer = new Container();\r\n                this.addChild(this.graphicsContainer);\r\n                this.addVersusGraphics();\r\n                this.addLeftGameGraphics();\r\n                this.addRightGameGraphics();\r\n\r\n                // if (Settings.isMobile) {\r\n                //     this.addTipTextMobile();\r\n                // }\r\n                // else {\r\n                this.addTipText();\r\n                // }\r\n            }\r\n\r\n            private addTipText() {\r\n                this.multilineText = new MultiStyleText(\"\",\r\n                    {\r\n                        \"default\": this.defaultTextStyle,\r\n                        \"warning\": this.warningTextStyle,\r\n                        \"opponent\": this.opponentTextStyle\r\n                    });\r\n                // let style = new PIXI.TextStyle({\r\n                //     fontFamily: 'troika',\r\n                //     fontSize: 56.4,\r\n                //     fill: 0xffffff,\r\n                //     // fontStyle: 'italic',\r\n                //     // fontWeight: 'bold',\r\n                //     // fill: ['#ffffff', '#00ff99'], // gradient\r\n                //     // stroke: '#4a1850',\r\n                //     // strokeThickness: 5,\r\n                //     // align: \"right\",\r\n                //     dropShadow: true,\r\n                //     dropShadowColor: '#000000',\r\n                //     dropShadowBlur: 1,\r\n                //     dropShadowAngle: Math.PI / 3,\r\n                //     dropShadowDistance: 8,\r\n                //     // wordWrap: true,\r\n                //     // wordWrapWidth: this.tipTextWidth,\r\n                // });\r\n\r\n                // this.tipText = new TextField(\"\", style);\r\n\r\n                this.tipTextContainer = new Container();\r\n                this.tipTextContainer.name = \"tipTextContainer\";\r\n                this.addChild(this.tipTextContainer);\r\n                this.multilineText.scale.x = this.multilineText.scale.y = 0.5;\r\n                this.addChild(this.multilineText);\r\n                // this.tipTextContainer.addChild(this.tipText);\r\n                this.tipTextContainer.addChild(this.multilineText);\r\n            }\r\n\r\n            private addTipTextMobile() {\r\n                let style = new PIXI.TextStyle({\r\n                    fontFamily: 'troika',\r\n                    fontSize: 14,\r\n                    fill: 0xffffff,\r\n                    // fontStyle: 'italic',\r\n                    // fontWeight: 'bold',\r\n                    // fill: ['#ffffff', '#00ff99'], // gradient\r\n                    // stroke: '#4a1850',\r\n                    // strokeThickness: 5,\r\n                    // align: \"right\",\r\n                    dropShadow: true,\r\n                    dropShadowColor: '#000000',\r\n                    dropShadowBlur: 1,\r\n                    dropShadowAngle: Math.PI / 3,\r\n                    dropShadowDistance: 6,\r\n                    /* wordWrap: true,\r\n                     wordWrapWidth: 934,*/\r\n                });\r\n\r\n                this.tipText = new TextField(\"\", style);\r\n\r\n                this.tipTextContainer = new Container();\r\n                this.addChild(this.tipTextContainer);\r\n                this.tipTextContainer.addChild(this.tipText);\r\n            }\r\n\r\n            private addVersusGraphics() {\r\n                this.versus = new PockeyUiVersusGraphics();\r\n                this.versus.x -= this.versus.width / 2;\r\n                this.graphicsContainer.addChild(this.versus);\r\n            }\r\n\r\n            private addLeftGameGraphics() {\r\n                this.leftGameGraphics = new PockeyUserGameGraphics(\"left\");\r\n                this.leftGameGraphics.x = this.versus.x - this.leftGameGraphics.width - 36;\r\n                this.versus.y = this.leftGameGraphics.height - this.versus.height + 8;\r\n                this.graphicsContainer.addChild(this.leftGameGraphics);\r\n\r\n            }\r\n\r\n            private addRightGameGraphics() {\r\n                this.rightGameGraphics = new PockeyUserGameGraphics(\"right\");\r\n                this.rightGameGraphics.x = this.versus.x + this.versus.width + 36;\r\n                this.graphicsContainer.addChild(this.rightGameGraphics);\r\n            }\r\n\r\n\r\n            // private onUpdateOpponentScore(score: number) {\r\n            //     // this.rightGameGraphics.updateScore(score);\r\n            // }\r\n\r\n            // public onResize(stageWidth: number, stageHeight: number): void {\r\n            //     // this.stageWidth = stageWidth;\r\n            //     // this.stageHeight = stageHeight;\r\n            //     //\r\n            //     // this.menuBackground.x = stageWidth / 2 - this.menuBackground.width / 2;\r\n            //     // this.menuBackground.y = stageHeight / 2 - this.menuBackground.height / 2;\r\n            // }\r\n\r\n        }\r\n    }\r\n}","/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 10/2/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n        import Sprite = PIXI.Sprite;\r\n        import Settings = Framework.Settings;\r\n        import PixiButton = Framework.UserInterface.PixiButton;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n        import TextField = Framework.utils.TextField;\r\n\r\n        export class PockeyUiWinningScreen extends Container {\r\n            private background: Sprite;\r\n            private winningTextField: TextField;\r\n\r\n            constructor() {\r\n                super();\r\n                this.registerSignalHandlers();\r\n                this.addElements();\r\n            }\r\n\r\n\r\n            private addElements(): void {\r\n                this.addWinningBackground();\r\n                this.addRestartButton();\r\n            }\r\n\r\n            private addWinningBackground() {\r\n\r\n                // let backgroundTexture:Texture = new PIXI.Texture.fromImage(beeSvg, undefined, undefined, width / 600)\r\n                // this.poolTableBackgroundBottom = new Sprite(PIXI.Texture.fromFrame(Settings.desktopAssetsPath + \"Images/table_bottom.png\"));\r\n\r\n                //@ts-ignore\r\n                // const svgTest = new PIXI.SVG(Settings.desktopAssetsPath + \"Images/menu_background.svg\");\r\n                // this.addChild(svgTest);\r\n                //@ts-ignore\r\n                // const svg = new PIXI.SVG(Settings.desktopAssetsPath + \"Images/menu_background.svg\");\r\n                // this.addChild(svg);\r\n\r\n                this.background = new Sprite(PIXI.Texture.fromImage(Settings.desktopAssetsPath + \"Images/menu_background.svg\"));\r\n                console.log(\"this.background.width, height: \" + this.background.width, this.background.height);\r\n                this.background.x = Settings.stageWidth / 2 - this.background.width / 2;\r\n                this.background.y = Settings.stageHeight / 2 - this.background.height / 2;\r\n                // this.background = new Sprite(PIXI.Texture.fromImage(Settings.desktopAssetsPath + \"Images/menu_background.svg\"));\r\n                // this.background.x -= this.background.width / 2;\r\n                // this.background.y -= this.background.height / 2;\r\n                this.addChild(this.background);\r\n            }\r\n\r\n            public onResize(): void {\r\n                this.background.x = Settings.stageWidth / 2 - this.background.width / 2;\r\n                this.background.y = Settings.stageHeight / 2 - this.background.height / 2;\r\n            }\r\n\r\n            // private o\r\n            private addRestartButton(): void {\r\n                /*let pixiBtn: PixiButton = new PixiButton();\r\n                // create the text object\r\n                let style = new PIXI.TextStyle({\r\n                    fontFamily: 'troika',\r\n                    fontSize: 24,\r\n                    fill: 0xffffff\r\n                });\r\n                pixiBtn.setText(\"RESTART\", style);\r\n                pixiBtn.clicked = () => {\r\n                    SignalsManager.DispatchSignal(PockeySignalTypes.RESTART_GAME);\r\n                };\r\n\r\n\r\n                pixiBtn.x = this.background.width / 2;// - pixiBtn.width / 2;\r\n                pixiBtn.y = this.background.height / 2;// - pixiBtn.height / 2;\r\n                // pixiBtn.y = this.background.height / 2;\r\n                this.background.addChild(pixiBtn);\r\n\r\n                this.winningTextField = new TextField(\"You won\", style);\r\n                this.winningTextField.x = this.background.width / 2 - this.winningTextField.width / 2;\r\n                this.winningTextField.y = 40;//this.background.height / 2 - this.winningTextField.height / 2;\r\n                this.background.addChild(this.winningTextField);*/\r\n            }\r\n\r\n            private registerSignalHandlers(): void {\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.UPDATE_WINNING_MESSAGE, this.onUpdateWinningMessage.bind(this));\r\n\r\n            }\r\n\r\n            private onUpdateWinningMessage(message: string) {\r\n                this.winningTextField.setText(message);\r\n            }\r\n        }\r\n    }\r\n}","///<reference path=\"../../../Framework/AbstractModules/UserInterface/abstract-user-interface-module.ts\"/>\r\n///<reference path=\"../SignalsModule/pockey-signal-types.ts\"/>\r\n///<reference path=\"../../../Framework/Signals/signals-manager.ts\"/>\r\n///<reference path=\"Screens/pockey-ui-searching-screen.ts\"/>\r\n///<reference path=\"Screens/MainScreen/pockey-ui-main-screen.ts\"/>\r\n///<reference path=\"Screens/pockey-ui-game-screen.ts\"/>\r\n///<reference path=\"Screens/pockey-ui-winning-screen.ts\"/>\r\n/**\r\n *  Edgeflow\r\n *  Copyright 2018 EdgeFlow\r\n *  All Rights Reserved.\r\n *\r\n *  NOTICE: You may not use, distribute or modify this document without the\r\n *  written permission of its copyright owner\r\n *\r\n *  Created by Sandru Andrei on 8/8/2018\r\n */\r\n\r\nnamespace Pockey {\r\n    export module UserInterface {\r\n\r\n        import AbstractUserInterfaceModule = Framework.UserInterface.AbstractUserInterfaceModule;\r\n        import SignalsManager = Framework.Signals.SignalsManager;\r\n        import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n\r\n        export class PockeyUserInterfaceModule extends AbstractUserInterfaceModule {\r\n\r\n\r\n            private mainScreen: PockeyUiMainScreen;\r\n            private searchingScreen: PockeyUiSearchingScreen;\r\n            private gameScreen: PockeyUiGameScreen;\r\n            private winningScreen: PockeyUiWinningScreen;\r\n\r\n            /*private playerLifeUnitsArray: Sprite[];\r\n            private oppLifeUnitsArray: Sprite[];\r\n\r\n\r\n            private playerLifeBar: Sprite;\r\n            private oppLifeBar: Sprite;*/\r\n\r\n            constructor() {\r\n                super();\r\n            }\r\n\r\n            public createElements(): void {\r\n\r\n                this.mainScreen = new PockeyUiMainScreen();\r\n                this.searchingScreen = new PockeyUiSearchingScreen();\r\n                // this.gameScreen = new PockeyUiGameScreen();\r\n                // this.winningScreen = new PockeyUiWinningScreen();\r\n\r\n                // this.addChild(this.mainScreen);\r\n\r\n                // this.addChild(this.gameScreen);\r\n                /*this.playerLifeUnitsArray = [];\r\n                this.oppLifeUnitsArray = [];\r\n\r\n                this.playerLifeBar = this.createLifeBar(this.playerLifeUnitsArray);\r\n                this.playerLifeBar.name = \"playerLifeBar\";\r\n                this.playerLifeBar.x = 525;\r\n                this.playerLifeBar.y = 90;\r\n                this.addChild(this.playerLifeBar);\r\n\r\n\r\n                this.oppLifeBar = this.createLifeBar(this.oppLifeUnitsArray);\r\n                this.oppLifeBar.name = \"oppLifeBar\";\r\n                this.oppLifeBar.x = this.playerLifeBar.x + 655;\r\n                this.oppLifeBar.y = this.playerLifeBar.y;\r\n                this.addChild(this.oppLifeBar);*/\r\n\r\n\r\n                super.createElements();\r\n            }\r\n\r\n            protected registerSignalsHandlers(): void {\r\n                super.registerSignalsHandlers();\r\n\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SHOW_MAIN_MENU, this.onShowMainMenu.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.HIDE_MAIN_MENU, this.onHideMainMenu.bind(this));\r\n\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.SHOW_GAME_UI, this.onShowGameMenu.bind(this));\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.HIDE_GAME_UI, this.onHideGameMenu.bind(this));\r\n                //\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.SHOW_SEARCHING_SCREEN, this.onShowSearchingScreen.bind(this));\r\n                SignalsManager.AddSignalCallback(PockeySignalTypes.HIDE_SEARCHING_SCREEN, this.onHideSearchingScreen.bind(this));\r\n                //\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.SHOW_WINNING_SCREEN, this.onShowWinningScreen.bind(this));\r\n                // SignalsManager.AddSignalCallback(PockeySignalTypes.HIDE_WINNING_SCREEN, this.onHideWinningScreen.bind(this));\r\n\r\n            }\r\n\r\n            private onShowWinningScreen(): void {\r\n                this.addChild(this.winningScreen);\r\n            }\r\n\r\n            private onHideWinningScreen(): void {\r\n                this.removeChild(this.winningScreen);\r\n            }\r\n\r\n            private onShowSearchingScreen(): void {\r\n                this.searchingScreen.setVisibleTrue();\r\n            }\r\n\r\n            private onHideSearchingScreen(): void {\r\n                this.searchingScreen.setVisibleFalse();\r\n            }\r\n\r\n            private onShowMainMenu(): void {\r\n                this.mainScreen.setVisibleTrue();\r\n                // this.addChild(this.mainScreen);\r\n            }\r\n\r\n            private onHideMainMenu(): void {\r\n                this.mainScreen.setVisibleFalse();\r\n                // this.removeChild(this.mainScreen);\r\n            }\r\n\r\n            private onShowGameMenu(): void {\r\n                this.addChild(this.gameScreen);\r\n            }\r\n\r\n            private onHideGameMenu(): void {\r\n                this.removeChild(this.gameScreen);\r\n            }\r\n\r\n            protected onResize(params: any[]): void {\r\n                super.onResize(params);\r\n\r\n                // if (this.mainScreen)\r\n                //     this.mainScreen.onResize();\r\n                // if (this.searchingScreen)\r\n                //     this.searchingScreen.onResize();\r\n                //\r\n                // if (this.winningScreen)\r\n                //     this.winningScreen.onResize();\r\n\r\n            }\r\n\r\n            protected handleDesktopLandscape(): void {\r\n                super.handleDesktopLandscape();\r\n\r\n                if (this.gameScreen)\r\n                    this.gameScreen.handleDesktopLandscape();\r\n            }\r\n\r\n            protected handleMobilePortrait(): void {\r\n                super.handleMobilePortrait();\r\n\r\n                if (this.gameScreen)\r\n                    this.gameScreen.onResizeMobilePortrait();\r\n            }\r\n\r\n            protected handleMobileLandscape(): void {\r\n                super.handleMobileLandscape();\r\n\r\n                if (this.gameScreen)\r\n                    this.gameScreen.onResizeMobileLandscape();\r\n            }\r\n\r\n            /*\r\n\r\n\r\n\r\n\r\n\r\n\r\n                        // private onResizeBackground(params: any[]): void {\r\n                        //     let scaleFactor: number = params[0];\r\n                        //\r\n                        //     // let position: Point = params[1] as Point;\r\n                        //     // let rotation: number = params[2];\r\n                        //     //\r\n                        //     // this.Layer.x = position.x;\r\n                        //     // this.Layer.y = position.y;\r\n                        //     //\r\n                        //     // this.Layer.rotation = rotation;\r\n                        //     // this.Layer.scale.x = scaleFactor;\r\n                        //     // this.Layer.scale.y = scaleFactor;\r\n                        // }\r\n\r\n                        protected createElements(): void {\r\n\r\n                            this.mainScreen = new PockeyUiMainScreen();\r\n                            this.searchingScreen = new PockeyUiSearchingScreen();\r\n                            // this.addChild(this.mainScreen);\r\n\r\n                            // this.gameScreen = new PockeyUiGameScreen();\r\n                            // this.addChild(this.gameScreen);\r\n                            /!*this.playerLifeUnitsArray = [];\r\n                            this.oppLifeUnitsArray = [];\r\n\r\n                            this.playerLifeBar = this.createLifeBar(this.playerLifeUnitsArray);\r\n                            this.playerLifeBar.name = \"playerLifeBar\";\r\n                            this.playerLifeBar.x = 525;\r\n                            this.playerLifeBar.y = 90;\r\n                            this.addChild(this.playerLifeBar);\r\n\r\n\r\n                            this.oppLifeBar = this.createLifeBar(this.oppLifeUnitsArray);\r\n                            this.oppLifeBar.name = \"oppLifeBar\";\r\n                            this.oppLifeBar.x = this.playerLifeBar.x + 655;\r\n                            this.oppLifeBar.y = this.playerLifeBar.y;\r\n                            this.addChild(this.oppLifeBar);*!/\r\n\r\n\r\n                            super.createElements();\r\n                        }\r\n\r\n\r\n                        */\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\n// \"ball-black.png\"\r\n// \"ball-highlight.png\"\r\n// \"ball-puck-01.png\"\r\n// \"ball-puck-02.png\"\r\n// \"ball-puckInvalid.png\"\r\n// \"ball-scratch.png\"\r\n// \"ball-shadow.png\"\r\n// \"barrier-corner.png\"\r\n// \"barrier-icon.png\"\r\n// \"barrier-side.png\"\r\n// \"rightGoal-shine.png\"\r\n// \"goal_arrowIndicator.png\"\r\n// \"goalie.png\"\r\n// \"penalty-droppuck.png\"\r\n// \"power-bg.png\"\r\n// \"power-color.png\"\r\n// \"powerUp_pocketBlock.png\"\r\n// \"powerUp_speedBuff.png\"\r\n// \"puck-icon.png\"\r\n// \"puck-indicator.png\"\r\n// \"puck_drop.png\"\r\n// \"roundcomplete.png\"\r\n// \"table_english-01.png\"\r\n// \"table_english-reticle.png\"\r\n// \"table_power-01a.png\"\r\n// \"table_power-light1.png\"\r\n// \"table_power-light2.png\"\r\n// \"table_power-light3.png\"\r\n// \"table_power-light4.png\"\r\n// \"ui_icon-arrow.png\"\r\n// \"ui_icon-tipsReg.png\"\r\n// \"ui_versus-empty.png\"\r\n// \"ui_versus-main.png\"\r\n// \"ui_versus-won.png\"\r\n// \"vs.png\" --------------- used","///<reference path=\"../GameFiles/Modules/GameModule/pockey-game-module.ts\"/>\r\n///<reference path=\"../GameFiles/Modules/GameModule/game-manager.ts\"/>\r\n///<reference path=\"../GameFiles/Modules/BackgroundModule/pockey-background-module.ts\"/>\r\n///<reference path=\"../GameFiles/Modules/GameModule/p2-world-manager.ts\"/>\r\n///<reference path=\"../Framework/Utils/mouse-handler.ts\"/>\r\n///<reference path=\"../Framework/Abstracts/layers.ts\"/>\r\n///<reference path=\"../Framework/Settings.ts\"/>\r\n///<reference path=\"../Framework/abstract-entry-point.ts\"/>\r\n///<reference path=\"../GameFiles/Modules/ConnectionModule/pockey-connection-module.ts\"/>\r\n///<reference path=\"../GameFiles/Modules/UserInterface/pockey-user-interface-module.ts\"/>\r\n///<reference path=\"../Framework/Utils/cookie.ts\"/>\r\n///<reference path=\"../Framework/AbstractModules/Connection/database-connector.ts\"/>\r\n\r\nnamespace Pockey {\r\n\r\n    import AbstractEntryPoint = Framework.AbstractEntryPoint;\r\n    import AbstractModule = Framework.Abstracts.AbstractModule;\r\n    import Settings = Framework.Settings;\r\n    import Layers = Framework.Layers;\r\n    import PockeyGameModule = Pockey.GameModule.PockeyGameModule;\r\n    import GameManager = Pockey.GameModule.GameManager;\r\n    import P2WorldManager = Pockey.GameModule.P2WorldManager;\r\n    import PockeyStateMachine = Pockey.StateMachineModule.PockeyStateMachine;\r\n    import SignalsManager = Framework.Signals.SignalsManager;\r\n    import PockeySignalTypes = Pockey.SignalsModule.PockeySignalTypes;\r\n    import MouseHandler = Framework.Utils.MouseHandler;\r\n    import PockeyBackgroundModule = Pockey.Background.PockeyBackgroundModule;\r\n    import PockeyConnectionModule = Pockey.Connection.PockeyConnectionModule;\r\n    import PockeyConnectionSignals = Pockey.SignalsModule.PockeyConnectionSignals;\r\n    import PockeyUserInterfaceModule = Pockey.UserInterface.PockeyUserInterfaceModule;\r\n    import readCookie = Framework.Utils.readCookie;\r\n    import DatabaseConnector = Framework.Connection.DatabaseConnector;\r\n\r\n    export class PockeyEntryPoint extends AbstractEntryPoint {\r\n        private gameModule: AbstractModule;\r\n\r\n        // private fixedTimeStep = 1 / 60; // seconds\r\n        private maxSubSteps = 7; // Max sub steps to catch up with the wall clock\r\n        private lastTime;\r\n        // public static p2World: p2.World;\r\n\r\n        // private groundBody: p2.Body;\r\n        // private groundBody: p2.Body;\r\n\r\n        // private circleBody: p2.Body;\r\n        constructor() {\r\n            super();\r\n            this.name = \"PockeyEntryPoint\";\r\n        }\r\n\r\n        protected getCookieData(): void {\r\n            super.getCookieData();\r\n\r\n            PockeySettings.PLAYER_CUE_ID = PockeySettings.SMALL_CUES_ARRAY[0].id;\r\n            PockeySettings.PLAYER_DECAL_ID = PockeySettings.SMALL_DECALS_ARRAY[0].id;\r\n\r\n            if (this.cookieIsAvailable()) {\r\n               /* if (readCookie('PockeyUserColorId') != \"\") {\r\n                    PockeySettings.PLAYER_COLOR_ID = parseInt(readCookie('PockeyUserColorId'));\r\n                }\r\n                if (readCookie('PockeyUserAvatarId') != \"\") {\r\n                    // PockeySettings.PLAYER_AVATAR_ID = parseInt(readCookie('PockeyUserAvatarId'));\r\n                }*/\r\n\r\n                if (this.cookieEmailIsAvailable() || this.facebookIDisAvailable()) {\r\n\r\n                    DatabaseConnector.checkDatabaseUser(readCookie('PockeyEmail'), PockeyEntryPoint.checkUserIDRequestListener.bind(this));\r\n                    if (readCookie('PockeyUserColorId') != \"\") {\r\n                        PockeySettings.PLAYER_COLOR_ID = parseInt(readCookie('PockeyUserColorId'));\r\n                    }\r\n                    if (readCookie('PockeyUserAvatarId') != \"\") {\r\n                        PockeySettings.PLAYER_AVATAR_ID = readCookie('PockeyUserAvatarId');\r\n                    }\r\n                    if (readCookie('PockeyUserCueId') != \"\") {\r\n                        PockeySettings.PLAYER_CUE_ID = readCookie('PockeyUserCueId');\r\n                    }\r\n                    if (readCookie('PockeyUserDecalId') != \"\") {\r\n                        PockeySettings.PLAYER_DECAL_ID = readCookie('PockeyUserDecalId');\r\n                    }\r\n\r\n\r\n                    Settings.playerSignedIn = true;\r\n                }\r\n                else {\r\n\r\n                }\r\n                //\r\n                /* this.userEmail = this.cookieUserEmail;\r\n\r\n                 this.checkDatabaseUser();*/\r\n\r\n            } else {\r\n\r\n                /*this.showEmailPage();*/\r\n            }\r\n        }\r\n\r\n        private static checkUserIDRequestListener(e: Event): void {\r\n            console.log(\"check user id: \" + (e.target as XMLHttpRequest).responseText);\r\n            // if (this.checkUserRequest.responseText != 'false' && this.checkUserRequest.responseText != '') {\r\n            //     // this.seen = _.split(this.checkUserRequest.responseText, ',').map(Number);\r\n            // }\r\n            //\r\n            // this.checkUserRequest.removeEventListener(\"load\", this.checkUserIDRequestListener.bind(this));\r\n        }\r\n\r\n        private cookieIsAvailable(): boolean {\r\n            PockeySettings.PLAYER_NAME = readCookie('PockeyUsername');\r\n\r\n            return PockeySettings.PLAYER_NAME != '';\r\n        }\r\n\r\n        private cookieEmailIsAvailable(): boolean {\r\n            return readCookie('PockeyEmail') != '';\r\n        }\r\n\r\n        private facebookIDisAvailable(): boolean {\r\n            return readCookie('PockeyFacebookID') != '';\r\n        }\r\n\r\n        protected addFontsToLoad(): void {\r\n            super.addFontsToLoad();\r\n\r\n            this.assetsLoader.addFontToLoad(\"troika\");\r\n            this.assetsLoader.addFontToLoad(\"opensansextrabold\");\r\n            this.assetsLoader.addFontToLoad(\"midtown\");\r\n\r\n        }\r\n\r\n        protected addModules(): void {\r\n            //start game module instantiation\r\n            this.gameModule = this.getGameModule();\r\n            this.registerModule(this.gameModule);\r\n            //end of game module instantiation\r\n\r\n            super.addModules();\r\n\r\n\r\n        }\r\n\r\n\r\n        // protected addUIModule(): void {\r\n        //     // super.addUIModule();\r\n        //     this.uiModule = this.getUIModule();\r\n        //     this.registerModule(this.uiModule);\r\n        // }\r\n\r\n        protected getGameModule(): AbstractModule {\r\n            let gameModule = new PockeyGameModule();\r\n            gameModule.Name = \"GameModule\";\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey_main.json\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey_main.png\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey-decals.json\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey-decals.png\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey-sticks.json\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey-sticks.png\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/ballTexture.jpg\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/balls.json\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/balls.png\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/color_big.png\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/table_bottom.png\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/color_big_over.png\");\r\n            gameModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/color_big_shadow.png\");\r\n\r\n            gameModule.Layer = this.getLayer(Layers.GameLayer);\r\n\r\n            return gameModule;\r\n        }\r\n\r\n        protected getUIModule(): AbstractModule {\r\n            let uiModule = new PockeyUserInterfaceModule();\r\n            uiModule.Name = \"PockeyUIModule\";\r\n            uiModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey_main.json\");\r\n            uiModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey_main.png\");\r\n            uiModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/menu_background.svg\");\r\n\r\n            // _.forEach(PockeySettings.LARGE_AVATARS_ARRAY, (path: string) => {\r\n            //     uiModule.addAssetToLoad(path);\r\n            // });\r\n\r\n            // uiModule.addAssetToLoad(Settings.desktopAssetsPath + \"Images/pockey-menu_BG.png\");\r\n            uiModule.Layer = this.getLayer(Layers.UILayer);\r\n\r\n            return uiModule;\r\n        }\r\n\r\n        protected getBackgroundModule(): AbstractModule {\r\n            let backgroundModule = new PockeyBackgroundModule();\r\n            backgroundModule.registerBackground(PockeySettings.POCKEY_CUSTOM_BACKGROUND_NAME, Settings.desktopAssetsPath + \"/Images/Backgrounds/game_bg.png\");\r\n\r\n            backgroundModule.Name = \"PockeyBackgroundModule\";\r\n            backgroundModule.addAssetToLoad(Settings.desktopAssetsPath + \"/Images/Backgrounds/game_bg.png\");\r\n            backgroundModule.Layer = this.getLayer(Layers.BackgroundLayer);\r\n\r\n            return backgroundModule;\r\n        }\r\n\r\n\r\n        protected getConnectionModule(): AbstractModule {\r\n            let connectionModule: AbstractModule = new PockeyConnectionModule();\r\n            connectionModule.Name = 'PockeyConnectionModule';\r\n            return connectionModule;\r\n        }\r\n\r\n        protected initializeSingletons(): void {\r\n            super.initializeSingletons();\r\n\r\n            PockeyStateMachine.Instance();\r\n            GameManager.Instance();\r\n            MouseHandler.Instance();\r\n            P2WorldManager.Instance();\r\n        }\r\n\r\n\r\n        protected initializePixi(): void {\r\n            super.initializePixi();\r\n\r\n            //-------------------------------------\r\n            P2WorldManager.Instance().world = new p2.World({\r\n                gravity: [0, 0]\r\n            });\r\n\r\n            // To animate the bodies, we must step the world forward in time, using a fixed time step size.\r\n// The World will run substeps and interpolate automatically for us, to get smooth animation.\r\n\r\n\r\n// Animation loop\r\n\r\n\r\n            // var groundShape = new p2.Plane();\r\n            // this.groundBody = new p2.Body({\r\n            //     mass: 0\r\n            // });\r\n            // this.groundBody.addShape(groundShape);\r\n\r\n\r\n            // var timeStep = 1/60;\r\n            // setInterval(function(){\r\n            //     P2WorldManager.Instance().world.step(timeStep);\r\n            //     // console.log(\"Circle x position: \" + this.circleBody.position[0]);\r\n            //     // console.log(\"Circle y position: \" + this.circleBody.position[1]);\r\n            //     // console.log(\"Circle angle: \" + this.circleBody.angle);\r\n            // }.bind(this), 1000 * timeStep);\r\n            requestAnimationFrame(this.animate.bind(this));\r\n\r\n        }\r\n\r\n        // function animate(time){\r\n        //     requestAnimationFrame(animate);\r\n        //\r\n        //     // Compute elapsed time since last render frame\r\n        //     var deltaTime = lastTime ? (time - lastTime) / 1000 : 0;\r\n        //\r\n        //     // Move bodies forward in time\r\n        //     world.step(fixedTimeStep, deltaTime, maxSubSteps);\r\n        //\r\n        //     // Render the circle at the current interpolated position\r\n        //     renderCircleAtPosition(circleBody.interpolatedPosition);\r\n        //\r\n        //     lastTime = time;\r\n        // }\r\n\r\n        protected frameAnimate(): void {\r\n            super.frameAnimate();\r\n            // if (P2WorldManager.Instance().world)\r\n            //     P2WorldManager.Instance().world.step(PockeySettings.P2_WORLD_STEP);\r\n\r\n            var d = new Date();\r\n            // var n = d.getTime();\r\n            // this.animate(d.getTime());\r\n\r\n            // P2WorldManager.Instance().world.step(1/60);\r\n            // var timeStep:number = 1/60;\r\n            // setInterval(function(){\r\n            //     P2WorldManager.Instance().world.step(timeStep);\r\n\r\n            // if(this.groundBody)\r\n            // console.log(\"ground body: \" + this.groundBody.position);\r\n\r\n            // if (this.circleBody)\r\n            // console.log(\"circle body: \" + this.circleBody.velocity);\r\n        }\r\n\r\n        // Frame rate independent! Success!\r\n        // var fixedTimeStep = 1 / 60, maxSubSteps = 10, lastTimeMilliseconds;\r\n        // private requestAnimationFrame( animloop(timeMilliseconds):Function){\r\n        //     requestAnimationFrame(animloop);\r\n        //     var timeSinceLastCall = 0;\r\n        //     if(timeMilliseconds !== undefined && this.lastTime !== undefined){\r\n        //         timeSinceLastCall = (timeMilliseconds - this.lastTime) / 1000;\r\n        //     }\r\n        //     P2WorldManager.Instance().world.step(PockeySettings.P2_WORLD_STEP, timeSinceLastCall, this.maxSubSteps);\r\n        //     this.lastTime = timeMilliseconds;\r\n        // }\r\n\r\n        // Animation loop\r\n        private animate(time) {\r\n            requestAnimationFrame(this.animate.bind(this));\r\n            // Compute elapsed time since last render frame\r\n            var deltaTime = this.lastTime ? (time - this.lastTime) / 1000 : 0;\r\n\r\n            // Move bodies forward in time\r\n            if (P2WorldManager.Instance().world)\r\n            // P2WorldManager.Instance().world.step(PockeySettings.P2_WORLD_STEP);\r\n                P2WorldManager.Instance().world.step(PockeySettings.P2_WORLD_STEP, deltaTime, this.maxSubSteps);\r\n\r\n            // Render the circle at the current interpolated position\r\n            // renderCircleAtPosition(circleBody.interpolatedPosition);\r\n\r\n            this.lastTime = time;\r\n        }\r\n\r\n\r\n        protected registerSignals() {\r\n            super.registerSignals();\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.PLAYER_SIGNED_IN);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.PLAYER_SIGNED_OUT);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOOT_BALL);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.NEXT_TURN);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.BALL_IN_POCKET);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.WHITE_BALL_IN_POCKET);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.FIRST_BALL_FAULT);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.REPOSITION_WHITE_BALL);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.REACTIVATE_STICK);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.STICK_PIVOT_MOBILE_UPDATE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.STICK_MOBILE_RELEASE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_STICK_POWER_MOBILE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOW_STICK_POWER_MOBILE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.WHITE_BALL_REPOSITIONED);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.MOBILE_WHITE_BALL_REPOSITION_CONFIRMED);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOW_WHITE_BALL_POSITION_CONFIRMER);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_WHITE_BALL_POSITION_CONFIRMER);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_BALL_RAY_GRAPHICS);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.POOLSTICK_ACTIVATED);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.POCKEY_POOL_TABLE_RESIZED);\r\n            SignalsManager.CreateNewSignal(PockeyConnectionSignals.WATCH);\r\n            SignalsManager.CreateNewSignal(PockeyConnectionSignals.SCORE_UPDATE);\r\n            SignalsManager.CreateNewSignal(PockeyConnectionSignals.YOUR_TURN);\r\n            SignalsManager.CreateNewSignal(PockeyConnectionSignals.OPPONENT_SETTINGS);\r\n            SignalsManager.CreateNewSignal(PockeyConnectionSignals.OPPONENT_RESTART_GAME);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOW_MAIN_MENU);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_MAIN_MENU);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOW_POOLTABLE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_POOLTABLE);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOW_SEARCHING_SCREEN);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_SEARCHING_SCREEN);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOW_GAME_UI);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_GAME_UI);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_WINNING_MESSAGE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SHOW_WINNING_SCREEN);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.HIDE_WINNING_SCREEN);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.START_GAME);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.RESET_POOLTABLE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.RESET_STICK_POWER);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.RESET_GAME_SCREEN);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.RESTART_GAME);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SET_SIDES_TYPE);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_PLAYER_NAME);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_PLAYER_SCORE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.CHANGE_PLAYER_COLOR);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_OPPONENT_NAME);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_OPPONENT_SCORE);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.CHANGE_OPPONENT_COLOR);\r\n\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.SEND_ELEMENTS_DATA_TO_MANAGER);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_STATE_TEXT);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_CURRENT_PLAYER_TIMER);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_UI_TEXT);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_UI_TEXT_ON_WATCH);\r\n            SignalsManager.CreateNewSignal(PockeySignalTypes.UPDATE_MATCH_CIRCLES);\r\n            // SignalsManager.CreateNewSignal(PockeySignalTypes.ANIMATE_PUCK_GOAL);\r\n            // SignalsManager.CreateNewSignal(PockeySignalTypes.ANIMATE_PUCK_GOAL_STOP);\r\n            // SignalsManager.CreateNewSignal(PockeySignalTypes.SEND_ELEMENTS_DATA_TO_MANAGER);\r\n            // SignalsManager.CreateNewSignal(PockeySignalTypes.SHOOTING_ENDED);\r\n        }\r\n    }\r\n}\r\n\r\nlet mainModule: Pockey.PockeyEntryPoint;\r\n\r\nwindow.onload = function (): void {\r\n    mainModule = new Pockey.PockeyEntryPoint();\r\n    // @ts-ignore\r\n    // TouchPoint.init();\r\n    this.onresize = (event) => {\r\n        mainModule.windowResize(window.innerWidth, window.innerHeight);\r\n    };\r\n};\r\n\r\n\r\n\r\n"]}